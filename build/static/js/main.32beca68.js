/*! For license information please see main.32beca68.js.LICENSE.txt */
(()=>{var e={403:(e,t,n)=>{"use strict";var r=n(836);t.Z=void 0;var i=r(n(649)),s=n(184),o=(0,i.default)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=o},303:(e,t,n)=>{"use strict";var r=n(836);t.Z=void 0;var i=r(n(649)),s=n(184),o=(0,i.default)((0,s.jsx)("path",{d:"m17.21 9-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"ShoppingBasket");t.Z=o},649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(221)},221:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>a,createChainedFunction:()=>l,createSvgIcon:()=>sr,debounce:()=>or,deprecatedPropType:()=>ar,isMuiElement:()=>lr,ownerDocument:()=>ur,ownerWindow:()=>hr,requirePropFactory:()=>dr,setRef:()=>pr,unstable_ClassNameGenerator:()=>Dr,unstable_useEnhancedEffect:()=>gr,unstable_useId:()=>_r,unsupportedProp:()=>wr,useControlled:()=>br,useEventCallback:()=>Sr,useForkRef:()=>kr,useIsFocusVisible:()=>Rr});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})();function s(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function o(e){if("string"!==typeof e)throw new Error(s(7));return e.charAt(0).toUpperCase()+e.slice(1)}const a=o;const l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))};function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u=n(791),h=n.t(u,2);function d(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function f(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=f(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const p=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=f(e))&&(r&&(r+=" "),r+=t);return r};function m(e,t){const n=c({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=c({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},s=t[r];n[r]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[r]=c({},s),Object.keys(i).forEach((e=>{n[r][e]=m(i[e],s[e])}))):n[r]=s:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function g(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?m(t.components[n].defaultProps,r):r}function y(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function v(e){if(!y(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=v(e[n])})),t}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?c({},e):e;return y(e)&&y(t)&&Object.keys(t).forEach((i=>{"__proto__"!==i&&(y(t[i])&&i in e&&y(e[i])?r[i]=_(e[i],t[i],n):n.clone?r[i]=y(t[i])?v(t[i]):t[i]:r[i]=t[i])})),r}const w=["values","unit","step"],b=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>c({},e,{[t.key]:t.val})),{})};const S={borderRadius:4},k={xs:0,sm:600,md:900,lg:1200,xl:1536},E={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(k[e],"px)")};function I(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||E;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=r.breakpoints||E;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||k).indexOf(i)){r[e.up(i)]=n(t[i],i)}else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function C(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function x(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function N(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:x(e,n)||i,t&&(r=t(r,i,e)),r}const P=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],a=x(e.theme,r)||{};return I(e,s,(e=>{let r=N(a,i,e);return e===r&&"string"===typeof e&&(r=N(a,i,"".concat(t).concat("default"===e?"":o(e)),e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s};const A=function(e,t){return t?_(e,t,{clone:!1}):e};const R={m:"margin",p:"padding"},D={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},O={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},M=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!O[e])return[e];e=O[e]}const[t,n]=e.split(""),r=R[t],i=D[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),L=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],F=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],U=[...L,...F];function j(e,t,n,r){var i;const s=null!=(i=x(e,t,!1))?i:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function V(e){return j(e,"spacing",8)}function B(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function z(e,t,n,r){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=B(t,n),e)),{})}(M(n),r);return I(e,e[n],i)}function q(e,t){const n=V(e.theme);return Object.keys(e).map((r=>z(e,t,r,n))).reduce(A,{})}function W(e){return q(e,L)}function H(e){return q(e,F)}function K(e){return q(e,U)}W.propTypes={},W.filterProps=L,H.propTypes={},H.filterProps=F,K.propTypes={},K.filterProps=U;const Y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?A(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function G(e){return"number"!==typeof e?e:"".concat(e,"px solid")}const Q=P({prop:"border",themeKey:"borders",transform:G}),$=P({prop:"borderTop",themeKey:"borders",transform:G}),J=P({prop:"borderRight",themeKey:"borders",transform:G}),X=P({prop:"borderBottom",themeKey:"borders",transform:G}),Z=P({prop:"borderLeft",themeKey:"borders",transform:G}),ee=P({prop:"borderColor",themeKey:"palette"}),te=P({prop:"borderTopColor",themeKey:"palette"}),ne=P({prop:"borderRightColor",themeKey:"palette"}),re=P({prop:"borderBottomColor",themeKey:"palette"}),ie=P({prop:"borderLeftColor",themeKey:"palette"}),se=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=j(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:B(t,e)});return I(e,e.borderRadius,n)}return null};se.propTypes={},se.filterProps=["borderRadius"];Y(Q,$,J,X,Z,ee,te,ne,re,ie,se);const oe=e=>{if(void 0!==e.gap&&null!==e.gap){const t=j(e.theme,"spacing",8),n=e=>({gap:B(t,e)});return I(e,e.gap,n)}return null};oe.propTypes={},oe.filterProps=["gap"];const ae=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=j(e.theme,"spacing",8),n=e=>({columnGap:B(t,e)});return I(e,e.columnGap,n)}return null};ae.propTypes={},ae.filterProps=["columnGap"];const le=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=j(e.theme,"spacing",8),n=e=>({rowGap:B(t,e)});return I(e,e.rowGap,n)}return null};le.propTypes={},le.filterProps=["rowGap"];Y(oe,ae,le,P({prop:"gridColumn"}),P({prop:"gridRow"}),P({prop:"gridAutoFlow"}),P({prop:"gridAutoColumns"}),P({prop:"gridAutoRows"}),P({prop:"gridTemplateColumns"}),P({prop:"gridTemplateRows"}),P({prop:"gridTemplateAreas"}),P({prop:"gridArea"}));function ce(e,t){return"grey"===t?t:e}Y(P({prop:"color",themeKey:"palette",transform:ce}),P({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ce}),P({prop:"backgroundColor",themeKey:"palette",transform:ce}));function ue(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const he=P({prop:"width",transform:ue}),de=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||k[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:ue(t)}};return I(e,e.maxWidth,t)}return null};de.filterProps=["maxWidth"];const fe=P({prop:"minWidth",transform:ue}),pe=P({prop:"height",transform:ue}),me=P({prop:"maxHeight",transform:ue}),ge=P({prop:"minHeight",transform:ue}),ye=(P({prop:"size",cssProperty:"width",transform:ue}),P({prop:"size",cssProperty:"height",transform:ue}),Y(he,de,fe,pe,me,ge,P({prop:"boxSizing"})),{border:{themeKey:"borders",transform:G},borderTop:{themeKey:"borders",transform:G},borderRight:{themeKey:"borders",transform:G},borderBottom:{themeKey:"borders",transform:G},borderLeft:{themeKey:"borders",transform:G},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:se},color:{themeKey:"palette",transform:ce},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ce},backgroundColor:{themeKey:"palette",transform:ce},p:{style:H},pt:{style:H},pr:{style:H},pb:{style:H},pl:{style:H},px:{style:H},py:{style:H},padding:{style:H},paddingTop:{style:H},paddingRight:{style:H},paddingBottom:{style:H},paddingLeft:{style:H},paddingX:{style:H},paddingY:{style:H},paddingInline:{style:H},paddingInlineStart:{style:H},paddingInlineEnd:{style:H},paddingBlock:{style:H},paddingBlockStart:{style:H},paddingBlockEnd:{style:H},m:{style:W},mt:{style:W},mr:{style:W},mb:{style:W},ml:{style:W},mx:{style:W},my:{style:W},margin:{style:W},marginTop:{style:W},marginRight:{style:W},marginBottom:{style:W},marginLeft:{style:W},marginX:{style:W},marginY:{style:W},marginInline:{style:W},marginInlineStart:{style:W},marginInlineEnd:{style:W},marginBlock:{style:W},marginBlockStart:{style:W},marginBlockEnd:{style:W},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:oe},rowGap:{style:le},columnGap:{style:ae},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ue},maxWidth:{style:de},minWidth:{transform:ue},height:{transform:ue},maxHeight:{transform:ue},minHeight:{transform:ue},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const ve=function(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:a=e,themeKey:l,transform:c,style:u}=s;if(null==t)return null;if("typography"===l&&"inherit"===t)return{[e]:t};const h=x(n,l)||{};if(u)return u(i);return I(i,t,(t=>{let n=N(h,c,t);return t===n&&"string"===typeof t&&(n=N(h,c,"".concat(e).concat("default"===t?"":o(t)),t)),!1===a?n:{[a]:n}}))}return function t(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=null!=(r=s.unstable_sxConfig)?r:ye;function a(n){let r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;const i=T(s.breakpoints),a=Object.keys(i);let l=i;return Object.keys(r).forEach((n=>{const i=(a=r[n],c=s,"function"===typeof a?a(c):a);var a,c;if(null!==i&&void 0!==i)if("object"===typeof i)if(o[n])l=A(l,e(n,i,s,o));else{const e=I({theme:s},i,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,i)?l=A(l,e):l[n]=t({sx:i,theme:s})}else l=A(l,e(n,i,s,o))})),C(a,l)}return Array.isArray(i)?i.map(a):a(i)}}();ve.filterProps=["sx"];const _e=ve,we=["breakpoints","palette","spacing","shape"];const be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={}}=e,s=d(e,we),o=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=d(e,w),s=b(t),o=Object.keys(s);function a(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function l(e){const i="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(i-r/100).concat(n,")")}function u(e,i){const s=o.indexOf(i);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==s&&"number"===typeof t[o[s]]?t[o[s]]:i)-r/100).concat(n,")")}return c({keys:o,values:s,up:a,down:l,between:u,only:function(e){return o.indexOf(e)+1<o.length?u(e,o[o.indexOf(e)+1]):a(e)},not:function(e){const t=o.indexOf(e);return 0===t?a(o[1]):t===o.length-1?l(o[t]):u(e,o[o.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}(t),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=V({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(r);let l=_({breakpoints:o,direction:"ltr",components:{},palette:c({mode:"light"},n),spacing:a,shape:c({},S,i)},s);for(var u=arguments.length,h=new Array(u>1?u-1:0),f=1;f<u;f++)h[f-1]=arguments[f];return l=h.reduce(((e,t)=>_(e,t)),l),l.unstable_sxConfig=c({},ye,null==s?void 0:s.unstable_sxConfig),l.unstable_sx=function(e){return _e({sx:e,theme:this})},l};var Se=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),ke=Math.abs,Ee=String.fromCharCode,Ie=Object.assign;function Te(e){return e.trim()}function Ce(e,t,n){return e.replace(t,n)}function xe(e,t){return e.indexOf(t)}function Ne(e,t){return 0|e.charCodeAt(t)}function Pe(e,t,n){return e.slice(t,n)}function Ae(e){return e.length}function Re(e){return e.length}function De(e,t){return t.push(e),e}var Oe=1,Me=1,Le=0,Fe=0,Ue=0,je="";function Ve(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Oe,column:Me,length:o,return:""}}function Be(e,t){return Ie(Ve("",null,null,"",null,null,0),e,{length:-e.length},t)}function ze(){return Ue=Fe>0?Ne(je,--Fe):0,Me--,10===Ue&&(Me=1,Oe--),Ue}function qe(){return Ue=Fe<Le?Ne(je,Fe++):0,Me++,10===Ue&&(Me=1,Oe++),Ue}function We(){return Ne(je,Fe)}function He(){return Fe}function Ke(e,t){return Pe(je,e,t)}function Ye(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ge(e){return Oe=Me=1,Le=Ae(je=e),Fe=0,[]}function Qe(e){return je="",e}function $e(e){return Te(Ke(Fe-1,Ze(91===e?e+2:40===e?e+1:e)))}function Je(e){for(;(Ue=We())&&Ue<33;)qe();return Ye(e)>2||Ye(Ue)>3?"":" "}function Xe(e,t){for(;--t&&qe()&&!(Ue<48||Ue>102||Ue>57&&Ue<65||Ue>70&&Ue<97););return Ke(e,He()+(t<6&&32==We()&&32==qe()))}function Ze(e){for(;qe();)switch(Ue){case e:return Fe;case 34:case 39:34!==e&&39!==e&&Ze(Ue);break;case 40:41===e&&Ze(e);break;case 92:qe()}return Fe}function et(e,t){for(;qe()&&e+Ue!==57&&(e+Ue!==84||47!==We()););return"/*"+Ke(t,Fe-1)+"*"+Ee(47===e?e:qe())}function tt(e){for(;!Ye(We());)qe();return Ke(e,Fe)}var nt="-ms-",rt="-moz-",it="-webkit-",st="comm",ot="rule",at="decl",lt="@keyframes";function ct(e,t){for(var n="",r=Re(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ut(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case at:return e.return=e.return||e.value;case st:return"";case lt:return e.return=e.value+"{"+ct(e.children,r)+"}";case ot:e.value=e.props.join(",")}return Ae(n=ct(e.children,r))?e.return=e.value+"{"+n+"}":""}function ht(e){return Qe(dt("",null,null,null,[""],e=Ge(e),0,[0],e))}function dt(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,_="",w=i,b=s,S=r,k=_;g;)switch(p=v,v=qe()){case 40:if(108!=p&&58==Ne(k,h-1)){-1!=xe(k+=Ce($e(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:k+=$e(v);break;case 9:case 10:case 13:case 32:k+=Je(p);break;case 92:k+=Xe(He()-1,7);continue;case 47:switch(We()){case 42:case 47:De(pt(et(qe(),He()),t,n),l);break;default:k+="/"}break;case 123*m:a[c++]=Ae(k)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(k=Ce(k,/\f/g,"")),f>0&&Ae(k)-h&&De(f>32?mt(k+";",r,n,h-1):mt(Ce(k," ","")+";",r,n,h-2),l);break;case 59:k+=";";default:if(De(S=ft(k,t,n,c,u,i,a,_,w=[],b=[],h),s),123===v)if(0===u)dt(k,t,S,S,w,s,h,a,b);else switch(99===d&&110===Ne(k,3)?100:d){case 100:case 108:case 109:case 115:dt(e,S,S,r&&De(ft(e,S,S,0,0,i,a,_,i,w=[],h),b),i,b,h,a,r?w:b);break;default:dt(k,S,S,S,[""],b,0,a,b)}}c=u=f=0,m=y=1,_=k="",h=o;break;case 58:h=1+Ae(k),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==ze())continue;switch(k+=Ee(v),v*m){case 38:y=u>0?1:(k+="\f",-1);break;case 44:a[c++]=(Ae(k)-1)*y,y=1;break;case 64:45===We()&&(k+=$e(qe())),d=We(),u=h=Ae(_=k+=tt(He())),v++;break;case 45:45===p&&2==Ae(k)&&(m=0)}}return s}function ft(e,t,n,r,i,s,o,a,l,c,u){for(var h=i-1,d=0===i?s:[""],f=Re(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=Pe(e,h+1,h=ke(m=o[p])),_=e;y<f;++y)(_=Te(m>0?d[y]+" "+v:Ce(v,/&\f/g,d[y])))&&(l[g++]=_);return Ve(e,t,n,0===i?ot:a,l,c,u)}function pt(e,t,n){return Ve(e,t,n,st,Ee(Ue),Pe(e,2,-2),0)}function mt(e,t,n,r){return Ve(e,t,n,at,Pe(e,0,r),Pe(e,r+1,-1),r)}var gt=function(e,t,n){for(var r=0,i=0;r=i,i=We(),38===r&&12===i&&(t[n]=1),!Ye(i);)qe();return Ke(e,Fe)},yt=function(e,t){return Qe(function(e,t){var n=-1,r=44;do{switch(Ye(r)){case 0:38===r&&12===We()&&(t[n]=1),e[n]+=gt(Fe-1,t,n);break;case 2:e[n]+=$e(r);break;case 4:if(44===r){e[++n]=58===We()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Ee(r)}}while(r=qe());return e}(Ge(e),t))},vt=new WeakMap,_t=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||vt.get(n))&&!r){vt.set(e,!0);for(var i=[],s=yt(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},wt=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function bt(e,t){switch(function(e,t){return 45^Ne(e,0)?(((t<<2^Ne(e,0))<<2^Ne(e,1))<<2^Ne(e,2))<<2^Ne(e,3):0}(e,t)){case 5103:return it+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return it+e+rt+e+nt+e+e;case 6828:case 4268:return it+e+nt+e+e;case 6165:return it+e+nt+"flex-"+e+e;case 5187:return it+e+Ce(e,/(\w+).+(:[^]+)/,it+"box-$1$2"+nt+"flex-$1$2")+e;case 5443:return it+e+nt+"flex-item-"+Ce(e,/flex-|-self/,"")+e;case 4675:return it+e+nt+"flex-line-pack"+Ce(e,/align-content|flex-|-self/,"")+e;case 5548:return it+e+nt+Ce(e,"shrink","negative")+e;case 5292:return it+e+nt+Ce(e,"basis","preferred-size")+e;case 6060:return it+"box-"+Ce(e,"-grow","")+it+e+nt+Ce(e,"grow","positive")+e;case 4554:return it+Ce(e,/([^-])(transform)/g,"$1"+it+"$2")+e;case 6187:return Ce(Ce(Ce(e,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),e,"")+e;case 5495:case 3959:return Ce(e,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return Ce(Ce(e,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+nt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+e+e;case 4095:case 3583:case 4068:case 2532:return Ce(e,/(.+)-inline(.+)/,it+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ae(e)-1-t>6)switch(Ne(e,t+1)){case 109:if(45!==Ne(e,t+4))break;case 102:return Ce(e,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+rt+(108==Ne(e,t+3)?"$3":"$2-$3"))+e;case 115:return~xe(e,"stretch")?bt(Ce(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ne(e,t+1))break;case 6444:switch(Ne(e,Ae(e)-3-(~xe(e,"!important")&&10))){case 107:return Ce(e,":",":"+it)+e;case 101:return Ce(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(45===Ne(e,14)?"inline-":"")+"box$3$1"+it+"$2$3$1"+nt+"$2box$3")+e}break;case 5936:switch(Ne(e,t+11)){case 114:return it+e+nt+Ce(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return it+e+nt+Ce(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return it+e+nt+Ce(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return it+e+nt+e+e}return e}var St=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case at:e.return=bt(e.value,e.length);break;case lt:return ct([Be(e,{value:Ce(e.value,"@","@"+it)})],r);case ot:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ct([Be(e,{props:[Ce(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ct([Be(e,{props:[Ce(t,/:(plac\w+)/,":"+it+"input-$1")]}),Be(e,{props:[Ce(t,/:(plac\w+)/,":-moz-$1")]}),Be(e,{props:[Ce(t,/:(plac\w+)/,nt+"input-$1")]})],r)}return""}))}}],kt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||St;var i,s,o={},a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,c,u=[ut,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=Re(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([_t,wt].concat(r,u));s=function(e,t,n,r){l=n,ct(ht(e?e+"{"+t.styles+"}":t.styles),h),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Se({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return d.sheet.hydrate(a),d};var Et={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function It(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Tt=/[A-Z]|^ms/g,Ct=/_EMO_([^_]+?)_([^]*?)_EMO_/g,xt=function(e){return 45===e.charCodeAt(1)},Nt=function(e){return null!=e&&"boolean"!==typeof e},Pt=It((function(e){return xt(e)?e:e.replace(Tt,"-$&").toLowerCase()})),At=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Ct,(function(e,t,n){return Dt={name:t,styles:n,next:Dt},t}))}return 1===Et[e]||xt(e)||"number"!==typeof t||0===t?t:t+"px"};function Rt(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Dt={name:n.name,styles:n.styles,next:Dt},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Dt={name:r.name,styles:r.styles,next:Dt},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Rt(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":Nt(o)&&(r+=Pt(s)+":"+At(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=Rt(e,t,o);switch(s){case"animation":case"animationName":r+=Pt(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var l=0;l<o.length;l++)Nt(o[l])&&(r+=Pt(s)+":"+At(s,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Dt,s=n(e);return Dt=i,Rt(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Dt,Ot=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Mt=!!h.useInsertionEffect&&h.useInsertionEffect,Lt=Mt||function(e){return e()},Ft=(Mt||u.useLayoutEffect,u.createContext("undefined"!==typeof HTMLElement?kt({key:"css"}):null));Ft.Provider;var Ut=function(e){return(0,u.forwardRef)((function(t,n){var r=(0,u.useContext)(Ft);return e(t,r,n)}))};var jt=u.createContext({});const Vt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=u.useContext(jt);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},Bt=be();const zt=function(){return Vt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt)};function qt(e,t){return c({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}function Wt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Ht(e){if(e.type)return e;if("#"===e.charAt(0))return Ht(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(s(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(s(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function Kt(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Yt(e){let t="hsl"===(e=Ht(e)).type||"hsla"===e.type?Ht(function(e){e=Ht(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Kt({type:a,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Gt(e,t){if(e=Ht(e),t=Wt(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Kt(e)}function Qt(e,t){if(e=Ht(e),t=Wt(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Kt(e)}const $t={black:"#000",white:"#fff"},Jt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Xt={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Zt={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},en={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},tn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},nn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},rn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},sn=["mode","contrastThreshold","tonalOffset"],on={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:$t.white,default:$t.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},an={text:{primary:$t.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:$t.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ln(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Qt(e.main,i):"dark"===t&&(e.dark=Gt(e.main,s)))}function cn(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=d(e,sn),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:tn[200],light:tn[50],dark:tn[400]}:{main:tn[700],light:tn[400],dark:tn[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Xt[200],light:Xt[50],dark:Xt[400]}:{main:Xt[500],light:Xt[300],dark:Xt[700]}}(t),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Zt[500],light:Zt[300],dark:Zt[700]}:{main:Zt[700],light:Zt[400],dark:Zt[800]}}(t),u=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:nn[400],light:nn[300],dark:nn[700]}:{main:nn[700],light:nn[500],dark:nn[900]}}(t),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:rn[400],light:rn[300],dark:rn[700]}:{main:rn[800],light:rn[500],dark:rn[900]}}(t),f=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:en[400],light:en[300],dark:en[700]}:{main:"#ed6c02",light:en[500],dark:en[900]}}(t);function p(e){const t=function(e,t){const n=Yt(e),r=Yt(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,an.text.primary)>=n?an.text.primary:on.text.primary;return t}const m=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:a=700}=e;if(t=c({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(s(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(s(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return ln(t,"light",o,r),ln(t,"dark",a,r),t.contrastText||(t.contrastText=p(t.main)),t},g={dark:an,light:on};return _(c({common:c({},$t),mode:t,primary:m({color:o,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:l,name:"error"}),warning:m({color:f,name:"warning"}),info:m({color:u,name:"info"}),success:m({color:h,name:"success"}),grey:Jt,contrastThreshold:n,getContrastText:p,augmentColor:m,tonalOffset:r},g[t]),i)}const un=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const hn={textTransform:"uppercase"},dn='"Roboto", "Helvetica", "Arial", sans-serif';function fn(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=dn,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:h,pxToRem:f}=n,p=d(n,un);const m=i/14,g=f||(e=>"".concat(e/u*m,"rem")),y=(e,t,n,i,s)=>{return c({fontFamily:r,fontWeight:e,fontSize:g(t),lineHeight:n},r===dn?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},s,h);var o},v={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(a,14,1.75,.4,hn),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,hn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _(c({htmlFontSize:u,pxToRem:g,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},v),p,{clone:!1})}function pn(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const mn=["none",pn(0,2,1,-1,0,1,1,0,0,1,3,0),pn(0,3,1,-2,0,2,2,0,0,1,5,0),pn(0,3,3,-2,0,3,4,0,0,1,8,0),pn(0,2,4,-1,0,4,5,0,0,1,10,0),pn(0,3,5,-1,0,5,8,0,0,1,14,0),pn(0,3,5,-1,0,6,10,0,0,1,18,0),pn(0,4,5,-2,0,7,10,1,0,2,16,1),pn(0,5,5,-3,0,8,10,1,0,3,14,2),pn(0,5,6,-3,0,9,12,1,0,3,16,2),pn(0,6,6,-3,0,10,14,1,0,4,18,3),pn(0,6,7,-4,0,11,15,1,0,4,20,3),pn(0,7,8,-4,0,12,17,2,0,5,22,4),pn(0,7,8,-4,0,13,19,2,0,5,24,4),pn(0,7,9,-4,0,14,21,2,0,5,26,4),pn(0,8,9,-5,0,15,22,2,0,6,28,5),pn(0,8,10,-5,0,16,24,2,0,6,30,5),pn(0,8,11,-5,0,17,26,2,0,6,32,5),pn(0,9,11,-5,0,18,28,2,0,7,34,6),pn(0,9,12,-6,0,19,29,2,0,7,36,6),pn(0,10,13,-6,0,20,31,3,0,8,38,7),pn(0,10,13,-6,0,21,33,3,0,8,40,7),pn(0,10,14,-6,0,22,35,3,0,8,42,7),pn(0,11,14,-7,0,23,36,3,0,9,44,8),pn(0,11,15,-7,0,24,38,3,0,9,46,8)],gn=["duration","easing","delay"],yn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},vn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function _n(e){return"".concat(Math.round(e),"ms")}function wn(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function bn(e){const t=c({},yn,e.easing),n=c({},vn,e.duration);return c({getAutoHeightDuration:wn,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0}=r;d(r,gn);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:_n(i)," ").concat(s," ").concat("string"===typeof o?o:_n(o)))).join(",")}},e,{easing:t,duration:n})}const Sn={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},kn=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,o=d(e,kn);if(e.vars)throw new Error(s(18));const a=cn(n),l=be(e);let u=_(l,{mixins:qt(l.breakpoints,t),palette:a,shadows:mn.slice(),typography:fn(a,i),transitions:bn(r),zIndex:c({},Sn)});u=_(u,o);for(var h=arguments.length,f=new Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];return u=f.reduce(((e,t)=>_(e,t)),u),u.unstable_sxConfig=c({},ye,null==o?void 0:o.unstable_sxConfig),u.unstable_sx=function(e){return _e({sx:e,theme:this})},u}const In=En(),Tn="$$material";function Cn(e){let{props:t,name:n}=e;return function(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,s=zt(r);return i&&(s=s[i]||s),g({theme:s,name:n,props:t})}({props:t,name:n,defaultTheme:In,themeId:Tn})}var xn=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;var Nn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Pn=It((function(e){return xn.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),An=function(e){return"theme"!==e},Rn=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Pn:An},Dn=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},On=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Nn(t,n,r),Lt((function(){return function(e,t,n){Nn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},Mn=function e(t,n){var r,i,s=t.__emotion_real===t,o=s&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var a=Dn(t,n,s),l=a||Rn(o),h=!l("as");return function(){var d=arguments,f=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&f.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)f.push.apply(f,d);else{0,f.push(d[0][0]);for(var p=d.length,m=1;m<p;m++)f.push(d[m],d[0][m])}var g=Ut((function(e,t,n){var r=h&&e.as||o,s="",c=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=u.useContext(jt)}"string"===typeof e.className?s=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(t.registered,c,e.className):null!=e.className&&(s=e.className+" ");var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Dt=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=Rt(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=Rt(n,t,e[o]),r&&(i+=s[o]);Ot.lastIndex=0;for(var a,l="";null!==(a=Ot.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Dt}}(f.concat(c),t.registered,d);s+=t.key+"-"+m.name,void 0!==i&&(s+=" "+i);var g=h&&void 0===a?Rn(r):l,y={};for(var v in e)h&&"as"===v||g(v)&&(y[v]=e[v]);return y.className=s,y.ref=n,u.createElement(u.Fragment,null,u.createElement(On,{cache:t,serialized:m,isStringTag:"string"===typeof r}),u.createElement(r,y))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof o?o:o.displayName||o.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=o,g.__emotion_styles=f,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,c({},n,r,{shouldForwardProp:Dn(g,r,!0)})).apply(void 0,f)},g}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Mn[e]=Mn(e)}));const Ln=["variant"];function Fn(e){return 0===e.length}function Un(e){const{variant:t}=e,n=d(e,Ln);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?Fn(r)?e[t]:o(e[t]):"".concat(Fn(r)?t:o(t)).concat(o(e[t].toString()))})),r}const jn=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];const Vn=e=>{const t={};return e&&e.forEach((e=>{const n=Un(e.props);t[n]=e.style})),t},Bn=(e,t,n)=>{const{ownerState:r={}}=e,i=[];return n&&n.forEach((n=>{let s=!0;Object.keys(n.props).forEach((t=>{r[t]!==n.props[t]&&e[t]!==n.props[t]&&(s=!1)})),s&&i.push(t[Un(n.props)])})),i};function zn(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const qn=be(),Wn=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function Hn(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function Kn(e){return e?(t,n)=>n[e]:null}const Yn=e=>{let{styledArg:t,props:n,defaultTheme:r,themeId:i}=e;const s=t(c({},n,{theme:Hn(c({},n,{defaultTheme:r,themeId:i}))}));let o;if(s&&s.variants&&(o=s.variants,delete s.variants),o){return[s,...Bn(n,Vn(o),o)]}return s};const Gn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=qn,rootShouldForwardProp:r=zn,slotShouldForwardProp:i=zn}=e,s=e=>_e(c({},e,{theme:Hn(c({},e,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};((e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))})(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:u,skipSx:h,overridesResolver:f=Kn(Wn(l))}=o,p=d(o,jn),m=void 0!==u?u:l&&"Root"!==l&&"root"!==l||!1,g=h||!1;let v=zn;"Root"===l||"root"===l?v=r:l?v=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(v=void 0);const w=function(e,t){return Mn(e,t)}(e,c({shouldForwardProp:v,label:undefined},p)),b=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];const u=o?o.map((e=>{if("function"===typeof e&&e.__emotion_real!==e)return r=>Yn({styledArg:e,props:r,defaultTheme:n,themeId:t});if(y(e)){let t,n=e;return e&&e.variants&&(t=e.variants,delete n.variants,n=n=>{let r=e;return Bn(n,Vn(t),t).forEach((e=>{r=_(r,e)})),r}),n}return e})):[];let h=r;if(y(r)){let e;r&&r.variants&&(e=r.variants,delete h.variants,h=t=>{let n=r;return Bn(t,Vn(e),e).forEach((e=>{n=_(n,e)})),n})}else"function"===typeof r&&r.__emotion_real!==r&&(h=e=>Yn({styledArg:r,props:e,defaultTheme:n,themeId:t}));a&&f&&u.push((e=>{const r=Hn(c({},e,{defaultTheme:n,themeId:t})),i=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(a,r);if(i){const t={};return Object.entries(i).forEach((n=>{let[i,s]=n;t[i]="function"===typeof s?s(c({},e,{theme:r})):s})),f(e,t)}return null})),a&&!m&&u.push((e=>{const r=Hn(c({},e,{defaultTheme:n,themeId:t}));return((e,t,n,r)=>{var i;const s=null==n||null==(i=n.components)||null==(i=i[r])?void 0:i.variants;return Bn(e,t,s)})(e,((e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),Vn(n)})(a,r),r,a)})),g||u.push(s);const d=u.length-o.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");h=[...r,...e],h.raw=[...r.raw,...e]}const p=w(h,...u);return e.muiName&&(p.muiName=e.muiName),p};return w.withConfig&&(b.withConfig=w.withConfig),b}}({themeId:Tn,defaultTheme:In,rootShouldForwardProp:e=>zn(e)&&"classes"!==e}),Qn=Gn,$n={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Jn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=$n[t];return r?"".concat(n,"-").concat(r):"".concat(i.generate(e),"-").concat(t)}function Xn(e){return Jn("MuiSvgIcon",e)}!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};t.forEach((t=>{r[t]=Jn(e,t,n)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var Zn=n(184);const er=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],tr=e=>{const{color:t,fontSize:n,classes:r}=e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}({root:["root","inherit"!==t&&"color".concat(a(t)),"fontSize".concat(a(n))]},Xn,r)},nr=Qn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(a(n.color))],t["fontSize".concat(a(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,s,o,a,l,c,u,h,d,f,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(s=t.transitions)||null==(s=s.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(o=t.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(h=u.pxToRem)?void 0:h.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(f=(t.vars||t).palette)||null==(f=f[n.color])?void 0:f.main)?d:{action:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),rr=u.forwardRef((function(e,t){const n=Cn({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:s="inherit",component:o="svg",fontSize:a="medium",htmlColor:l,inheritViewBox:h=!1,titleAccess:f,viewBox:m="0 0 24 24"}=n,g=d(n,er),y=u.isValidElement(r)&&"svg"===r.type,v=c({},n,{color:s,component:o,fontSize:a,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:m,hasSvgAsChild:y}),_={};h||(_.viewBox=m);const w=tr(v);return(0,Zn.jsxs)(nr,c({as:o,className:p(w.root,i),focusable:"false",color:l,"aria-hidden":!f||void 0,role:f?"img":void 0,ref:t},_,g,y&&r.props,{ownerState:v,children:[y?r.props.children:r,f?(0,Zn.jsx)("title",{children:f}):null]}))}));rr.muiName="SvgIcon";const ir=rr;function sr(e,t){function n(n,r){return(0,Zn.jsx)(ir,c({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=ir.muiName,u.memo(u.forwardRef(n))}const or=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r};const ar=function(e,t){return()=>null};const lr=function(e,t){var n,r;return u.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)};function cr(e){return e&&e.ownerDocument||document}const ur=cr;const hr=function(e){return cr(e).defaultView||window};const dr=function(e,t){return()=>null};function fr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const pr=fr,mr="undefined"!==typeof window?u.useLayoutEffect:u.useEffect,gr=mr;let yr=0;const vr=h["useId".toString()];const _r=function(e){if(void 0!==vr){const t=vr();return null!=e?e:t}return function(e){const[t,n]=u.useState(e),r=e||t;return u.useEffect((()=>{null==t&&(yr+=1,n("mui-".concat(yr)))}),[t]),r}(e)};const wr=function(e,t,n,r,i){return null};const br=function(e){let{controlled:t,default:n,name:r,state:i="value"}=e;const{current:s}=u.useRef(void 0!==t),[o,a]=u.useState(n);return[s?t:o,u.useCallback((e=>{s||a(e)}),[])]};const Sr=function(e){const t=u.useRef(e);return mr((()=>{t.current=e})),u.useRef((function(){return(0,t.current)(...arguments)})).current};const kr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{fr(t,e)}))}),t)};let Er,Ir=!0,Tr=!1;const Cr={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function xr(e){e.metaKey||e.altKey||e.ctrlKey||(Ir=!0)}function Nr(){Ir=!1}function Pr(){"hidden"===this.visibilityState&&Tr&&(Ir=!0)}function Ar(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return Ir||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!Cr[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const Rr=function(){const e=u.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",xr,!0),t.addEventListener("mousedown",Nr,!0),t.addEventListener("pointerdown",Nr,!0),t.addEventListener("touchstart",Nr,!0),t.addEventListener("visibilitychange",Pr,!0))}),[]),t=u.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Ar(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(Tr=!0,window.clearTimeout(Er),Er=window.setTimeout((()=>{Tr=!1}),100),t.current=!1,!0)},ref:e}},Dr={configure:e=>{i.configure(e)}}},764:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){return c(e)||u(e,t)||h(e,t)||f()}function c(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(l){a=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}function h(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function g(){}function y(){}y.resetWarningCache=g;var v=function(){function e(e,t,n,r,i,s){if(s!==m){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:y,resetWarningCache:g};return n.PropTypes=n,n},_=p((function(e){e.exports=v()})),w=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},b=function(e){return null!==e&&"object"===i(e)},S=function(e){return b(e)&&"function"===typeof e.then},k=function(e){return b(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},E="[object Object]",I=function e(t,n){if(!b(t)||!b(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===E;if(i!==(Object.prototype.toString.call(n)===E))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(var a={},l=0;l<s.length;l+=1)a[s[l]]=!0;for(var c=0;c<o.length;c+=1)a[o[c]]=!0;var u=Object.keys(a);if(u.length!==s.length)return!1;var h=t,d=n,f=function(t){return e(h[t],d[t])};return u.every(f)},T=function(e,t,n){return b(e)?Object.keys(e).reduce((function(i,o){var a=!b(t)||!I(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),i):a?r(r({},i||{}),{},s({},o,e[o])):i}),null):null},C="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;if(null===e||k(e))return e;throw new Error(t)},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;if(S(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return x(e,t)}))};var n=x(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},P=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.3.2"}),e.registerAppInfo({name:"react-stripe-js",version:"2.3.2",url:"https://stripe.com/docs/stripe-js/react"}))},A=["on","session"],R=t.createContext(null);R.displayName="CustomCheckoutSdkContext";var D=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},O=t.createContext(null);O.displayName="CustomCheckoutContext";var M=function(e,t){if(!e)return null;e.on,e.session;var n=a(e,A);return r(r({},n),t||e.session())},L="Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",F=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return N(n,L)}),[n]),o=l(t.useState(null),2),a=o[0],c=o[1],u=l(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,customCheckoutSdk:null}})),2),h=u[0],d=u[1],f=function(e,t){d((function(n){return n.stripe&&n.customCheckoutSdk?n:{stripe:e,customCheckoutSdk:t}}))},p=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==s.tag||h.stripe?"sync"===s.tag&&s.stripe&&!p.current&&(p.current=!0,s.stripe.initCustomCheckout(r).then((function(e){e&&(f(s.stripe,e),e.on("change",c))}))):s.stripePromise.then((function(t){t&&e&&!p.current&&(p.current=!0,t.initCustomCheckout(r).then((function(e){e&&(f(t,e),e.on("change",c))})))})),function(){e=!1}}),[s,h,r,c]);var m=w(n);t.useEffect((function(){null!==m&&m!==n&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[m,n]);var g=w(r);t.useEffect((function(){var e,t;if(h.customCheckoutSdk){!r.clientSecret||b(g)||I(r.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,i=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance;i&&!I(i,n)&&h.customCheckoutSdk.changeAppearance(i)}}),[r,g,h.customCheckoutSdk]),t.useEffect((function(){P(h.stripe)}),[h.stripe]);var y=t.useMemo((function(){return M(h.customCheckoutSdk,a)}),[h.customCheckoutSdk,a]);return h.customCheckoutSdk?t.createElement(R.Provider,{value:h},t.createElement(O.Provider,{value:y},i)):null};F.propTypes={stripe:_.any,options:_.shape({clientSecret:_.string.isRequired,elementsOptions:_.object}).isRequired};var U=function(e){var n=t.useContext(R);return D(n,e)},j=function(e){var n=t.useContext(R),r=t.useContext(B);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?D(n,e):z(r,e)},V=function(){U("calls useCustomCheckout()");var e=t.useContext(O);if(!e)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return e},B=t.createContext(null);B.displayName="ElementsContext";var z=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},q=t.createContext(null);q.displayName="CartElementContext";var W=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},H=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return N(n)}),[n]),o=l(t.useState(null),2),a=o[0],c=o[1],u=l(t.useState(null),2),h=u[0],d=u[1],f=l(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}})),2),p=f[0],m=f[1];t.useEffect((function(){var e=!0,t=function(e){m((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==s.tag||p.stripe?"sync"!==s.tag||p.stripe||t(s.stripe):s.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[s,p,r]);var g=w(n);t.useEffect((function(){null!==g&&g!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[g,n]);var y=w(r);return t.useEffect((function(){if(p.elements){var e=T(r,y,["clientSecret","fonts"]);e&&p.elements.update(e)}}),[r,y,p.elements]),t.useEffect((function(){P(p.stripe)}),[p.stripe]),t.createElement(B.Provider,{value:p},t.createElement(q.Provider,{value:{cart:a,setCart:c,cartState:h,setCartState:d}},i))};H.propTypes={stripe:_.any,options:_.object};var K=function(e){var n=t.useContext(B);return z(n,e)},Y={cart:null,cartState:null,setCart:function(){},setCartState:function(){}},G=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.useContext(q);return n?Y:W(r,e)},Q=function(){return K("calls useElements()").elements},$=function(){return j("calls useStripe()").stripe},J=function(){return G("calls useCartElement()").cart},X=function(){return G("calls useCartElementState()").cartState},Z=function(e){return(0,e.children)(K("mounts <ElementsConsumer>"))};Z.propTypes={children:_.func.isRequired};var ee=function(e,n,r){var i=!!r,s=t.useRef(r);t.useEffect((function(){s.current=r}),[r]),t.useEffect((function(){if(!i||!e)return function(){};var t=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[i,n,e,s])},te=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ne=function(e,n){var r="".concat(te(e),"Element"),i=n?function(e){var n=j("mounts <".concat(r,">"));G("mounts <".concat(r,">"),"customCheckoutSdk"in n);var i=e.id,s=e.className;return t.createElement("div",{id:i,className:s})}:function(n){var i,s=n.id,o=n.className,a=n.options,c=void 0===a?{}:a,u=n.onBlur,h=n.onFocus,d=n.onReady,f=n.onChange,p=n.onEscape,m=n.onClick,g=n.onLoadError,y=n.onLoaderStart,v=n.onNetworksChange,_=n.onCheckout,b=n.onLineItemClick,S=n.onConfirm,k=n.onCancel,E=n.onShippingAddressChange,I=n.onShippingRateChange,C=j("mounts <".concat(r,">")),x="elements"in C?C.elements:null,N="customCheckoutSdk"in C?C.customCheckoutSdk:null,P=l(t.useState(null),2),A=P[0],R=P[1],D=t.useRef(null),O=t.useRef(null),M=G("mounts <".concat(r,">"),"customCheckoutSdk"in C),L=M.setCart,F=M.setCartState;ee(A,"blur",u),ee(A,"focus",h),ee(A,"escape",p),ee(A,"click",m),ee(A,"loaderror",g),ee(A,"loaderstart",y),ee(A,"networkschange",v),ee(A,"lineitemclick",b),ee(A,"confirm",S),ee(A,"cancel",k),ee(A,"shippingaddresschange",E),ee(A,"shippingratechange",I),"cart"===e?i=function(e){F(e),d&&d(e)}:d&&(i="expressCheckout"===e?d:function(){d(A)}),ee(A,"ready",i),ee(A,"change","cart"===e?function(e){F(e),f&&f(e)}:f),ee(A,"checkout","cart"===e?function(e){F(e),_&&_(e)}:_),t.useLayoutEffect((function(){if(null===D.current&&null!==O.current&&(x||N)){var t=null;N?t=N.createElement(e,c):x&&(t=x.create(e,c)),"cart"===e&&L&&L(t),D.current=t,R(t),t&&t.mount(O.current)}}),[x,N,c,L]);var U=w(c);return t.useEffect((function(){if(D.current){var e=T(c,U,["paymentRequest"]);e&&D.current.update(e)}}),[c,U]),t.useLayoutEffect((function(){return function(){if(D.current&&"function"===typeof D.current.destroy)try{D.current.destroy(),D.current=null}catch(e){}}}),[]),t.createElement("div",{id:s,className:o,ref:O})};return i.propTypes={id:_.string,className:_.string,onChange:_.func,onBlur:_.func,onFocus:_.func,onReady:_.func,onEscape:_.func,onClick:_.func,onLoadError:_.func,onLoaderStart:_.func,onNetworksChange:_.func,onCheckout:_.func,onLineItemClick:_.func,onConfirm:_.func,onCancel:_.func,onShippingAddressChange:_.func,onShippingRateChange:_.func,options:_.object},i.displayName=r,i.__elementType=e,i},re="undefined"===typeof window,ie=t.createContext(null);ie.displayName="EmbeddedCheckoutProviderContext";var se=function(){var e=t.useContext(ie);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},oe="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ae=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return N(n,oe)}),[n]),o=t.useRef(null),a=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),u=c[0],h=c[1];t.useEffect((function(){if(!a.current&&!o.current){var e=function(e){a.current||o.current||(a.current=e,o.current=a.current.initEmbeddedCheckout(r).then((function(e){h({embeddedCheckout:e})})))};"async"===s.tag&&!a.current&&r.clientSecret?s.stripePromise.then((function(t){t&&e(t)})):"sync"===s.tag&&!a.current&&r.clientSecret&&e(s.stripe)}}),[s,r,u,a]),t.useEffect((function(){return function(){u.embeddedCheckout?(o.current=null,u.embeddedCheckout.destroy()):o.current&&o.current.then((function(){o.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()}))}}),[u.embeddedCheckout]),t.useEffect((function(){P(a)}),[a]);var d=w(n);t.useEffect((function(){null!==d&&d!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[d,n]);var f=w(r);return t.useEffect((function(){null!=f&&(null!=r?(null!=f.clientSecret&&r.clientSecret!==f.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.onComplete&&r.onComplete!==f.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[f,r]),t.createElement(ie.Provider,{value:u},i)},le=function(e){var n=e.id,r=e.className,i=se().embeddedCheckout,s=t.useRef(!1),o=t.useRef(null);return t.useLayoutEffect((function(){return!s.current&&i&&null!==o.current&&(i.mount(o.current),s.current=!0),function(){if(s.current&&i)try{i.unmount(),s.current=!1}catch(e){}}}),[i]),t.createElement("div",{ref:o,id:n,className:r})},ce=function(e){var n=e.id,r=e.className;return se(),t.createElement("div",{id:n,className:r})},ue=re?ce:le,he=ne("auBankAccount",re),de=ne("card",re),fe=ne("cardNumber",re),pe=ne("cardExpiry",re),me=ne("cardCvc",re),ge=ne("fpxBank",re),ye=ne("iban",re),ve=ne("idealBank",re),_e=ne("p24Bank",re),we=ne("epsBank",re),be=ne("payment",re),Se=ne("expressCheckout",re),ke=ne("paymentRequestButton",re),Ee=ne("linkAuthentication",re),Ie=ne("address",re),Te=ne("shippingAddress",re),Ce=ne("cart",re),xe=ne("paymentMethodMessaging",re),Ne=ne("affirmMessage",re),Pe=ne("afterpayClearpayMessage",re);e.AddressElement=Ie,e.AffirmMessageElement=Ne,e.AfterpayClearpayMessageElement=Pe,e.AuBankAccountElement=he,e.CardCvcElement=me,e.CardElement=de,e.CardExpiryElement=pe,e.CardNumberElement=fe,e.CartElement=Ce,e.CustomCheckoutProvider=F,e.Elements=H,e.ElementsConsumer=Z,e.EmbeddedCheckout=ue,e.EmbeddedCheckoutProvider=ae,e.EpsBankElement=we,e.ExpressCheckoutElement=Se,e.FpxBankElement=ge,e.IbanElement=ye,e.IdealBankElement=ve,e.LinkAuthenticationElement=Ee,e.P24BankElement=_e,e.PaymentElement=be,e.PaymentMethodMessagingElement=xe,e.PaymentRequestButtonElement=ke,e.ShippingAddressElement=Te,e.useCartElement=J,e.useCartElementState=X,e.useCustomCheckout=V,e.useElements=Q,e.useStripe=$,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(791))},426:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function c(e){return void 0===e}function u(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Gn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=m()),e._pf}function y(e){if(null==e._isValid){var t=g(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function v(e){var t=p(NaN);return null!=e?f(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var _=r.momentProperties=[],w=!1;function b(e,t){var n,r,i,s=_.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=g(t)),c(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)c(i=t[r=_[n]])||(e[r]=i);return e}function S(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function k(e){return e instanceof S||null!=e&&null!=e._isAMomentObject}function E(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function I(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,s,o,l=[],c=arguments.length;for(s=0;s<c;s++){if(i="","object"===typeof arguments[s]){for(o in i+="\n["+s+"] ",arguments[0])a(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[s];l.push(i)}E(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,C={};function x(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),C[e]||(E(t),C[e]=!0)}function N(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function P(e){var t,n;for(n in e)a(e,n)&&(N(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function A(e,t){var n,r=f({},e);for(n in t)a(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)a(e,n)&&!a(t,n)&&o(e[n])&&(r[n]=f({},r[n]));return r}function R(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};var D={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function O(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return N(r)?r.call(t,n):r}function M(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var L=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},j={};function V(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(j[e]=i),t&&(j[t[0]]=function(){return M(i.apply(this,arguments),t[1],t[2])}),n&&(j[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,r=e.match(L);for(t=0,n=r.length;t<n;t++)j[r[t]]?r[t]=j[r[t]]:r[t]=B(r[t]);return function(t){var i,s="";for(i=0;i<n;i++)s+=N(r[i])?r[i].call(t,e):r[i];return s}}function q(e,t){return e.isValid()?(t=W(t,e.localeData()),U[t]=U[t]||z(t),U[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;n>=0&&F.test(e);)e=e.replace(F,r),F.lastIndex=0,n-=1;return e}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(L).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var Y="Invalid date";function G(){return this._invalidDate}var Q="%d",$=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var X={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,n,r){var i=this._relativeTime[n];return N(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return N(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function re(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)a(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var se={};function oe(e,t){se[e]=t}function ae(e){var t,n=[];for(t in e)a(e,t)&&n.push({unit:t,priority:se[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function le(e){return e%4===0&&e%100!==0||e%400===0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ce(t)),n}function he(e,t){return function(n){return null!=n?(fe(this,e,n),r.updateOffset(this,t),this):de(this,e)}}function de(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&le(e.year())&&1===e.month()&&29===e.date()?(n=ue(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ze(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function pe(e){return N(this[e=re(e)])?this[e]():this}function me(e,t){if("object"===typeof e){var n,r=ae(e=ie(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(N(this[e=re(e)]))return this[e](t);return this}var ge,ye=/\d/,ve=/\d\d/,_e=/\d{3}/,we=/\d{4}/,be=/[+-]?\d{6}/,Se=/\d\d?/,ke=/\d\d\d\d?/,Ee=/\d\d\d\d\d\d?/,Ie=/\d{1,3}/,Te=/\d{1,4}/,Ce=/[+-]?\d{1,6}/,xe=/\d+/,Ne=/[+-]?\d+/,Pe=/Z|[+-]\d\d:?\d\d/gi,Ae=/Z|[+-]\d\d(?::?\d\d)?/gi,Re=/[+-]?\d+(\.\d{1,3})?/,De=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Oe(e,t,n){ge[e]=N(t)?t:function(e,r){return e&&n?n:t}}function Me(e,t){return a(ge,e)?ge[e](t._strict,t._locale):new RegExp(Le(e))}function Le(e){return Fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ge={};var Ue={};function je(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),u(t)&&(i=function(e,n){n[t]=ue(e)}),r=e.length,n=0;n<r;n++)Ue[e[n]]=i}function Ve(e,t){je(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Be(e,t,n){null!=t&&a(Ue,e)&&Ue[e](t,n._a,n,e)}var ze,qe=0,We=1,He=2,Ke=3,Ye=4,Ge=5,Qe=6,$e=7,Je=8;function Xe(e,t){return(e%t+t)%t}function Ze(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Xe(t,12);return e+=(t-n)/12,1===n?le(e)?29:28:31-n%7%2}ze=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),oe("month",8),Oe("M",Se),Oe("MM",Se,ve),Oe("MMM",(function(e,t){return t.monthsShortRegex(e)})),Oe("MMMM",(function(e,t){return t.monthsRegex(e)})),je(["M","MM"],(function(e,t){t[We]=ue(e)-1})),je(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[We]=i:g(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=De,it=De;function st(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function ot(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function at(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=ze.call(this._shortMonthsParse,o))?i:null:-1!==(i=ze.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=ze.call(this._shortMonthsParse,o))||-1!==(i=ze.call(this._longMonthsParse,o))?i:null:-1!==(i=ze.call(this._longMonthsParse,o))||-1!==(i=ze.call(this._shortMonthsParse,o))?i:null}function lt(e,t,n){var r,i,s;if(this._monthsParseExact)return at.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ct(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=ue(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ze(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ut(e){return null!=e?(ct(this,e),r.updateOffset(this,!0),this):de(this,"Month")}function ht(){return Ze(this.year(),this.month())}function dt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(e){return this._monthsParseExact?(a(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],s=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),s.sort(e),t=0;t<12;t++)r[t]=Fe(r[t]),i[t]=Fe(i[t]);for(t=0;t<24;t++)s[t]=Fe(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function mt(e){return le(e)?366:365}V("Y",0,0,(function(){var e=this.year();return e<=9999?M(e,4):"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),oe("year",1),Oe("Y",Ne),Oe("YY",Se,ve),Oe("YYYY",Te,we),Oe("YYYYY",Ce,be),Oe("YYYYYY",Ce,be),je(["YYYYY","YYYYYY"],qe),je("YYYY",(function(e,t){t[qe]=2===e.length?r.parseTwoDigitYear(e):ue(e)})),je("YY",(function(e,t){t[qe]=r.parseTwoDigitYear(e)})),je("Y",(function(e,t){t[qe]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var gt=he("FullYear",!0);function yt(){return le(this.year())}function vt(e,t,n,r,i,s,o){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,s,o),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,s,o),a}function _t(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,n){var r=7+t-n;return-(7+_t(e,0,r).getUTCDay()-t)%7+r-1}function bt(e,t,n,r,i){var s,o,a=1+7*(t-1)+(7+n-r)%7+wt(e,r,i);return a<=0?o=mt(s=e-1)+a:a>mt(e)?(s=e+1,o=a-mt(e)):(s=e,o=a),{year:s,dayOfYear:o}}function St(e,t,n){var r,i,s=wt(e.year(),t,n),o=Math.floor((e.dayOfYear()-s-1)/7)+1;return o<1?r=o+kt(i=e.year()-1,t,n):o>kt(e.year(),t,n)?(r=o-kt(e.year(),t,n),i=e.year()+1):(i=e.year(),r=o),{week:r,year:i}}function kt(e,t,n){var r=wt(e,t,n),i=wt(e+1,t,n);return(mt(e)-r+i)/7}function Et(e){return St(e,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),oe("week",5),oe("isoWeek",5),Oe("w",Se),Oe("ww",Se,ve),Oe("W",Se),Oe("WW",Se,ve),Ve(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=ue(e)}));var It={dow:0,doy:6};function Tt(){return this._week.dow}function Ct(){return this._week.doy}function xt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Nt(e){var t=St(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Pt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function At(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),oe("day",11),oe("weekday",11),oe("isoWeekday",11),Oe("d",Se),Oe("e",Se),Oe("E",Se),Oe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Oe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Oe("dddd",(function(e,t){return t.weekdaysRegex(e)})),Ve(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e})),Ve(["d","e","E"],(function(e,t,n,r){t[r]=ue(e)}));var Dt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ot="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Lt=De,Ft=De,Ut=De;function jt(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Rt(n,this._week.dow):e?n[e.day()]:n}function Vt(e){return!0===e?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return!0===e?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function zt(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=ze.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=ze.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=ze.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=ze.call(this._weekdaysParse,o))||-1!==(i=ze.call(this._shortWeekdaysParse,o))||-1!==(i=ze.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=ze.call(this._shortWeekdaysParse,o))||-1!==(i=ze.call(this._weekdaysParse,o))||-1!==(i=ze.call(this._minWeekdaysParse,o))?i:null:-1!==(i=ze.call(this._minWeekdaysParse,o))||-1!==(i=ze.call(this._weekdaysParse,o))||-1!==(i=ze.call(this._shortWeekdaysParse,o))?i:null}function qt(e,t,n){var r,i,s;if(this._weekdaysParseExact)return zt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Pt(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Kt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=At(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Yt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Lt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Gt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ft),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ut),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $t(){function e(e,t){return t.length-e.length}var t,n,r,i,s,o=[],a=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Fe(this.weekdaysMin(n,"")),i=Fe(this.weekdaysShort(n,"")),s=Fe(this.weekdays(n,"")),o.push(r),a.push(i),l.push(s),c.push(r),c.push(i),c.push(s);o.sort(e),a.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Xt(){return this.hours()||24}function Zt(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Jt),V("k",["kk",2],0,Xt),V("hmm",0,0,(function(){return""+Jt.apply(this)+M(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Jt.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+M(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),ne("hour","h"),oe("hour",13),Oe("a",en),Oe("A",en),Oe("H",Se),Oe("h",Se),Oe("k",Se),Oe("HH",Se,ve),Oe("hh",Se,ve),Oe("kk",Se,ve),Oe("hmm",ke),Oe("hmmss",Ee),Oe("Hmm",ke),Oe("Hmmss",Ee),je(["H","HH"],Ke),je(["k","kk"],(function(e,t,n){var r=ue(e);t[Ke]=24===r?0:r})),je(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),je(["h","hh"],(function(e,t,n){t[Ke]=ue(e),g(n).bigHour=!0})),je("hmm",(function(e,t,n){var r=e.length-2;t[Ke]=ue(e.substr(0,r)),t[Ye]=ue(e.substr(r)),g(n).bigHour=!0})),je("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ke]=ue(e.substr(0,r)),t[Ye]=ue(e.substr(r,2)),t[Ge]=ue(e.substr(i)),g(n).bigHour=!0})),je("Hmm",(function(e,t,n){var r=e.length-2;t[Ke]=ue(e.substr(0,r)),t[Ye]=ue(e.substr(r))})),je("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ke]=ue(e.substr(0,r)),t[Ye]=ue(e.substr(r,2)),t[Ge]=ue(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=he("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var on,an={calendar:D,longDateFormat:H,invalidDate:Y,ordinal:Q,dayOfMonthOrdinalParse:$,relativeTime:X,months:et,monthsShort:tt,week:It,weekdays:Dt,weekdaysMin:Mt,weekdaysShort:Ot,meridiemParse:nn},ln={},cn={};function un(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function dn(e){for(var t,n,r,i,s=0;s<e.length;){for(t=(i=hn(e[s]).split("-")).length,n=(n=hn(e[s+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&un(i,n)>=t-1)break;t--}s++}return on}function fn(e){return null!=e.match("^[^/\\\\]*$")}function pn(t){var n=null;if(void 0===ln[t]&&e&&e.exports&&fn(t))try{n=on._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){ln[t]=null}return ln[t]}function mn(e,t){var n;return e&&((n=c(t)?vn(e):gn(e,t))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),on._abbr}function gn(e,t){if(null!==t){var n,r=an;if(t.abbr=e,null!=ln[e])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ln[e]._config;else if(null!=t.parentLocale)if(null!=ln[t.parentLocale])r=ln[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return ln[e]=new R(A(r,t)),cn[e]&&cn[e].forEach((function(e){gn(e.name,e.config)})),mn(e),ln[e]}return delete ln[e],null}function yn(e,t){if(null!=t){var n,r,i=an;null!=ln[e]&&null!=ln[e].parentLocale?ln[e].set(A(ln[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=A(i,t),null==r&&(t.abbr=e),(n=new R(t)).parentLocale=ln[e],ln[e]=n),mn(e)}else null!=ln[e]&&(null!=ln[e].parentLocale?(ln[e]=ln[e].parentLocale,e===mn()&&mn(e)):null!=ln[e]&&delete ln[e]);return ln[e]}function vn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return on;if(!s(e)){if(t=pn(e))return t;e=[e]}return dn(e)}function _n(){return T(ln)}function wn(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[We]<0||n[We]>11?We:n[He]<1||n[He]>Ze(n[qe],n[We])?He:n[Ke]<0||n[Ke]>24||24===n[Ke]&&(0!==n[Ye]||0!==n[Ge]||0!==n[Qe])?Ke:n[Ye]<0||n[Ye]>59?Ye:n[Ge]<0||n[Ge]>59?Ge:n[Qe]<0||n[Qe]>999?Qe:-1,g(e)._overflowDayOfYear&&(t<qe||t>He)&&(t=He),g(e)._overflowWeeks&&-1===t&&(t=$e),g(e)._overflowWeekday&&-1===t&&(t=Je),g(e).overflow=t),e}var bn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],In=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tn=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,xn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Nn(e){var t,n,r,i,s,o,a=e._i,l=bn.exec(a)||Sn.exec(a),c=En.length,u=In.length;if(l){for(g(e).iso=!0,t=0,n=c;t<n;t++)if(En[t][1].exec(l[1])){i=En[t][0],r=!1!==En[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=u;t<n;t++)if(In[t][1].exec(l[3])){s=(l[2]||" ")+In[t][0];break}if(null==s)return void(e._isValid=!1)}if(!r&&null!=s)return void(e._isValid=!1);if(l[4]){if(!kn.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=i+(s||"")+(o||""),Bn(e)}else e._isValid=!1}function Pn(e,t,n,r,i,s){var o=[An(e),tt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&o.push(parseInt(s,10)),o}function An(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Rn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Dn(e,t,n){return!e||Ot.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function On(e,t,n){if(e)return xn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Mn(e){var t,n=Cn.exec(Rn(e._i));if(n){if(t=Pn(n[4],n[3],n[2],n[5],n[6],n[7]),!Dn(n[1],t,e))return;e._a=t,e._tzm=On(n[8],n[9],n[10]),e._d=_t.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Ln(e){var t=Tn.exec(e._i);null===t?(Nn(e),!1===e._isValid&&(delete e._isValid,Mn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Fn(e,t,n){return null!=e?e:null!=t?t:n}function Un(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function jn(e){var t,n,r,i,s,o=[];if(!e._d){for(r=Un(e),e._w&&null==e._a[He]&&null==e._a[We]&&Vn(e),null!=e._dayOfYear&&(s=Fn(e._a[qe],r[qe]),(e._dayOfYear>mt(s)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=_t(s,0,e._dayOfYear),e._a[We]=n.getUTCMonth(),e._a[He]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ke]&&0===e._a[Ye]&&0===e._a[Ge]&&0===e._a[Qe]&&(e._nextDay=!0,e._a[Ke]=0),e._d=(e._useUTC?_t:vt).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ke]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}function Vn(e){var t,n,r,i,s,o,a,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,o=4,n=Fn(t.GG,e._a[qe],St(Qn(),1,4).year),r=Fn(t.W,1),((i=Fn(t.E,1))<1||i>7)&&(l=!0)):(s=e._locale._week.dow,o=e._locale._week.doy,c=St(Qn(),s,o),n=Fn(t.gg,e._a[qe],c.year),r=Fn(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+s,(t.e<0||t.e>6)&&(l=!0)):i=s),r<1||r>kt(n,s,o)?g(e)._overflowWeeks=!0:null!=l?g(e)._overflowWeekday=!0:(a=bt(n,r,i,s,o),e._a[qe]=a.year,e._dayOfYear=a.dayOfYear)}function Bn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,s,o,a,l,c=""+e._i,u=c.length,h=0;for(l=(i=W(e._f,e._locale).match(L)||[]).length,t=0;t<l;t++)s=i[t],(n=(c.match(Me(s,e))||[])[0])&&((o=c.substr(0,c.indexOf(n))).length>0&&g(e).unusedInput.push(o),c=c.slice(c.indexOf(n)+n.length),h+=n.length),j[s]?(n?g(e).empty=!1:g(e).unusedTokens.push(s),Be(s,n,e)):e._strict&&!n&&g(e).unusedTokens.push(s);g(e).charsLeftOver=u-h,c.length>0&&g(e).unusedInput.push(c),e._a[Ke]<=12&&!0===g(e).bigHour&&e._a[Ke]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[Ke]=zn(e._locale,e._a[Ke],e._meridiem),null!==(a=g(e).era)&&(e._a[qe]=e._locale.erasConvertYear(a,e._a[qe])),jn(e),wn(e)}else Mn(e);else Nn(e)}function zn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function qn(e){var t,n,r,i,s,o,a=!1,l=e._f.length;if(0===l)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<l;i++)s=0,o=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Bn(t),y(t)&&(o=!0),s+=g(t).charsLeftOver,s+=10*g(t).unusedTokens.length,g(t).score=s,a?s<r&&(r=s,n=t):(null==r||s<r||o)&&(r=s,n=t,o&&(a=!0));f(e,n||t)}function Wn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),jn(e)}}function Hn(e){var t=new S(wn(Kn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Kn(e){var t=e._i,n=e._f;return e._locale=e._locale||vn(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new S(wn(t)):(h(t)?e._d=t:s(n)?qn(e):n?Bn(e):Yn(e),y(e)||(e._d=null),e))}function Yn(e){var t=e._i;c(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Ln(e):s(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),jn(e)):o(t)?Wn(e):u(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Gn(e,t,n,r,i){var a={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&l(e)||s(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=r,Hn(a)}function Qn(e,t,n,r){return Gn(e,t,n,r,!1)}r.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var $n=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Qn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()})),Jn=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Qn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}));function Xn(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Qn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Zn(){return Xn("isBefore",[].slice.call(arguments,0))}function er(){return Xn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(a(e,t)&&(-1===ze.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==ue(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function sr(){return xr(NaN)}function or(e){var t=ie(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*a*60*60,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=vn(),this._bubble()}function ar(e){return e instanceof or}function lr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&ue(e[r])!==ue(t[r]))&&o++;return o+s}function ur(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+M(~~(e/60),2)+t+M(~~e%60,2)}))}ur("Z",":"),ur("ZZ",""),Oe("Z",Ae),Oe("ZZ",Ae),je(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=dr(Ae,e)}));var hr=/([\+\-]|\d\d)/gi;function dr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(hr)||["-",0,0])[1]+ue(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(k(e)||h(e)?e.valueOf():Qn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Qn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=dr(Ae,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=pr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Dr(this,xr(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:pr(this)}function gr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yr(e){return this.utcOffset(0,e)}function vr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function _r(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=dr(Pe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wr(e){return!!this.isValid()&&(e=e?Qn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function br(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Sr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Kn(t))._a?(e=t._isUTC?p(t._a):Qn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kr(){return!!this.isValid()&&!this._isUTC}function Er(){return!!this.isValid()&&this._isUTC}function Ir(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Tr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Cr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xr(e,t){var n,r,i,s=e,o=null;return ar(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(o=Tr.exec(e))?(n="-"===o[1]?-1:1,s={y:0,d:ue(o[He])*n,h:ue(o[Ke])*n,m:ue(o[Ye])*n,s:ue(o[Ge])*n,ms:ue(lr(1e3*o[Qe]))*n}):(o=Cr.exec(e))?(n="-"===o[1]?-1:1,s={y:Nr(o[2],n),M:Nr(o[3],n),w:Nr(o[4],n),d:Nr(o[5],n),h:Nr(o[6],n),m:Nr(o[7],n),s:Nr(o[8],n)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(i=Ar(Qn(s.from),Qn(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),r=new or(s),ar(e)&&a(e,"_locale")&&(r._locale=e._locale),ar(e)&&a(e,"_isValid")&&(r._isValid=e._isValid),r}function Nr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Pr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ar(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Pr(e,t):((n=Pr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Rr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(x(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Dr(this,xr(n,r),e),this}}function Dr(e,t,n,i){var s=t._milliseconds,o=lr(t._days),a=lr(t._months);e.isValid()&&(i=null==i||i,a&&ct(e,de(e,"Month")+a*n),o&&fe(e,"Date",de(e,"Date")+o*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&r.updateOffset(e,o||a))}xr.fn=or.prototype,xr.invalid=sr;var Or=Rr(1,"add"),Mr=Rr(-1,"subtract");function Lr(e){return"string"===typeof e||e instanceof String}function Fr(e){return k(e)||h(e)||Lr(e)||u(e)||jr(e)||Ur(e)||null===e||void 0===e}function Ur(e){var t,n,r=o(e)&&!l(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=s.length;for(t=0;t<c;t+=1)n=s[t],i=i||a(e,n);return r&&i}function jr(e){var t=s(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&Lr(e)})).length),t&&n}function Vr(e){var t,n,r=o(e)&&!l(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)n=s[t],i=i||a(e,n);return r&&i}function Br(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function zr(e,t){1===arguments.length&&(arguments[0]?Fr(arguments[0])?(e=arguments[0],t=void 0):Vr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Qn(),i=fr(n,this).startOf("day"),s=r.calendarFormat(this,i)||"sameElse",o=t&&(N(t[s])?t[s].call(this,n):t[s]);return this.format(o||this.localeData().calendar(s,this,Qn(n)))}function qr(){return new S(this)}function Wr(e,t){var n=k(e)?e:Qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Hr(e,t){var n=k(e)?e:Qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Kr(e,t,n,r){var i=k(e)?e:Qn(e),s=k(t)?t:Qn(t);return!!(this.isValid()&&i.isValid()&&s.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(s,n):!this.isAfter(s,n))}function Yr(e,t){var n,r=k(e)?e:Qn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Gr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Qr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function $r(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":s=Jr(this,r)/12;break;case"month":s=Jr(this,r);break;case"quarter":s=Jr(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:ce(s)}function Jr(e,t){if(e.date()<t.date())return-Jr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Xr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?q(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):N(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",s="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=s+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=q(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(k(e)&&e.isValid()||Qn(e).isValid())?xr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Qn(),e)}function ii(e,t){return this.isValid()&&(k(e)&&e.isValid()||Qn(e).isValid())?xr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.to(Qn(),e)}function oi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function li(){return this._locale}var ci=1e3,ui=60*ci,hi=60*ui,di=3506328*hi;function fi(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-di:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-di:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*ui),hi);break;case"minute":t=this._d.valueOf(),t-=fi(t,ui);break;case"second":t=this._d.valueOf(),t-=fi(t,ci)}return this._d.setTime(t),r.updateOffset(this,!0),this}function yi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hi-fi(t+(this._isUTC?0:this.utcOffset()*ui),hi)-1;break;case"minute":t=this._d.valueOf(),t+=ui-fi(t,ui)-1;break;case"second":t=this._d.valueOf(),t+=ci-fi(t,ci)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function vi(){return this._d.valueOf()-6e4*(this._offset||0)}function _i(){return Math.floor(this.valueOf()/1e3)}function wi(){return new Date(this.valueOf())}function bi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Si(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ki(){return this.isValid()?this.toISOString():null}function Ei(){return y(this)}function Ii(){return f({},g(this))}function Ti(){return g(this).overflow}function Ci(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xi(e,t){var n,i,s,o=this._eras||vn("en")._eras;for(n=0,i=o.length;n<i;++n)switch("string"===typeof o[n].since&&(s=r(o[n].since).startOf("day"),o[n].since=s.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":s=r(o[n].until).startOf("day").valueOf(),o[n].until=s.valueOf()}return o}function Ni(e,t,n){var r,i,s,o,a,l=this.eras();for(e=e.toUpperCase(),r=0,i=l.length;r<i;++r)if(s=l[r].name.toUpperCase(),o=l[r].abbr.toUpperCase(),a=l[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[r];break;case"NNNN":if(s===e)return l[r];break;case"NNNNN":if(a===e)return l[r]}else if([s,o,a].indexOf(e)>=0)return l[r]}function Pi(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Ai(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Ri(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Oi(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-r(s[e].since).year())*n+s[e].offset;return this.year()}function Mi(e){return a(this,"_erasNameRegex")||zi.call(this),e?this._erasNameRegex:this._erasRegex}function Li(e){return a(this,"_erasAbbrRegex")||zi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Fi(e){return a(this,"_erasNarrowRegex")||zi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ui(e,t){return t.erasAbbrRegex(e)}function ji(e,t){return t.erasNameRegex(e)}function Vi(e,t){return t.erasNarrowRegex(e)}function Bi(e,t){return t._eraYearOrdinalRegex||xe}function zi(){var e,t,n=[],r=[],i=[],s=[],o=this.eras();for(e=0,t=o.length;e<t;++e)r.push(Fe(o[e].name)),n.push(Fe(o[e].abbr)),i.push(Fe(o[e].narrow)),s.push(Fe(o[e].name)),s.push(Fe(o[e].abbr)),s.push(Fe(o[e].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function qi(e,t){V(0,[e,e.length],0,t)}function Wi(e){return $i.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Hi(e){return $i.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ki(){return kt(this.year(),1,4)}function Yi(){return kt(this.isoWeekYear(),1,4)}function Gi(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function Qi(){var e=this.localeData()._week;return kt(this.weekYear(),e.dow,e.doy)}function $i(e,t,n,r,i){var s;return null==e?St(this,r,i).year:(t>(s=kt(e,r,i))&&(t=s),Ji.call(this,e,t,n,r,i))}function Ji(e,t,n,r,i){var s=bt(e,t,n,r,i),o=_t(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Xi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),Oe("N",Ui),Oe("NN",Ui),Oe("NNN",Ui),Oe("NNNN",ji),Oe("NNNNN",Vi),je(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?g(n).era=i:g(n).invalidEra=e})),Oe("y",xe),Oe("yy",xe),Oe("yyy",xe),Oe("yyyy",xe),Oe("yo",Bi),je(["y","yy","yyy","yyyy"],qe),je(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[qe]=n._locale.eraYearOrdinalParse(e,i):t[qe]=parseInt(e,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),qi("gggg","weekYear"),qi("ggggg","weekYear"),qi("GGGG","isoWeekYear"),qi("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),oe("weekYear",1),oe("isoWeekYear",1),Oe("G",Ne),Oe("g",Ne),Oe("GG",Se,ve),Oe("gg",Se,ve),Oe("GGGG",Te,we),Oe("gggg",Te,we),Oe("GGGGG",Ce,be),Oe("ggggg",Ce,be),Ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=ue(e)})),Ve(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),ne("quarter","Q"),oe("quarter",7),Oe("Q",ye),je("Q",(function(e,t){t[We]=3*(ue(e)-1)})),V("D",["DD",2],"Do","date"),ne("date","D"),oe("date",9),Oe("D",Se),Oe("DD",Se,ve),Oe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),je(["D","DD"],He),je("Do",(function(e,t){t[He]=ue(e.match(Se)[0])}));var Zi=he("Date",!0);function es(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),oe("dayOfYear",4),Oe("DDD",Ie),Oe("DDDD",_e),je(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=ue(e)})),V("m",["mm",2],0,"minute"),ne("minute","m"),oe("minute",14),Oe("m",Se),Oe("mm",Se,ve),je(["m","mm"],Ye);var ts=he("Minutes",!1);V("s",["ss",2],0,"second"),ne("second","s"),oe("second",15),Oe("s",Se),Oe("ss",Se,ve),je(["s","ss"],Ge);var ns,rs,is=he("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),oe("millisecond",16),Oe("S",Ie,ye),Oe("SS",Ie,ve),Oe("SSS",Ie,_e),ns="SSSS";ns.length<=9;ns+="S")Oe(ns,xe);function ss(e,t){t[Qe]=ue(1e3*("0."+e))}for(ns="S";ns.length<=9;ns+="S")je(ns,ss);function os(){return this._isUTC?"UTC":""}function as(){return this._isUTC?"Coordinated Universal Time":""}rs=he("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var ls=S.prototype;function cs(e){return Qn(1e3*e)}function us(){return Qn.apply(null,arguments).parseZone()}function hs(e){return e}ls.add=Or,ls.calendar=zr,ls.clone=qr,ls.diff=$r,ls.endOf=yi,ls.format=ti,ls.from=ni,ls.fromNow=ri,ls.to=ii,ls.toNow=si,ls.get=pe,ls.invalidAt=Ti,ls.isAfter=Wr,ls.isBefore=Hr,ls.isBetween=Kr,ls.isSame=Yr,ls.isSameOrAfter=Gr,ls.isSameOrBefore=Qr,ls.isValid=Ei,ls.lang=ai,ls.locale=oi,ls.localeData=li,ls.max=Jn,ls.min=$n,ls.parsingFlags=Ii,ls.set=me,ls.startOf=gi,ls.subtract=Mr,ls.toArray=bi,ls.toObject=Si,ls.toDate=wi,ls.toISOString=Zr,ls.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ls[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ls.toJSON=ki,ls.toString=Xr,ls.unix=_i,ls.valueOf=vi,ls.creationData=Ci,ls.eraName=Ai,ls.eraNarrow=Ri,ls.eraAbbr=Di,ls.eraYear=Oi,ls.year=gt,ls.isLeapYear=yt,ls.weekYear=Wi,ls.isoWeekYear=Hi,ls.quarter=ls.quarters=Xi,ls.month=ut,ls.daysInMonth=ht,ls.week=ls.weeks=xt,ls.isoWeek=ls.isoWeeks=Nt,ls.weeksInYear=Gi,ls.weeksInWeekYear=Qi,ls.isoWeeksInYear=Ki,ls.isoWeeksInISOWeekYear=Yi,ls.date=Zi,ls.day=ls.days=Wt,ls.weekday=Ht,ls.isoWeekday=Kt,ls.dayOfYear=es,ls.hour=ls.hours=rn,ls.minute=ls.minutes=ts,ls.second=ls.seconds=is,ls.millisecond=ls.milliseconds=rs,ls.utcOffset=mr,ls.utc=yr,ls.local=vr,ls.parseZone=_r,ls.hasAlignedHourOffset=wr,ls.isDST=br,ls.isLocal=kr,ls.isUtcOffset=Er,ls.isUtc=Ir,ls.isUTC=Ir,ls.zoneAbbr=os,ls.zoneName=as,ls.dates=I("dates accessor is deprecated. Use date instead.",Zi),ls.months=I("months accessor is deprecated. Use month instead",ut),ls.years=I("years accessor is deprecated. Use year instead",gt),ls.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),ls.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Sr);var ds=R.prototype;function fs(e,t,n,r){var i=vn(),s=p().set(r,t);return i[n](s,e)}function ps(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return fs(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fs(e,r,n,"month");return i}function ms(e,t,n,r){"boolean"===typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,s=vn(),o=e?s._week.dow:0,a=[];if(null!=n)return fs(t,(n+o)%7,r,"day");for(i=0;i<7;i++)a[i]=fs(t,(i+o)%7,r,"day");return a}function gs(e,t){return ps(e,t,"months")}function ys(e,t){return ps(e,t,"monthsShort")}function vs(e,t,n){return ms(e,t,n,"weekdays")}function _s(e,t,n){return ms(e,t,n,"weekdaysShort")}function ws(e,t,n){return ms(e,t,n,"weekdaysMin")}ds.calendar=O,ds.longDateFormat=K,ds.invalidDate=G,ds.ordinal=J,ds.preparse=hs,ds.postformat=hs,ds.relativeTime=Z,ds.pastFuture=ee,ds.set=P,ds.eras=xi,ds.erasParse=Ni,ds.erasConvertYear=Pi,ds.erasAbbrRegex=Li,ds.erasNameRegex=Mi,ds.erasNarrowRegex=Fi,ds.months=st,ds.monthsShort=ot,ds.monthsParse=lt,ds.monthsRegex=ft,ds.monthsShortRegex=dt,ds.week=Et,ds.firstDayOfYear=Ct,ds.firstDayOfWeek=Tt,ds.weekdays=jt,ds.weekdaysMin=Bt,ds.weekdaysShort=Vt,ds.weekdaysParse=qt,ds.weekdaysRegex=Yt,ds.weekdaysShortRegex=Gt,ds.weekdaysMinRegex=Qt,ds.isPM=tn,ds.meridiem=sn,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ue(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=I("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=I("moment.langData is deprecated. Use moment.localeData instead.",vn);var bs=Math.abs;function Ss(){var e=this._data;return this._milliseconds=bs(this._milliseconds),this._days=bs(this._days),this._months=bs(this._months),e.milliseconds=bs(e.milliseconds),e.seconds=bs(e.seconds),e.minutes=bs(e.minutes),e.hours=bs(e.hours),e.months=bs(e.months),e.years=bs(e.years),this}function ks(e,t,n,r){var i=xr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Es(e,t){return ks(this,e,t,1)}function Is(e,t){return ks(this,e,t,-1)}function Ts(e){return e<0?Math.floor(e):Math.ceil(e)}function Cs(){var e,t,n,r,i,s=this._milliseconds,o=this._days,a=this._months,l=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*Ts(Ns(a)+o),o=0,a=0),l.milliseconds=s%1e3,e=ce(s/1e3),l.seconds=e%60,t=ce(e/60),l.minutes=t%60,n=ce(t/60),l.hours=n%24,o+=ce(n/24),a+=i=ce(xs(o)),o-=Ts(Ns(i)),r=ce(a/12),a%=12,l.days=o,l.months=a,l.years=r,this}function xs(e){return 4800*e/146097}function Ns(e){return 146097*e/4800}function Ps(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+xs(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ns(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function As(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ue(this._months/12):NaN}function Rs(e){return function(){return this.as(e)}}var Ds=Rs("ms"),Os=Rs("s"),Ms=Rs("m"),Ls=Rs("h"),Fs=Rs("d"),Us=Rs("w"),js=Rs("M"),Vs=Rs("Q"),Bs=Rs("y");function zs(){return xr(this)}function qs(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Ws(e){return function(){return this.isValid()?this._data[e]:NaN}}var Hs=Ws("milliseconds"),Ks=Ws("seconds"),Ys=Ws("minutes"),Gs=Ws("hours"),Qs=Ws("days"),$s=Ws("months"),Js=Ws("years");function Xs(){return ce(this.days()/7)}var Zs=Math.round,eo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function no(e,t,n,r){var i=xr(e).abs(),s=Zs(i.as("s")),o=Zs(i.as("m")),a=Zs(i.as("h")),l=Zs(i.as("d")),c=Zs(i.as("M")),u=Zs(i.as("w")),h=Zs(i.as("y")),d=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||u<=1&&["w"]||u<n.w&&["ww",u]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=r,to.apply(null,d)}function ro(e){return void 0===e?Zs:"function"===typeof e&&(Zs=e,!0)}function io(e,t){return void 0!==eo[e]&&(void 0===t?eo[e]:(eo[e]=t,"s"===e&&(eo.ss=t-1),!0))}function so(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,s=eo;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(s=Object.assign({},eo,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),r=no(this,!i,s,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var oo=Math.abs;function ao(e){return(e>0)-(e<0)||+e}function lo(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,s,o,a,l=oo(this._milliseconds)/1e3,c=oo(this._days),u=oo(this._months),h=this.asSeconds();return h?(e=ce(l/60),t=ce(e/60),l%=60,e%=60,n=ce(u/12),u%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",s=ao(this._months)!==ao(h)?"-":"",o=ao(this._days)!==ao(h)?"-":"",a=ao(this._milliseconds)!==ao(h)?"-":"",i+"P"+(n?s+n+"Y":"")+(u?s+u+"M":"")+(c?o+c+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+r+"S":"")):"P0D"}var co=or.prototype;return co.isValid=ir,co.abs=Ss,co.add=Es,co.subtract=Is,co.as=Ps,co.asMilliseconds=Ds,co.asSeconds=Os,co.asMinutes=Ms,co.asHours=Ls,co.asDays=Fs,co.asWeeks=Us,co.asMonths=js,co.asQuarters=Vs,co.asYears=Bs,co.valueOf=As,co._bubble=Cs,co.clone=zs,co.get=qs,co.milliseconds=Hs,co.seconds=Ks,co.minutes=Ys,co.hours=Gs,co.days=Qs,co.weeks=Xs,co.months=$s,co.years=Js,co.humanize=so,co.toISOString=lo,co.toString=lo,co.toJSON=lo,co.locale=oi,co.localeData=li,co.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lo),co.lang=ai,V("X",0,0,"unix"),V("x",0,0,"valueOf"),Oe("x",Ne),Oe("X",Re),je("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),je("x",(function(e,t,n){n._d=new Date(ue(e))})),r.version="2.29.4",i(Qn),r.fn=ls,r.min=Zn,r.max=er,r.now=tr,r.utc=p,r.unix=cs,r.months=gs,r.isDate=h,r.locale=mn,r.invalid=v,r.duration=xr,r.isMoment=k,r.weekdays=vs,r.parseZone=us,r.localeData=vn,r.isDuration=ar,r.monthsShort=ys,r.weekdaysMin=ws,r.defineLocale=gn,r.updateLocale=yn,r.locales=_n,r.weekdaysShort=_s,r.normalizeUnits=re,r.relativeTimeRounding=ro,r.relativeTimeThreshold=io,r.calendarFormat=Br,r.prototype=ls,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ee=null;function Ie(e){if(e=_i(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Se(e.stateNode,e.type,t))}}function Te(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return xe(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ee)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Me(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Le=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Me.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,St,kt,Et,It,Tt=!1,Ct=[],xt=null,Nt=null,Pt=null,At=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),At.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Bt(xt,e),null!==Nt&&Bt(Nt,e),null!==Pt&&Bt(Pt,e),At.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Yt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Kt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Yt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Yt(e,t,n,r){if(Wt){var i=Qt(e,t,n,r);if(null===i)Wr(e,t,r,Gt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Lt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Qt(e,t,n,r))&&Wr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function In(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(An),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!On||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Gn(e){Ur(e,0)}function Qn(e){if(Y(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Yn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Yn)){var t=[];Hn(t,Yn,e,be(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Yn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Er={};function Ir(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Ir("animationend"),Cr=Ir("animationiteration"),xr=Ir("animationstart"),Nr=Ir("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Or=Ar[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=be(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Cr:case xr:l=yn;break;case Nr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=d;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)d=Yr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Yr(u),d=Yr(d)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Wn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=Bn(n))&&(_.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Si=[],ki=-1;function Ei(e){return{current:e}}function Ii(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Ti(e,t){ki++,Si[ki]=e.current,e.current=t}var Ci={},xi=Ei(Ci),Ni=Ei(!1),Pi=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(Ni),Ii(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));Ti(xi,t),Ti(Ni,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=xi.current,Ti(xi,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(xi),Ti(xi,e)):Ii(Ni),Ti(Ni,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ye(Ze,zi),i}finally{_t=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Yi=[],Gi=0,Qi=null,$i=1,Ji="";function Xi(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Yi[Gi++]=$i,Yi[Gi++]=Ji,Yi[Gi++]=Qi,Qi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Qi;)Qi=Yi[--Gi],Yi[Gi]=null,Ji=Yi[--Gi],Yi[Gi]=null,$i=Yi[--Gi],Yi[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ei(null),vs=null,_s=null,ws=null;function bs(){ws=_s=vs=null}function Ss(e){var t=ys.current;Ii(ys),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){vs=e,ws=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===vs)throw Error(s(308));_s=e,vs.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Ts=null;function Cs(e){null===Ts?Ts=[e]:Ts.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ms(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ms(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ms(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Ri(t)?Pi:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,As(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Ri(t)?Pi:xi.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gs(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Gs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case S:return(t=jc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Gs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);Ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Qs(!0),Js=Qs(!1),Xs={},Zs=Ei(Xs),eo=Ei(Xs),to=Ei(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Zs),Ti(Zs,t)}function io(){Ii(Zs),Ii(eo),Ii(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti(Zs,n))}function oo(e){eo.current===e&&(Ii(Zs),Ii(eo))}var ao=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,_o=!1,wo=0,bo=0;function So(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_o){o=0;do{if(_o=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(_o)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function Io(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Wo(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Mo(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function Bo(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Yo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Yo.bind(null,t,e),n)}function Qo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){_o=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Is,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Is,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Qo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Pl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Is,useCallback:$o,useContext:Is,useEffect:Wo,useImperativeHandle:Go,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Is,useCallback:$o,useContext:Is,useEffect:Wo,useImperativeHandle:Go,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Po,useRef:Vo,useState:function(){return Po(xo)},useDebugValue:Qo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Po(xo)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=w.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=Io(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ca(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Dl),Dl|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Ri(n)?Pi:xi.current;return s=Ai(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=Io(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var s=!0;Li(t)}else s=!1;if(Es(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Ai(t,c=Ri(n)?Pi:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),Ps=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ps?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=Ps||zs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Ai(t,l=Ri(n)?Pi:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),Ps=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ps?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=Ps||zs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ha(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Da,Oa,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Yi[Gi++]=$i,Yi[Gi++]=Ji,Yi[Gi++]=Qi,$i=e.id,Ji=e.overflow,Qi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ya(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ya(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ya(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ya(t),null;case 13:if(Ii(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ml&&(Ml=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return io(),Da(e,t),null===e&&zr(t.stateNode.containerInfo),Ya(t),null;case 10:return Ss(t.type._context),Ya(t),null;case 19:if(Ii(ao),null===(o=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ya(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ic(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ic(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ic(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Ic(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ic(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ic(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Ic(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,Za=l):kl(i);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=i,$a=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Ic(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ic(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ic(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Ic(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Ic(t,o,l)}}}catch(l){Ic(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,Il=Math.ceil,Tl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,xl=w.ReactCurrentBatchConfig,Nl=0,Pl=null,Al=null,Rl=0,Dl=0,Ol=Ei(0),Ml=0,Ll=null,Fl=0,Ul=0,jl=0,Vl=null,Bl=null,zl=0,ql=1/0,Wl=null,Hl=!1,Kl=null,Yl=null,Gl=!1,Ql=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(Ul|=n),4===Ml&&lc(e,Rl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=Je()+500,ji&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Pl?Rl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var o=mc();for(Pl===e&&Rl===t||(Wl=null,ql=Je()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}bs(),Tl.current=o,Nl=i,null!==Al?t=0:(Pl=null,Rl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Bl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Bl,Wl),t);break}Sc(e,Bl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Bl,Wl),r);break}Sc(e,Bl,Wl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));kc();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Bl,Wl),ic(e,Je()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=Je()+500,ji&&zi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Nl)&&kc();var t=Nl;Nl|=1;var n=xl.transition,r=_t;try{if(xl.transition=null,_t=1,e)return e()}finally{_t=r,xl.transition=n,0===(6&(Nl=t))&&zi()}}function dc(){Dl=Ol.current,Ii(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ii(Ni),Ii(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Al=e=Oc(e.current,null),Rl=Dl=t,Ml=0,Ll=null,jl=Ul=Fl=0,Bl=Vl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function pc(e,t){for(;;){var n=Al;try{if(bs(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,_o=!1,wo=0,Cl.current=null,null===n||null===n.return){Ml=1,Ll=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ml&&(Ml=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Yl||!Yl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=oa,null===e?oa:e}function gc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Pl,Rl)}function yc(e,t){var n=Nl;Nl|=2;var r=mc();for(Pl===e&&Rl===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(bs(),Nl=n,Tl.current=r,null!==Al)throw Error(s(261));return Pl=null,Rl=0,Ml}function vc(){for(;null!==Al;)wc(Al)}function _c(){for(;null!==Al&&!Qe();)wc(Al)}function wc(e){var t=El(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Dl)))return void(Al=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ml=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ml&&(Ml=5)}function Sc(e,t,n){var r=_t,i=xl.transition;try{xl.transition=null,_t=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Al=Pl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Pc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=_t;_t=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),$e(),Nl=l,_t=a,xl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,$l=i),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,zi()}(e,t,n,r)}finally{xl.transition=i,_t=r}return null}function kc(){if(null!==Ql){var e=wt($l),t=xl.transition,n=_t;try{if(xl.transition=null,_t=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var _=e.current;for(Za=_;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=_;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ic(l,l.return,S)}if(l===a){Za=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Za=b;break e}Za=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{_t=n,xl.transition=t}}return!1}function Ec(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Rl&n)===n&&(4===Ml||3===Ml&&(130023424&Rl)===Rl&&500>Je()-zl?fc(e,0):jl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(yt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Pc(e,t){return Ye(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Lc(n.children,i,o,t);case E:a=8,i|=8;break;case I:return(e=Rc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case x:a=11;break e;case A:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Ds(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ms(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ti(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Ai(t,xi.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,As(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===A)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Is(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),ka(e,t,r,i=gs(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Es(t,n),qs(t,r,i),Hs(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&Nl)&&(ql=Je()+500,zi()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Yc(e,1)}},St=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Yc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Yc(e,t)}},Et=function(){return _t},It=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));Y(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[_i,wi,bi,Te,Ce,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,m(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,I=null,T=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function P(){if(null!==I){var e=t.unstable_now();x=e;var n=!0;try{n=I(!0,e)}finally{n?k():(E=!1,I=null)}}else E=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=P,k=function(){R.postMessage(null)}}else k=function(){y(P,0)};function D(e){I=e,E||(E=!0,k())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,O(b,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},839:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))n.call(s,c)&&(a[c]=s[c]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},415:(e,t,n)=>{"use strict";var r=n(436);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},642:(e,t,n)=>{e.exports=n(415)()},436:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},888:(e,t,n)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=l(n(642)),o=l(n(653)),a=n(84);function l(e){return e&&e.__esModule?e:{default:e}}var c={thousandSeparator:s.default.oneOfType([s.default.string,s.default.oneOf([!0])]),thousandSpacing:s.default.oneOf(["2","2s","3","4"]),decimalSeparator:s.default.string,decimalScale:s.default.number,fixedDecimalScale:s.default.bool,displayType:s.default.oneOf(["input","text"]),prefix:s.default.string,suffix:s.default.string,format:s.default.oneOfType([s.default.string,s.default.func]),removeFormatting:s.default.func,mask:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)]),value:s.default.oneOfType([s.default.number,s.default.string]),isNumericString:s.default.bool,customInput:s.default.func,allowNegative:s.default.bool,onValueChange:s.default.func,onKeyDown:s.default.func,onMouseUp:s.default.func,onChange:s.default.func,onFocus:s.default.func,onBlur:s.default.func,type:s.default.oneOf(["text","tel"]),isAllowed:s.default.func,renderText:s.default.func},u={displayType:"input",decimalSeparator:".",thousandSpacing:"3",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,isNumericString:!1,type:"text",onValueChange:a.noop,onChange:a.noop,onKeyDown:a.noop,onMouseUp:a.noop,onFocus:a.noop,onBlur:a.noop,isAllowed:a.returnTrue},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.validateProps();var r=n.formatValueProp();return n.state={value:r,numAsString:n.removeFormatting(r)},n.onChange=n.onChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,n=this.state;if(e!==t){this.validateProps();var r=n.value,i=n.numAsString||"",s=void 0===t.value?this.formatNumString(i):this.formatValueProp();s!==r&&this.setState({value:s,numAsString:this.removeFormatting(s)})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getSeparators().decimalSeparator,n=this.getNumberRegex(!0),r="-"===e[0];r&&(e=e.replace("-",""));var i=(e=(e.match(n)||[]).join("").replace(t,".")).indexOf(".");return-1!==i&&(e=e.substring(0,i)+"."+e.substring(i+1,e.length).replace(new RegExp((0,a.escapeRegExp)(t),"g"),"")),r&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var n=this.props,r=n.format,i=n.decimalScale,s=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!s||0===i||t||r?"":"|"+(0,a.escapeRegExp)(s)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props,t=e.decimalSeparator,n=e.thousandSpacing,r=this.props.thousandSeparator;return!0===r&&(r=","),{decimalSeparator:t,thousandSeparator:r,thousandSpacing:n}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,n=void 0===t?" ":t;return"string"===typeof n?n:n[e]||" "}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),n=t.decimalSeparator,r=t.thousandSeparator;if(n===r)throw new Error("\n          Decimal separator can't be same as thousand separator.\n\n          thousandSeparator: "+r+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: '+n+" (default value for decimalSeparator is .)\n       ");if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask "+e+" should not contain numeric character;\n        ")}},{key:"splitDecimal",value:function(e){var t=this.props.allowNegative,n="-"===e[0],r=n&&t,i=(e=e.replace("-","")).split(".");return{beforeDecimal:i[0],afterDecimal:i[1]||"",hasNagation:n,addNegation:r}}},{key:"setPatchedCaretPosition",value:function(e,t,n){(0,a.setCaretPosition)(e,t),setTimeout((function(){e.value===n&&(0,a.setCaretPosition)(e,t)}),0)}},{key:"correctCaretPosition",value:function(e,t,n){var r=this.props,i=r.prefix,s=r.suffix,o=r.format;if(!o){var l="-"===e[0];return Math.min(Math.max(t,i.length+(l?1:0)),e.length-s.length)}if("function"===typeof o)return t;if("#"===o[t]&&(0,a.charIsNumber)(e[t]))return t;if("#"===o[t-1]&&(0,a.charIsNumber)(e[t-1]))return t;var c=o.indexOf("#"),u=o.lastIndexOf("#");t=Math.min(Math.max(t,c),u+1);for(var h=o.substring(t,o.length).indexOf("#"),d=t,f=t+(-1===h?0:h);d>c&&("#"!==o[d]||!(0,a.charIsNumber)(e[d]));)d-=1;return!(0,a.charIsNumber)(e[f])||"left"===n&&t!==c||t-d<f-t?d+1:f}},{key:"getCaretPosition",value:function(e,t,n){var r=this.props.format,i=this.state.value,s=this.getNumberRegex(!0),o=(e.match(s)||[]).join(""),a=(t.match(s)||[]).join(""),l=void 0,c=void 0;for(l=0,c=0;c<n;c++){var u=e[c]||"",h=t[l]||"";if((u.match(s)||u===h)&&("0"!==u||!h.match(s)||"0"===h||o.length===a.length)){for(;u!==t[l]&&l<t.length;)l++;l++}}return"string"!==typeof r||i||(l=t.length),l=this.correctCaretPosition(t,l)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,n=t.format,r=t.prefix,i=t.suffix;if(!n&&e){var s="-"===e[0];s&&(e=e.substring(1,e.length));var o=(e=r&&0===e.indexOf(r)?e.substring(r.length,e.length):e).lastIndexOf(i);e=i&&-1!==o&&o===e.length-i.length?e.substring(0,o):e,s&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter((function(e){return""!==e})),n=0,r="",i=0,s=t.length;i<=s;i++){var o=t[i]||"",a=i===s?e.length:e.indexOf(o,n);if(-1===a){r=e;break}r+=e.substring(n,a),n=a+o.length}return(r.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,n=t.format,r=t.removeFormatting;return e?(n?e="string"===typeof n?this.removePatternFormatting(e):"function"===typeof r?r(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,n=0,r=t.split(""),i=0,s=t.length;i<s;i++)"#"===t[i]&&(r[i]=e[n]||this.getMaskAtIndex(n),n+=1);return r.join("")}},{key:"formatThousand",value:function(e,t,n){var r=void 0;switch(n){case a.thousandGroupSpacing.two:r=/(\d)(?=(\d{2})+(?!\d))/g;break;case a.thousandGroupSpacing.twoScaled:r=/(\d)(?=(((\d{2})+)(\d{1})(?!\d)))/g;break;case a.thousandGroupSpacing.four:r=/(\d)(?=(\d{4})+(?!\d))/g;break;default:r=/(\d)(?=(\d{3})+(?!\d))/g}return e.replace(r,"$1"+t)}},{key:"formatAsNumber",value:function(e){var t=this.props,n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix,s=t.suffix,o=this.getSeparators(),l=o.thousandSeparator,c=o.decimalSeparator,u=o.thousandSpacing,h=-1!==e.indexOf(".")||n&&r,d=this.splitDecimal(e),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return void 0!==n&&(p=(0,a.limitToScale)(p,n,r)),l&&(f=this.formatThousand(f,l,u)),i&&(f=i+f),s&&(p+=s),m&&(f="-"+f),e=f+(h&&c||"")+p}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.format,n=e;return""===e?n="":"-"!==e||t?n="string"===typeof t?this.formatWithPattern(n):"function"===typeof t?t(n):this.formatAsNumber(n):(n="-",e=""),n}},{key:"formatValueProp",value:function(){var e=this.props,t=e.format,n=e.decimalScale,r=e.fixedDecimalScale,i=this.props,s=i.value,o=i.isNumericString;return void 0===s?"":("number"===typeof s&&(s=s.toString(),o=!0),o&&!t&&"number"===typeof n&&(s=(0,a.roundToPrecision)(s,n,r)),o?this.formatNumString(s):this.formatInput(s))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var n=this.props,r=n.format,i=n.prefix,s=n.suffix,o=n.decimalScale,a=n.fixedDecimalScale,l=this.getSeparators().decimalSeparator;return"string"===typeof r&&"#"!==r[e]||!(r||!(e<i.length||e>=t.length-s.length||o&&a&&t[e]===l))}},{key:"checkIfFormatGotDeleted",value:function(e,t,n){for(var r=e;r<t;r++)if(this.isCharacterAFormat(r,n))return!0;return!1}},{key:"correctInputValue",value:function(e,t,n){var r=this.props.format,i=this.state.numAsString||"";if(n.length>=t.length||!n.length)return n;var s=e,o=(0,a.splitString)(t,e),l=(0,a.splitString)(n,e),c=o[1].lastIndexOf(l[1]),u=s+(-1!==c?o[1].substring(0,c):"").length;if(this.checkIfFormatGotDeleted(s,u,t)&&(n=t),!r){var h=this.removeFormatting(n),d=this.splitDecimal(h),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;if(h.length<i.length&&""===f&&!parseFloat(p))return m?"-":""}return n}},{key:"onChange",value:function(e){e.persist();var t=e.target,n=t.value,r=this.state,i=this.props,s=i.isAllowed,o=r.value||"",a=Math.max(t.selectionStart,t.selectionEnd);n=this.correctInputValue(a,o,n);var l=this.formatInput(n)||"",c=this.removeFormatting(l),u={formattedValue:l,value:c,floatValue:parseFloat(c)};s(u)||(l=o),t.value=l;var h=this.getCaretPosition(n,l,a);this.setPatchedCaretPosition(t,h,l),l!==o?this.setState({value:l,numAsString:c},(function(){i.onValueChange(u),i.onChange(e)})):i.onChange(e)}},{key:"onBlur",value:function(e){var t=this.props,n=this.state,r=t.format,i=t.onBlur,s=n.numAsString,o=n.value;if(!r){s=(0,a.fixLeadingZero)(s);var l=this.formatNumString(s),c={formattedValue:l,value:s,floatValue:parseFloat(s)};if(l!==o)return e.persist(),void this.setState({value:l,numAsString:s},(function(){t.onValueChange(c),i(e)}))}i(e)}},{key:"onKeyDown",value:function(e){var t=e.target,n=e.key,r=t.selectionEnd,i=t.value,s=t.selectionStart,o=void 0,a=this.props,l=a.decimalScale,c=a.fixedDecimalScale,u=a.prefix,h=a.suffix,d=a.format,f=a.onKeyDown,p=void 0!==l&&c,m=this.getNumberRegex(!1,p),g=new RegExp("-"),y="string"===typeof d;if("ArrowLeft"===n||"Backspace"===n?o=s-1:"ArrowRight"===n?o=s+1:"Delete"===n&&(o=s),void 0!==o&&s===r){var v=o,_=y?d.indexOf("#"):u.length,w=y?d.lastIndexOf("#")+1:i.length-h.length;if("ArrowLeft"===n||"ArrowRight"===n){var b="ArrowLeft"===n?"left":"right";v=this.correctCaretPosition(i,o,b)}else if("Delete"!==n||m.test(i[o])||g.test(i[o])){if("Backspace"===n&&!m.test(i[o])&&!g.test(i[o])){for(;!m.test(i[v-1])&&v>_;)v--;v=this.correctCaretPosition(i,v,"left")}}else for(;!m.test(i[v])&&v<w;)v++;(v!==o||o<_||o>w)&&(e.preventDefault(),this.setPatchedCaretPosition(t,v,i)),e.isUnitTestRun&&this.setPatchedCaretPosition(t,v,i),this.props.onKeyDown(e)}else f(e)}},{key:"onMouseUp",value:function(e){var t=e.target,n=t.selectionStart,r=t.selectionEnd,i=t.value;if(n===r){var s=this.correctCaretPosition(i,n);s!==n&&this.setPatchedCaretPosition(t,s,i)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),setTimeout((function(){var n=e.target,r=n.selectionStart,i=n.value,s=t.correctCaretPosition(i,r);s!==r&&t.setPatchedCaretPosition(n,s,i),t.props.onFocus(e)}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.displayType,i=e.customInput,s=e.renderText,l=this.state.value,u=(0,a.omit)(this.props,c),h=r({},u,{type:t,value:l,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===n)return s?s(l)||null:o.default.createElement("span",u,l);if(i){var d=i;return o.default.createElement(d,h)}return o.default.createElement("input",h)}}]),t}(o.default.Component);h.propTypes=c,h.defaultProps=u,e.exports=h},84:(e,t)=>{"use strict";function n(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){},t.returnTrue=function(){return!0},t.charIsNumber=function(e){return!!(e||"").match(/\d/)},t.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.fixLeadingZero=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")},t.splitString=function(e,t){return[e.substring(0,t),e.substring(t)]},t.limitToScale=n,t.roundToPrecision=function(e,t,r){var i=e.split("."),s=parseFloat("0."+(i[1]||"0")).toFixed(t).split("."),o=i[0].split("").reverse().reduce((function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e}),s[0]),a=n(s[1]||"",(i[1]||"").length,r);return o+(a?"."+a:"")},t.omit=function(e,t){var n={};return Object.keys(e).forEach((function(r){t[r]||(n[r]=e[r])})),n},t.setCaretPosition=function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}};t.thousandGroupSpacing={two:"2",twoScaled:"2s",three:"3",four:"4"}},483:(e,t,n)=>{"use strict";var r=n(839),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=v.prototype=new y;_.constructor=v,r(_,g.prototype),_.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:w.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+T(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+T(a=e[c],c);l+=C(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=C(a=a.value,t,n,u=r+T(a,c++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function x(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function A(){var e=P.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)b.call(t,u)&&!S.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},653:(e,t,n)=>{"use strict";e.exports=n(483)},836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".ae3bcd1c.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="amazon-clone:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkamazon_clone=self.webpackChunkamazon_clone||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>ut,SDK_VERSION:()=>An,_DEFAULT_ENTRY_NAME:()=>_n,_addComponent:()=>kn,_addOrOverwriteComponent:()=>En,_apps:()=>bn,_clearComponents:()=>xn,_components:()=>Sn,_getProvider:()=>Tn,_registerComponent:()=>In,_removeServiceInstance:()=>Cn,deleteApp:()=>Mn,getApp:()=>Dn,getApps:()=>On,initializeApp:()=>Rn,onLog:()=>Fn,registerVersion:()=>Ln,setLogLevel:()=>Un});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>fO,hasStandardBrowserEnv:()=>pO,hasStandardBrowserWebWorkerEnv:()=>gO});var r=n(791),i=n.t(r,2),s=n(250),o=n(888),a=n.n(o),l=n(184);const c=(0,r.createContext)(),u=e=>{let{reducer:t,initialState:n,children:i}=e;return(0,l.jsx)(c.Provider,{value:(0,r.useReducer)(t,n),children:i})},h=()=>(0,r.useContext)(c),d=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>t.price+e),0),f=(e,t)=>{switch(t.type){case"ADD_TO_BASKET":return{...e,basket:[...e.basket,t.item]};case"REMOVE_FROM_BASKET":const n=e.basket.findIndex((e=>e.id===t.id));let r=[...e.basket];return n>=0?r.splice(n,1):console.warn("Can't remove product (id: ".concat(t.id,") as it is not in basket")),{...e,basket:r};case"SET_USER":return{...e,user:t.user};default:return e}};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var m;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(m||(m={}));const g="popstate";function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function v(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t,n,r){return void 0===n&&(n=null),p({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function b(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function k(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=m.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a=m.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:b(e);return y(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(p({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(g,h),l=e,()=>{i.removeEventListener(g,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=m.Push;let r=w(f.location,e,t);n&&n(r,e),c=u()+1;let h=_(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(mu){if(mu instanceof DOMException&&"DataCloneError"===mu.name)throw mu;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=m.Replace;let r=w(f.location,e,t);n&&n(r,e),c=u();let i=_(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var E;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(E||(E={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function I(e,t,n){void 0===n&&(n="/");let r=j(("string"===typeof t?S(t):t).pathname||"/",n);if(null==r)return null;let i=T(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=L(i[o],U(r));return s}function T(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(y(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=q([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),T(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:M(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of C(e.path))i(e,t,r);else i(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=C(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:\w+$/,N=3,P=2,A=1,R=10,D=-2,O=e=>"*"===e;function M(e,t){let n=e.split("/"),r=n.length;return n.some(O)&&(r+=D),t&&(r+=P),n.filter((e=>!O(e))).reduce(((e,t)=>e+(x.test(t)?N:""===t?A:R)),r)}function L(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:q([i,c.pathname]),pathnameBase:W(q([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=q([i,c.pathnameBase]))}return s}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);v("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(mu){return v(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+mu+")."),e}}(l||"",r),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function U(e){try{return decodeURI(e)}catch(mu){return v(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+mu+")."),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function V(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function B(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function z(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=S(e):(i=p({},e),y(!i.pathname||!i.pathname.includes("?"),V("?","pathname","search",i)),y(!i.pathname||!i.pathname.includes("#"),V("#","pathname","hash",i)),y(!i.search||!i.search.includes("#"),V("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(r||null==a)s=n;else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?S(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:H(r),hash:K(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const q=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const G=["post","put","patch","delete"],Q=(new Set(G),["get",...G]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}const J=r.createContext(null);const X=r.createContext(null);const Z=r.createContext(null);const ee=r.createContext(null);const te=r.createContext({outlet:null,matches:[],isDataRoute:!1});const ne=r.createContext(null);function re(){return null!=r.useContext(ee)}function ie(){return re()||y(!1),r.useContext(ee).location}function se(e){r.useContext(Z).static||r.useLayoutEffect(e)}function oe(){let{isDataRoute:e}=r.useContext(te);return e?function(){let{router:e}=ge(pe.UseNavigateStable),t=ve(me.UseNavigateStable),n=r.useRef(!1);se((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,$({fromRouteId:t},i)))}),[e,t]);return i}():function(){re()||y(!1);let e=r.useContext(J),{basename:t,navigator:n}=r.useContext(Z),{matches:i}=r.useContext(te),{pathname:s}=ie(),o=JSON.stringify(B(i).map((e=>e.pathnameBase))),a=r.useRef(!1);return se((()=>{a.current=!0})),r.useCallback((function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let l=z(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:q([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,o,s,e])}()}function ae(e,t){let{relative:n}=void 0===t?{}:t,{matches:i}=r.useContext(te),{pathname:s}=ie(),o=JSON.stringify(B(i).map((e=>e.pathnameBase)));return r.useMemo((()=>z(e,JSON.parse(o),s,"path"===n)),[e,o,s,n])}function le(e,t,n){re()||y(!1);let{navigator:i}=r.useContext(Z),{matches:s}=r.useContext(te),o=s[s.length-1],a=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let c,u=ie();if(t){var h;let e="string"===typeof t?S(t):t;"/"===l||(null==(h=e.pathname)?void 0:h.startsWith(l))||y(!1),c=e}else c=u;let d=c.pathname||"/",f=I(e,{pathname:"/"===l?d:d.slice(l.length)||"/"});let p=fe(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:q([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:q([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n);return t&&p?r.createElement(ee.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:m.Pop}},p):p}function ce(){let e=function(){var e;let t=r.useContext(ne),n=ye(me.UseRouteError),i=ve(me.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=Y(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const ue=r.createElement(ce,null);class he extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?r.createElement(te.Provider,{value:this.props.routeContext},r.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(J);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(te.Provider,{value:t},i)}function fe(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let o=e,a=null==(i=n)?void 0:i.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||y(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,i,s)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,c=null;n&&(c=i.route.errorElement||ue);let u=t.concat(o.slice(0,s+1)),h=()=>{let t;return t=l?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(de,{match:i,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(he,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function ge(e){let t=r.useContext(J);return t||y(!1),t}function ye(e){let t=r.useContext(X);return t||y(!1),t}function ve(e){let t=function(e){let t=r.useContext(te);return t||y(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||y(!1),n.route.id}i.startTransition;function _e(e){y(!1)}function we(e){let{basename:t="/",children:n=null,location:i,navigationType:s=m.Pop,navigator:o,static:a=!1}=e;re()&&y(!1);let l=t.replace(/^\/*/,"/"),c=r.useMemo((()=>({basename:l,navigator:o,static:a})),[l,o,a]);"string"===typeof i&&(i=S(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,g=r.useMemo((()=>{let e=j(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:s}}),[l,u,h,d,f,p,s]);return null==g?null:r.createElement(Z.Provider,{value:c},r.createElement(ee.Provider,{children:n,value:g}))}function be(e){let{children:t,location:n}=e;return le(Se(t),n)}new Promise((()=>{}));r.Component;function Se(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Se(e.props.children,s));e.type!==_e&&y(!1),e.props.index&&e.props.children&&y(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Se(e.props.children,s)),n.push(o)})),n}const ke=function(){const e=oe(),[{basket:t},n]=h();return(0,l.jsxs)("div",{className:"subtotal",children:[(0,l.jsx)(a(),{renderText:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{children:["Subtotal (",t.length," items):",(0,l.jsx)("strong",{children:e})]}),(0,l.jsxs)("small",{className:"subtotal__gift",children:[(0,l.jsx)("input",{type:"checkbox"}),"This order contains a gift"]})]}),decimalScale:2,value:d(t),displayType:"text",thousandSeparator:!0,prefix:"\u20b9"}),(0,l.jsx)("button",{onClick:t=>e("/payment"),children:"Checkout"})]})};const Ee=function(e){let{id:t,title:n,price:r,rating:i,image:s,hideButton:o}=e;const[{basket:a},c]=h();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"checkoutProduct",children:[(0,l.jsx)("div",{children:(0,l.jsx)("img",{className:"checkoutProduct__image",src:s})}),(0,l.jsxs)("div",{className:"checkoutProduct__info",children:[(0,l.jsx)("p",{className:"checkoutProduct__title",children:n}),(0,l.jsxs)("p",{className:"checkoutProduct__price",children:[(0,l.jsx)("small",{children:"\u20b9"}),(0,l.jsx)("strong",{children:r})]}),(0,l.jsx)("div",{className:"checkoutProduct__rating",children:Array(i).fill().map(((e,t)=>(0,l.jsx)("p",{children:"\ud83c\udf1f"})))}),!o&&(0,l.jsx)("button",{onClick:()=>{c({type:"REMOVE_FROM_BASKET",id:t})},children:"Remove from cart"})]})]})})};const Ie=function(){const[{basket:e},t]=h();return(0,l.jsxs)("div",{className:"checkout",children:[(0,l.jsx)("div",{className:"checkout__left",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"checkout__title",children:"Shopping Cart"}),e.map((e=>(0,l.jsx)(Ee,{id:e.id,title:e.title,image:e.image,rating:e.rating,price:e.price})))]})}),(0,l.jsx)("div",{className:"checkout__right",children:(0,l.jsx)(ke,{})})]})};var Te=n(403),Ce=n(303);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Pe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Ae=i.startTransition;function Re(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),k((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return w("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:b(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&Ae?Ae((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l})}const De="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Ne(e,Pe),{basename:p}=r.useContext(Z),m=!1;if("string"===typeof u&&Oe.test(u)&&(n=u,De))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=j(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(_){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;re()||y(!1);let{basename:i,navigator:s}=r.useContext(Z),{hash:o,pathname:a,search:l}=ae(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:q([i,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),v=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=oe(),u=ie(),h=ae(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:b(u)===b(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,unstable_viewTransition:d});return r.createElement("a",xe({},f,{href:n||g,onClick:m||o?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:t,target:c}))}));var Le,Fe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Le||(Le={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Fe||(Fe={}));const Ue=!1,je=!1,Ve="${JSCORE_VERSION}",Be=function(e,t){if(!e)throw ze(t)},ze=function(e){return new Error("Firebase Database ("+Ve+") INTERNAL ASSERT FAILED: "+e)},qe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},We={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new He;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class He extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ke=function(e){const t=qe(e);return We.encodeByteArray(t,!0)},Ye=function(e){return Ke(e).replace(/\./g,"")},Ge=function(e){try{return We.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Qe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Qe(e[n],t[n]));return e}const $e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Je=()=>{try{return $e()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ge(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Xe=()=>{var e;return null===(e=Je())||void 0===e?void 0:e.config};class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function et(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ye(JSON.stringify({alg:"none",type:"JWT"})),Ye(JSON.stringify(s)),""].join(".")}function tt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function nt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function rt(){var e;const t=null===(e=Je())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function it(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function st(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ot(){const e=tt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function at(){return!0===Ue||!0===je}function lt(){try{return"object"===typeof indexedDB}catch(e){return!1}}function ct(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(mu){t(mu)}}))}class ut extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ht.prototype.create)}}class ht{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(dt,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ut(n,s,t)}}const dt=/\{\$([^}]+)}/g;function ft(e){return JSON.parse(e)}function pt(e){return JSON.stringify(e)}const mt=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=ft(Ge(s[0])||""),n=ft(Ge(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function vt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _t(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function wt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(bt(n)&&bt(s)){if(!wt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bt(e){return null!==e&&"object"===typeof e}function St(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function kt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Et(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class It{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function Tt(e,t){const n=new Ct(e,t);return n.subscribe.bind(n)}class Ct{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=xt),void 0===r.error&&(r.error=xt),void 0===r.complete&&(r.complete=xt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function xt(){}const Nt=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function Pt(e,t){return"".concat(e," failed: ").concat(t," argument ")}function At(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Pt(e,t)+"must be a valid function.")}function Rt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Pt(e,t)+"must be a valid context object.")}const Dt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Ot=1e3,Mt=2,Lt=144e5,Ft=.5;function Ut(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot)*Math.pow(t,e),r=Math.round(Ft*n*(Math.random()-.5)*2);return Math.min(Lt,n+r)}function jt(e){return e&&e._delegate?e._delegate:e}class Vt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bt="[DEFAULT]";class zt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ze;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Bt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.component?this.component.multipleInstances?e:Bt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Wt=[];var Ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ht||(Ht={}));const Kt={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},Yt=Ht.INFO,Gt={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},Qt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Gt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class $t{constructor(e){this.name=e,this._logLevel=Yt,this._logHandler=Qt,this._userLogHandler=null,Wt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Kt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const Jt=(e,t)=>t.some((t=>e instanceof t));let Xt,Zt;const en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,sn=new WeakMap;let on={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||nn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function an(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Zt||(Zt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(un(this),n),cn(en.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cn(e.apply(un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(un(this),t,...r);return nn.set(s,t.sort?t.sort():[t]),cn(s)}}function ln(e){return"function"===typeof e?an(e):(e instanceof IDBTransaction&&function(e){if(tn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));tn.set(e,t)}(e),Jt(e,Xt||(Xt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,on):e)}function cn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(cn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&en.set(t,e)})).catch((()=>{})),sn.set(t,e),t}(e);if(rn.has(e))return rn.get(e);const t=ln(e);return t!==e&&(rn.set(e,t),sn.set(t,e)),t}const un=e=>sn.get(e);const hn=["get","getKey","getAll","getAllKeys","count"],dn=["put","add","delete","clear"],fn=new Map;function pn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fn.get(t))return fn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=dn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!hn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return fn.set(t,s),s}on=(e=>({...e,get:(t,n,r)=>pn(t,n)||e.get(t,n,r),has:(t,n)=>!!pn(t,n)||e.has(t,n)}))(on);class mn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const gn="@firebase/app",yn="0.9.23",vn=new $t("@firebase/app"),_n="[DEFAULT]",wn={[gn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bn=new Map,Sn=new Map;function kn(e,t){try{e.container.addComponent(t)}catch(n){vn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function En(e,t){e.container.addOrOverwriteComponent(t)}function In(e){const t=e.name;if(Sn.has(t))return vn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Sn.set(t,e);for(const n of bn.values())kn(n,e);return!0}function Tn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Cn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_n;Tn(e,t).clearInstance(n)}function xn(){Sn.clear()}const Nn=new ht("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const An="10.6.0";function Rn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:_n,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nn.create("bad-app-name",{appName:String(i)});if(n||(n=Xe()),!n)throw Nn.create("no-options");const s=bn.get(i);if(s){if(wt(n,s.options)&&wt(r,s.config))return s;throw Nn.create("duplicate-app",{appName:i})}const o=new qt(i);for(const l of Sn.values())o.addComponent(l);const a=new Pn(n,r,o);return bn.set(i,a),a}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n;const t=bn.get(e);if(!t&&e===_n&&Xe())return Rn();if(!t)throw Nn.create("no-app",{appName:e});return t}function On(){return Array.from(bn.values())}async function Mn(e){const t=e.name;bn.has(t)&&(bn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Ln(e,t,n){var r;let i=null!==(r=wn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void vn.warn(e.join(" "))}In(new Vt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Fn(e,t){if(null!==e&&"function"!==typeof e)throw Nn.create("invalid-log-argument");!function(e,t){for(const n of Wt){let r=null;t&&t.level&&(r=Kt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Ht[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Un(e){var t;t=e,Wt.forEach((e=>{e.setLogLevel(t)}))}const jn="firebase-heartbeat-database",Vn=1,Bn="firebase-heartbeat-store";let zn=null;function qn(){return zn||(zn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=cn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(cn(o.result),e.oldVersion,e.newVersion,cn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(jn,Vn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Bn)}}).catch((e=>{throw Nn.create("idb-open",{originalErrorMessage:e.message})}))),zn}async function Wn(e,t){try{const n=(await qn()).transaction(Bn,"readwrite"),r=n.objectStore(Bn);await r.put(t,Hn(e)),await n.done}catch(n){if(n instanceof ut)vn.warn(n.message);else{const e=Nn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});vn.warn(e.message)}}}function Hn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Kn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e;const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Yn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Yn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Qn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ye(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Yn(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!lt()&&ct().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await qn();return await t.transaction(Bn).objectStore(Bn).get(Hn(e))}catch(t){if(t instanceof ut)vn.warn(t.message);else{const e=Nn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});vn.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Qn(e){return Ye(JSON.stringify({version:2,heartbeats:e})).length}var $n;$n="",In(new Vt("platform-logger",(e=>new mn(e)),"PRIVATE")),In(new Vt("heartbeat",(e=>new Kn(e)),"PRIVATE")),Ln(gn,yn,$n),Ln(gn,yn,"esm2017"),Ln("fire-js","");Ln("firebase","10.6.0","app");const Jn=(e,t)=>t.some((t=>e instanceof t));let Xn,Zn;const er=new WeakMap,tr=new WeakMap,nr=new WeakMap,rr=new WeakMap,ir=new WeakMap;let sr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||nr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function or(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Zn||(Zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(cr(this),n),lr(er.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lr(e.apply(cr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(cr(this),t,...r);return nr.set(s,t.sort?t.sort():[t]),lr(s)}}function ar(e){return"function"===typeof e?or(e):(e instanceof IDBTransaction&&function(e){if(tr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));tr.set(e,t)}(e),Jn(e,Xn||(Xn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,sr):e)}function lr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(lr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&er.set(t,e)})).catch((()=>{})),ir.set(t,e),t}(e);if(rr.has(e))return rr.get(e);const t=ar(e);return t!==e&&(rr.set(e,t),ir.set(t,e)),t}const cr=e=>ir.get(e);const ur=["get","getKey","getAll","getAllKeys","count"],hr=["put","add","delete","clear"],dr=new Map;function fr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(dr.get(t))return dr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ur.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return dr.set(t,s),s}!function(e){sr=e(sr)}((e=>({...e,get:(t,n,r)=>fr(t,n)||e.get(t,n,r),has:(t,n)=>!!fr(t,n)||e.has(t,n)})));const pr="@firebase/installations",mr="0.6.4",gr=1e4,yr="w:".concat(mr),vr="FIS_v2",_r="https://firebaseinstallations.googleapis.com/v1",wr=36e5,br=new ht("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Sr(e){return e instanceof ut&&e.code.includes("request-failed")}function kr(e){let{projectId:t}=e;return"".concat(_r,"/projects/").concat(t,"/installations")}function Er(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ir(e,t){const n=(await t.json()).error;return br.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Tr(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Cr(e,t){let{refreshToken:n}=t;const r=Tr(e);return r.append("Authorization",function(e){return"".concat(vr," ").concat(e)}(n)),r}async function xr(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Nr(e){return new Promise((t=>{setTimeout(t,e)}))}const Pr=/^[cdef][\w-]{21}$/,Ar="";function Rr(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Pr.test(t)?t:Ar}catch(e){return Ar}}function Dr(e){return"".concat(e.appName,"!").concat(e.appId)}const Or=new Map;function Mr(e,t){const n=Dr(e);Lr(n,t),function(e,t){const n=Ur();n&&n.postMessage({key:e,fid:t});jr()}(n,t)}function Lr(e,t){const n=Or.get(e);if(n)for(const r of n)r(t)}let Fr=null;function Ur(){return!Fr&&"BroadcastChannel"in self&&(Fr=new BroadcastChannel("[Firebase] FID Change"),Fr.onmessage=e=>{Lr(e.data.key,e.data.fid)}),Fr}function jr(){0===Or.size&&Fr&&(Fr.close(),Fr=null)}const Vr="firebase-installations-database",Br=1,zr="firebase-installations-store";let qr=null;function Wr(){return qr||(qr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=lr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(lr(o.result),e.oldVersion,e.newVersion,lr(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}(Vr,Br,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(zr)}})),qr}async function Hr(e,t){const n=Dr(e),r=(await Wr()).transaction(zr,"readwrite"),i=r.objectStore(zr),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Mr(e,t.fid),t}async function Kr(e){const t=Dr(e),n=(await Wr()).transaction(zr,"readwrite");await n.objectStore(zr).delete(t),await n.done}async function Yr(e,t){const n=Dr(e),r=(await Wr()).transaction(zr,"readwrite"),i=r.objectStore(zr),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Mr(e,o.fid),o}async function Gr(e){let t;const n=await Yr(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Rr(),registrationStatus:0};return Jr(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(br.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=kr(n),o=Tr(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:vr,appId:n.appId,sdkVersion:yr},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await xr((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Er(e.authToken)}}throw await Ir("Create Installation",u)}(e,t);return Hr(e.appConfig,n)}catch(n){throw Sr(n)&&409===n.customData.serverCode?await Kr(e.appConfig):await Hr(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qr(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===Ar?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Qr(e){let t=await $r(e.appConfig);for(;1===t.registrationStatus;)await Nr(100),t=await $r(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Gr(e);return n||t}return t}function $r(e){return Yr(e,(e=>{if(!e)throw br.create("installation-not-found");return Jr(e)}))}function Jr(e){return 1===(t=e).registrationStatus&&t.registrationTime+gr<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Xr(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(kr(e),"/").concat(n,"/authTokens:generate")}(n,t),s=Cr(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:yr,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await xr((()=>fetch(i,l)));if(c.ok){return Er(await c.json())}throw await Ir("Generate Auth Token",c)}async function Zr(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Yr(e.appConfig,(r=>{if(!ti(r))throw br.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+wr}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await ei(e.appConfig);for(;1===n.authToken.requestStatus;)await Nr(100),n=await ei(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Zr(e,t):r}(e,n),r;{if(!navigator.onLine)throw br.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Xr(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Hr(e.appConfig,r),n}catch(n){if(!Sr(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Hr(e.appConfig,n)}else await Kr(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function ei(e){return Yr(e,(e=>{if(!ti(e))throw br.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+gr<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function ti(e){return void 0!==e&&2===e.registrationStatus}async function ni(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Gr(e);t&&await t}(n);return(await Zr(n,t)).token}function ri(e){return br.create("missing-app-config-values",{valueName:e})}const ii="installations",si=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ri("App Configuration");if(!e.name)throw ri("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ri(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Tn(t,"heartbeat"),_delete:()=>Promise.resolve()}},oi=e=>{const t=Tn(e.getProvider("app").getImmediate(),ii).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Gr(t);return r?r.catch(console.error):Zr(t).catch(console.error),n.fid}(t),getToken:e=>ni(t,e)}};In(new Vt(ii,si,"PUBLIC")),In(new Vt("installations-internal",oi,"PRIVATE")),Ln(pr,mr),Ln(pr,mr,"esm2017");const ai="analytics",li="firebase_id",ci="origin",ui=6e4,hi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",di="https://www.googletagmanager.com/gtag/js",fi=new $t("@firebase/analytics"),pi=new ht("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function mi(e){if(!e.startsWith(di)){const t=pi.create("invalid-gtag-resource",{gtagURL:e});return fi.warn(t.message),""}return e}function gi(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function yi(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:mi}),r=document.createElement("script"),i="".concat(di,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function vi(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await gi(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){fi.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await gi(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){fi.error(a)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=o;e("consent","update",t)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(l){fi.error(l)}}}const _i=30;const wi=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function bi(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Si(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wi,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw pi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw pi.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ei;return setTimeout((async()=>{a.abort()}),void 0!==n?n:ui),ki({appId:r,apiKey:i,measurementId:s},o,a,t)}async function ki(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wi;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(pi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(c){if(l)return fi.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:a,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:bi(r)},s=hi.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw pi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(c){const t=c;if(!function(e){if(!(e instanceof ut)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return fi.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:l};throw c}const r=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?Ut(i,s.intervalMillis,_i):Ut(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,u),fi.debug("Calling attemptFetch again in ".concat(r," millis")),ki(e,u,n,s)}}class Ei{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ii,Ti;function Ci(e){Ti=e}function xi(e){Ii=e}async function Ni(e,t,n,r,i,s,o){var a;const l=Si(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&fi.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>fi.error(e))),t.push(l);const c=async function(){if(!lt())return fi.warn(pi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await ct()}catch(e){return fi.warn(pi.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(di)&&n.src.includes(e))return n;return null})(s)||yi(s,u.measurementId),Ti&&(i("consent","default",Ti),Ci(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d[ci]="firebase",d.update=!0,null!=h&&(d[li]=h),i("config",u.measurementId,d),Ii&&(i("set",Ii),xi(void 0)),u.measurementId}class Pi{constructor(e){this.app=e}_delete(){return delete Ai[this.app.options.appId],Promise.resolve()}}let Ai={},Ri=[];const Di={};let Oi,Mi,Li="dataLayer",Fi="gtag",Ui=!1;function ji(){const e=[];if(it()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=pi.create("invalid-analytics-context",{errorInfo:t});fi.warn(n.message)}}function Vi(e,t,n){ji();const r=e.options.appId;if(!r)throw pi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw pi.create("no-api-key");fi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ai[r])throw pi.create("already-exists",{id:r});if(!Ui){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Li);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=vi(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Ai,Ri,Di,Li,Fi);Mi=e,Oi=t,Ui=!0}Ai[r]=Ni(e,Ri,Di,t,Oi,Li,n);return new Pi(e)}function Bi(e,t,n,r){e=jt(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Mi,Ai[e.app.options.appId],t,n,r).catch((e=>fi.error(e)))}const zi="@firebase/analytics",qi="0.10.0";In(new Vt(ai,((e,t)=>{let{options:n}=t;return Vi(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),In(new Vt("analytics-internal",(function(e){try{const t=e.getProvider(ai).getImmediate();return{logEvent:(e,n,r)=>Bi(t,e,n,r)}}catch(t){throw pi.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Ln(zi,qi),Ln(zi,qi,"esm2017");class Wi{constructor(e,t){this._delegate=e,this.firebase=t,kn(e,new Vt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Mn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_n;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_n;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){kn(this._delegate,e)}_addOrOverwriteComponent(e){En(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Hi=new ht("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ki=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Rn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(gt(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Ln,setLogLevel:Un,onLog:Fn,apps:null,SDK_VERSION:An,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(In(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Hi.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Qe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!gt(n,e=e||_n))throw Hi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Wi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Qe(n,e)},createSubscribe:Tt,ErrorFactory:ht,deepExtend:Qe}),n}(),Yi=new $t("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Yi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Yi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Gi=Ki;!function(e){Ln("@firebase/app-compat","0.2.23",e)}();Gi.registerVersion("firebase","10.6.0","app-compat");function Qi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const $i={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ji="EMAIL_SIGNIN",Xi="PASSWORD_RESET",Zi="RECOVER_EMAIL",es="REVERT_SECOND_FACTOR_ADDITION",ts="VERIFY_AND_CHANGE_EMAIL",ns="VERIFY_EMAIL";function rs(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const is=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ss=rs,os=new ht("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),as=new $t("@firebase/auth");function ls(e){if(as.logLevel<=Ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];as.error("Auth (".concat(An,"): ").concat(e),...n)}}function cs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fs(e,...n)}function us(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fs(e,...n)}function hs(e,t,n){const r=Object.assign(Object.assign({},ss()),{[t]:n});return new ht("auth","Firebase",r).create(t,{appName:e.name})}function ds(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&cs(e,"argument-error"),hs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return os.create(e,...n)}function ps(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fs(t,...r)}}function ms(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ls(t),new Error(t)}function gs(e,t){e||ms(t)}function ys(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function vs(){return"http:"===_s()||"https:"===_s()}function _s(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ws{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=nt()||st()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(vs()||it()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function bs(e,t){gs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ss{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ks={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Es=new ws(3e4,6e4);function Is(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ts(e,t,n,r){return Cs(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=St(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ss.fetch()(Ns(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Cs(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ks),t);try{const t=new As(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Rs(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rs(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Rs(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Rs(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw hs(e,a,o);cs(e,a)}}catch(i){if(i instanceof ut)throw i;cs(e,"network-request-failed",{message:String(i)})}}async function xs(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ts(e,t,n,r,i);return"mfaPendingCredential"in s&&cs(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ns(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?bs(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Ps(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class As{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(us(this.auth,"network-request-failed"))),Es.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rs(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=us(e,t,r);return i.customData._tokenResponse=n,i}function Ds(e){return void 0!==e&&void 0!==e.getResponse}function Os(e){return void 0!==e&&void 0!==e.enterprise}class Ms{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ps(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ls(e,t){return Ts(e,"GET","/v2/recaptchaConfig",Is(e,t))}function Fs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Us(e){return 1e3*Number(e)}function js(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ls("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ge(n);return e?JSON.parse(e):(ls("Failed to decode base64 JWT payload"),null)}catch(i){return ls("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Vs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ut&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Bs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class zs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fs(this.lastLoginAt),this.creationTime=Fs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function qs(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Vs(e,async function(e,t){return Ts(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ps(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Qi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zs(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ps(e.idToken,"internal-error"),ps("undefined"!==typeof e.idToken,"internal-error"),ps("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=js(e);return ps(t,"internal-error"),ps("undefined"!==typeof t.exp,"internal-error"),ps("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ps(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Cs(e,{},(async()=>{const n=St({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Ns(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ss.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ws;return n&&(ps("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ps("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ps("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return ms("not implemented")}}function Hs(e,t){ps("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ks{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Qi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zs(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Vs(this,this.stsTokenManager.getToken(this.auth,e));return ps(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=jt(e),r=await n.getIdToken(t),i=js(r);ps(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fs(Us(i.auth_time)),issuedAtTime:Fs(Us(i.iat)),expirationTime:Fs(Us(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=jt(e);await qs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ps(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ps(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await qs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Vs(this,async function(e,t){return Ts(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:S}=t;ps(v&&S,e,"internal-error");const k=Ws.fromJSON(this.name,S);ps("string"===typeof v,e,"internal-error"),Hs(u,e.name),Hs(h,e.name),ps("boolean"===typeof _,e,"internal-error"),ps("boolean"===typeof w,e,"internal-error"),Hs(d,e.name),Hs(f,e.name),Hs(p,e.name),Hs(m,e.name),Hs(g,e.name),Hs(y,e.name);const E=new Ks({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(E.providerData=b.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ws;r.updateFromServerResponse(t);const i=new Ks({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await qs(i),i}}const Ys=new Map;function Gs(e){gs(e instanceof Function,"Expected a class definition");let t=Ys.get(e);return t?(gs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ys.set(e,t),t)}class Qs{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qs.type="NONE";const $s=Qs;function Js(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Xs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Js(this.userKey,r.apiKey,i),this.fullPersistenceKey=Js("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ks._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Xs(Gs($s),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Gs($s);const s=Js(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Ks._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Xs(i,e,n)):new Xs(i,e,n)}}function Zs(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ro(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eo(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(so(t))return"Blackberry";if(oo(t))return"Webos";if(to(t))return"Safari";if((t.includes("chrome/")||no(t))&&!t.includes("edge/"))return"Chrome";if(io(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/firefox\//i.test(e)}function to(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/crios\//i.test(e)}function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/iemobile/i.test(e)}function io(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/android/i.test(e)}function so(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/blackberry/i.test(e)}function oo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/webos/i.test(e)}function ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return ao(e)||io(e)||oo(e)||so(e)||/windows phone/i.test(e)||ro(e)}function co(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Zs(tt());break;case"Worker":t="".concat(Zs(tt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(An,"/").concat(r)}class uo{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ho{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class fo{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mo(this),this.idTokenSubscription=new mo(this),this.beforeStateQueue=new uo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=os,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gs(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ps(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qs(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?jt(e):null;return t&&ps(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ps(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Gs(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ts(e,"GET","/v2/passwordPolicy",Is(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ho(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ht("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ts(e,"POST","/v2/accounts:revokeToken",Is(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gs(e)||this._popupRedirectResolver;ps(t,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[Gs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ps(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ps(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=co(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(as.logLevel<=Ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];as.warn("Auth (".concat(An,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function po(e){return jt(e)}class mo{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tt((e=>this.observer=e))}get next(){return ps(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function go(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=us("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function yo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class vo{constructor(e){this.type="recaptcha-enterprise",this.auth=po(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Os(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ls(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ms(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Os(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));go("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function _o(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new vo(e);let s;try{s=await i.verify(n)}catch(mu){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wo(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await _o(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await _o(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function bo(e,t,n){const r=po(e);ps(r._canInitEmulator,r,"emulator-config-failed"),ps(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=So(t),{host:o,port:a}=function(e){const t=So(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ko(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ko(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function So(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ko(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Eo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,t){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function Io(e,t){return Ts(e,"POST","/v1/accounts:resetPassword",Is(e,t))}async function To(e,t){return Ts(e,"POST","/v1/accounts:signUp",t)}async function Co(e,t){return xs(e,"POST","/v1/accounts:signInWithPassword",Is(e,t))}async function xo(e,t){return Ts(e,"POST","/v1/accounts:sendOobCode",Is(e,t))}async function No(e,t){return xo(e,t)}async function Po(e,t){return xo(e,t)}class Ao extends Eo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ao(e,t,"password")}static _fromEmailAndCode(e,t){return new Ao(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return wo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Co);case"emailLink":return async function(e,t){return xs(e,"POST","/v1/accounts:signInWithEmailLink",Is(e,t))}(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return wo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",To);case"emailLink":return async function(e,t){return xs(e,"POST","/v1/accounts:signInWithEmailLink",Is(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ro(e,t){return xs(e,"POST","/v1/accounts:signInWithIdp",Is(e,t))}class Do extends Eo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Qi(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Do(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ro(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ro(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ro(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=St(t)}return e}}const Oo={USER_NOT_FOUND:"user-not-found"};class Mo extends Eo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Mo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Mo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return xs(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await xs(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,t));if(n.temporaryProof)throw Rs(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return xs(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Oo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Mo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Lo{constructor(e){var t,n,r,i,s,o;const a=kt(Et(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ps(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=kt(Et(e)).link,n=t?kt(Et(t)).deep_link_id:null,r=kt(Et(e)).deep_link_id;return(r?kt(Et(r)).link:null)||r||n||t||e}(e);try{return new Lo(t)}catch(n){return null}}}class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,t){return Ao._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lo.parseLink(t);return ps(n,"argument-error"),Ao._fromEmailAndCode(e,n.code,n.tenantId)}}Fo.PROVIDER_ID="password",Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Uo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class jo extends Uo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vo extends jo{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ps("providerId"in t&&"signInMethod"in t,"argument-error"),Do._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ps(e.idToken||e.accessToken,"argument-error"),Do._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Vo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Vo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Vo(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class Bo extends jo{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Bo.credential(t.oauthAccessToken)}catch(n){return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com",Bo.PROVIDER_ID="facebook.com";class zo extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zo.credential(n,r)}catch(i){return null}}}zo.GOOGLE_SIGN_IN_METHOD="google.com",zo.PROVIDER_ID="google.com";class qo extends jo{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qo.credential(t.oauthAccessToken)}catch(n){return null}}}qo.GITHUB_SIGN_IN_METHOD="github.com",qo.PROVIDER_ID="github.com";class Wo extends Eo{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ro(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ro(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ro(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Wo(n,i):null}static _create(e,t){return new Wo(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ho extends Uo{constructor(e){ps(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Ho.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ho.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Wo.fromJSON(e);return ps(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Wo._create(r,n)}catch(i){return null}}}class Ko extends jo{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ko.credential(n,r)}catch(i){return null}}}async function Yo(e,t){return xs(e,"POST","/v1/accounts:signUp",Is(e,t))}Ko.TWITTER_SIGN_IN_METHOD="twitter.com",Ko.PROVIDER_ID="twitter.com";class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ks._fromIdTokenResponse(e,n,r),s=Qo(n);return new Go({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Qo(n);return new Go({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Qo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class $o extends ut{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,$o.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new $o(e,t,n,r)}}function Jo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw $o._fromErrorAndOperation(e,n,t,r);throw n}))}function Xo(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Zo(e,t){const n=jt(e);await ta(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Ts(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Xo(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ea(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Vs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Go._forOperation(e,"link",r)}async function ta(e,t,n){await qs(t);const r=!1===e?"provider-already-linked":"no-such-provider";ps(Xo(t.providerData).has(n)===e,t.auth,r)}async function na(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Vs(e,Jo(r,i,t,e),n);ps(s.idToken,r,"internal-error");const o=js(s.idToken);ps(o,r,"internal-error");const{sub:a}=o;return ps(e.uid===a,r,"user-mismatch"),Go._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&cs(r,"user-mismatch"),s}}async function ra(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Jo(e,r,t),s=await Go._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ia(e,t){return ra(po(e),t)}async function sa(e,t){const n=jt(e);return await ta(!1,n,t.providerId),ea(n,t)}async function oa(e,t){return na(jt(e),t)}async function aa(e,t){const n=po(e),r=await async function(e,t){return xs(e,"POST","/v1/accounts:signInWithCustomToken",Is(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Go._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class la{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ca._fromServerResponse(e,t):"totpInfo"in t?ua._fromServerResponse(e,t):cs(e,"internal-error")}}class ca extends la{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ca(t)}}class ua extends la{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ua(t)}}function ha(e,t,n){var r;ps((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ps("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ps(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ps(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function da(e){const t=po(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fa(e,t){await async function(e,t){return Ts(e,"POST","/v1/accounts:update",Is(e,t))}(jt(e),{oobCode:t})}async function pa(e,t){const n=jt(e),r=await Io(n,{oobCode:t}),i=r.requestType;switch(ps(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ps(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ps(r.mfaInfo,n,"internal-error");default:ps(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=la._fromServerResponse(po(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function ma(e,t){const n={identifier:t,continueUri:vs()?ys():"http://localhost"},{signinMethods:r}=await async function(e,t){return Ts(e,"POST","/v1/accounts:createAuthUri",Is(e,t))}(jt(e),n);return r||[]}async function ga(e,t){const n=jt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ha(n.auth,r,t);const{email:i}=await async function(e,t){return xo(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ya(e,t,n){const r=jt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ha(r.auth,i,n);const{email:s}=await async function(e,t){return xo(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function va(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=jt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Vs(i,async function(e,t){return Ts(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function _a(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Vs(e,async function(e,t){return Ts(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class wa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class ba extends wa{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Sa extends wa{constructor(e,t){super(e,"facebook.com",t)}}class ka extends ba{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Ea extends wa{constructor(e,t){super(e,"google.com",t)}}class Ia extends ba{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ta(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=js(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new wa(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Sa(s,i);case"github.com":return new ka(s,i);case"google.com":return new Ea(s,i);case"twitter.com":return new Ia(s,i,e.screenName||null);case"custom":case"anonymous":return new wa(s,null);default:return new wa(s,r,i)}}(n)}class Ca{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ca("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ca("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ca._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ca._fromIdtoken(e.multiFactorSession.idToken)}return null}}class xa{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=po(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>la._fromServerResponse(n,e)));ps(r.mfaPendingCredential,n,"internal-error");const s=Ca._fromMfaPendingCredential(r.mfaPendingCredential);return new xa(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Go._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ps(t.user,n,"internal-error"),Go._forOperation(t.user,t.operationType,o);default:cs(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Na{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>la._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Na(e)}async getSession(){return Ca._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Vs(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Vs(this.user,function(e,t){return Ts(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Is(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Pa=new WeakMap;const Aa="__sak";class Ra{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Da extends Ra{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=tt();return to(e)||ao(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=lo(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ot()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Da.type="LOCAL";const Oa=Da;class Ma extends Ra{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ma.type="SESSION";const La=Ma;class Fa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Fa(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ua(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fa.receivers=[];class ja{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ua("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Va(){return window}function Ba(){return"undefined"!==typeof Va().WorkerGlobalScope&&"function"===typeof Va().importScripts}const za="firebaseLocalStorageDb",qa="firebaseLocalStorage",Wa="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ka(e,t){return e.transaction([qa],t?"readwrite":"readonly").objectStore(qa)}function Ya(){const e=indexedDB.open(za,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(qa,{keyPath:Wa})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(qa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(za);return new Ha(e).toPromise()}(),t(await Ya()))}))}))}async function Ga(e,t,n){const r=Ka(e,!0).put({[Wa]:t,value:n});return new Ha(r).toPromise()}function Qa(e,t){const n=Ka(e,!0).delete(t);return new Ha(n).toPromise()}class $a{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ya()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ba()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fa._getInstance(Ba()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ja(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ya();return await Ga(e,Aa,"1"),await Qa(e,Aa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ga(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ka(e,!1).get(t),r=await new Ha(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Qa(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ka(e,!1).getAll();return new Ha(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$a.type="LOCAL";const Ja=$a;const Xa=1e12;class Za{constructor(e){this.auth=e,this.counter=Xa,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new el(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Xa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Xa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Xa;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class el{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ps(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const tl=yo("rcb"),nl=new ws(3e4,6e4);class rl{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Va().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ps(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ds(Va().grecaptcha)?Promise.resolve(Va().grecaptcha):new Promise(((n,r)=>{const i=Va().setTimeout((()=>{r(us(e,"network-request-failed"))}),nl.get());Va()[tl]=()=>{Va().clearTimeout(i),delete Va()[tl];const s=Va().grecaptcha;if(!s||!Ds(s))return void r(us(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};go("".concat("https://www.google.com/recaptcha/api.js?","?").concat(St({onload:tl,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(us(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Va().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class il{async load(e){return new Za(e)}clearedOneInstance(){}}const sl="recaptcha",ol={theme:"light",type:"image"};class al{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ol);this.parameters=n,this.type=sl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=po(e),this.isInvisible="invisible"===this.parameters.size,ps("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ps(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new il:new rl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ps(!this.parameters.sitekey,this.auth,"argument-error"),ps(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ps("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Va()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ps(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ps(vs()&&!Ba(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Ts(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ps(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ps(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ll{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Mo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function cl(e,t,n){var r;const i=await n.verify();try{let s;if(ps("string"===typeof i,e,"argument-error"),ps(n.type===sl,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ps("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ts(e,"POST","/v2/accounts/mfaEnrollment:start",Is(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ps("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ps(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ts(e,"POST","/v2/accounts/mfaSignIn:start",Is(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ts(e,"POST","/v1/accounts:sendVerificationCode",Is(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ul{constructor(e){this.providerId=ul.PROVIDER_ID,this.auth=po(e)}verifyPhoneNumber(e,t){return cl(this.auth,e,jt(t))}static credential(e,t){return Mo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ul.credentialFromTaggedObject(t)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Mo._fromTokenResponse(n,r):null}}function hl(e,t){return t?Gs(t):(ps(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ul.PROVIDER_ID="phone",ul.PHONE_SIGN_IN_METHOD="phone";class dl extends Eo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ro(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fl(e){return ra(e.auth,new dl(e),e.bypassAuthState)}function pl(e){const{auth:t,user:n}=e;return ps(n,t,"internal-error"),na(n,new dl(e),e.bypassAuthState)}async function ml(e){const{auth:t,user:n}=e;return ps(n,t,"internal-error"),ea(n,new dl(e),e.bypassAuthState)}class gl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fl;case"linkViaPopup":case"linkViaRedirect":return ml;case"reauthViaPopup":case"reauthViaRedirect":return pl;default:cs(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yl=new ws(2e3,1e4);class vl extends gl{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,vl.currentPopupAction&&vl.currentPopupAction.cancel(),vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ps(e,this.auth,"internal-error"),e}async onExecution(){gs(1===this.filter.length,"Popup operations only handle one event");const e=Ua();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(us(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,yl.get())};e()}}vl.currentPopupAction=null;const _l="pendingRedirect",wl=new Map;class bl extends gl{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=wl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Il(t),r=El(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}wl.set(this.auth._key(),e)}return this.bypassAuthState||wl.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Sl(e,t){return El(e)._set(Il(t),"true")}function kl(e,t){wl.set(e._key(),t)}function El(e){return Gs(e._redirectPersistence)}function Il(e){return Js(_l,e.config.apiKey,e.name)}function Tl(e,t,n){return async function(e,t,n){const r=po(e);ds(e,t,Uo),await r._initializationPromise;const i=hl(r,n);return await Sl(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Cl(e,t,n){return async function(e,t,n){const r=jt(e);ds(r.auth,t,Uo),await r.auth._initializationPromise;const i=hl(r.auth,n);await Sl(i,r.auth);const s=await Pl(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function xl(e,t,n){return async function(e,t,n){const r=jt(e);ds(r.auth,t,Uo),await r.auth._initializationPromise;const i=hl(r.auth,n);await ta(!1,r,t.providerId),await Sl(i,r.auth);const s=await Pl(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Nl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=po(e),i=hl(r,t),s=new bl(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Pl(e){const t=Ua("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Al{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Dl(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(us(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rl(e))}saveEventToCache(e){this.cachedEventUids.add(Rl(e)),this.lastProcessedEventTime=Date.now()}}function Rl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Dl(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Ol(e){return Ts(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Ml=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ll=/^https?/;function Fl(e){const t=ys(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ll.test(n))return!1;if(Ml.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ul=new ws(3e4,6e4);function jl(){const e=Va().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Vl=null;function Bl(e){return Vl=Vl||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){jl(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jl(),n(us(e,"network-request-failed"))},timeout:Ul.get()})}if(null===(i=null===(r=Va().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Va().gapi)||void 0===s?void 0:s.load)){const t=yo("iframefcb");return Va()[t]=()=>{gapi.load?o():n(us(e,"network-request-failed"))},go("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Vl=null,e}))}(e),Vl}const zl=new ws(5e3,15e3),ql="__/auth/iframe",Wl="emulator/auth/iframe",Hl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yl(e){const t=e.config;ps(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?bs(t,Wl):"https://".concat(e.config.authDomain,"/").concat(ql),r={apiKey:t.apiKey,appName:e.name,v:An},i=Kl.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(St(r).slice(1))}const Gl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ql{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function $l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Gl),{width:r.toString(),height:i.toString(),top:s,left:o}),c=tt().toLowerCase();n&&(a=no(c)?"_blank":n),eo(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ao(arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ql(null);const h=window.open(t||"",a,u);ps(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Ql(h)}const Jl="__/auth/handler",Xl="emulator/auth/handler",Zl=encodeURIComponent("fac");async function ec(e,t,n,r,i,s){ps(e.config.authDomain,e,"auth-domain-config-required"),ps(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:An,eventId:i};if(t instanceof Uo){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",vt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof jo){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Zl,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Jl);return bs(t,Xl)}(e),"?").concat(St(a).slice(1)).concat(c)}const tc="webStorageSupport";const nc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=La,this._completeRedirectFn=Nl,this._overrideRedirectResult=kl}async _openPopup(e,t,n,r){var i;gs(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return $l(e,await ec(e,t,n,ys(),r),Ua())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Va().location.href=e}(await ec(e,t,n,ys(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gs(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Bl(e),n=Va().gapi;return ps(n,e,"internal-error"),t.open({where:document.body,url:Yl(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hl,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=us(e,"network-request-failed"),s=Va().setTimeout((()=>{r(i)}),zl.get());function o(){Va().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Al(e);return t.register("authEvent",(t=>{ps(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tc,{type:tc},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[tc];void 0!==i&&t(!!i),cs(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ol(e);for(const r of t)try{if(Fl(r))return}catch(n){}cs(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lo()||to()||ao()}};class rc{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ms("unexpected MultiFactorSessionType")}}}class ic extends rc{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ic(e)}_finalizeEnroll(e,t,n){return function(e,t){return Ts(e,"POST","/v2/accounts/mfaEnrollment:finalize",Is(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Ts(e,"POST","/v2/accounts/mfaSignIn:finalize",Is(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class sc{constructor(){}static assertion(e){return ic._fromCredential(e)}}sc.FACTOR_ID="phone";var oc="@firebase/auth",ac="1.4.0";class lc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ps(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Je())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var cc;function uc(){return window}cc="Browser",In(new Vt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ps(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:cc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:co(cc)},c=new fo(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),In(new Vt("auth-internal",(e=>(e=>new lc(e))(po(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(oc,ac,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(cc)),Ln(oc,ac,"esm2017");async function hc(e,t,n){var r;const{BuildInfo:i}=uc();gs(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(gs(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ao()?o.ibi=i.packageName:io()?o.apn=i.packageName:cs(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ec(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function dc(e){const{cordova:t}=uc();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const fc=20;class pc extends Al{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function mc(e){const t=await vc()._get(_c(e));return t&&await vc()._remove(_c(e)),t}function gc(e,t){var n,r;const i=function(e){const t=wc(e),n=t.link?decodeURIComponent(t.link):void 0,r=wc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return wc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=wc(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?us(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function yc(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<fc;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function vc(){return Gs(Oa)}function _c(e){return Js("authEvent",e.config.apiKey,e.name)}function wc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return kt(n.join("?"))}const bc=class{constructor(){this._redirectPersistence=La,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nl,this._overrideRedirectResult=kl}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new pc(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){cs(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=uc();ps("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ps("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ps("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ps("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ps("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),wl.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:yc(),postBody:null,tenantId:e.tenantId,error:us(e,"no-auth-event")}}(e,n,r);await function(e,t){return vc()._set(_c(e),t)}(e,s);const o=await hc(e,s,t);return async function(e,t,n){const{cordova:r}=uc();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(us(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),io()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await dc(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=uc(),n={};ao()?n.iosBundleId=t.packageName:io()?n.androidPackageName=t.packageName:cs(e,"operation-not-supported-in-this-environment"),await Ol(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=uc(),s=setTimeout((async()=>{await mc(e),t.onEvent(Sc())}),500),o=async n=>{clearTimeout(s);const r=await mc(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=gc(r,n.url)),t.onEvent(i||Sc())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");uc().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Sc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:us("no-auth-event")}}function kc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return!("file:"!==kc()&&"ionic:"!==kc()&&"capacitor:"!==kc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return ot()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/Edge\/\d+/.test(e)}(e)}function Tc(){try{const e=self.localStorage,t=Ua();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ic()||lt()}catch(e){return Cc()&&lt()}return!1}function Cc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function xc(){return("http:"===kc()||"https:"===kc()||it()||Ec())&&!(st()||rt())&&Tc()&&!Cc()}function Nc(){return Ec()&&"undefined"!==typeof document}const Pc={LOCAL:"local",NONE:"none",SESSION:"session"},Ac=ps,Rc="persistence";async function Dc(e){await e._initializationPromise;const t=Oc(),n=Js(Rc,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Oc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Mc=ps;class Lc{constructor(){this.browserResolver=Gs(nc),this.cordovaResolver=Gs(bc),this.underlyingResolver=null,this._redirectPersistence=La,this._completeRedirectFn=Nl,this._overrideRedirectResult=kl}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Nc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mc(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Nc()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Fc(e){return e.unwrap()}function Uc(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new zc(e,function(e,t){var n;const r=jt(e),i=t;return ps(t.customData.operationType,r,"argument-error"),ps(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),xa._fromError(r,i)}(e,t))}else if(r){const e=jc(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function jc(e){const{_tokenResponse:t}=e instanceof ut?e.customData:e;if(!t)return null;if(!(e instanceof ut)&&"temporaryProof"in t&&"phoneNumber"in t)return ul.credentialFromResult(e);const n=t.providerId;if(!n||n===$i.PASSWORD)return null;let r;switch(n){case $i.GOOGLE:r=zo;break;case $i.FACEBOOK:r=Bo;break;case $i.GITHUB:r=qo;break;case $i.TWITTER:r=Ko;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Wo._create(n,o):Do._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Vo(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ut?r.credentialFromError(e):r.credentialFromResult(e)}function Vc(e,t){return t.catch((t=>{throw t instanceof ut&&Uc(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,jc(r)),additionalUserInfo:Ta(e),user:qc.getOrCreate(n)};var r}))}async function Bc(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Vc(e,n.confirm(t))}}class zc{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Vc(Fc(this.auth),this.resolver.resolveSignIn(e))}}class qc{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=jt(e);return Pa.has(t)||Pa.set(t,Na._fromUser(t)),Pa.get(t)}(e)}static getOrCreate(e){return qc.USER_MAP.has(e)||qc.USER_MAP.set(e,new qc(e)),qc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Vc(this.auth,sa(this._delegate,e))}async linkWithPhoneNumber(e,t){return Bc(this.auth,async function(e,t,n){const r=jt(e);await ta(!1,r,"phone");const i=await cl(r.auth,t,jt(n));return new ll(i,(e=>sa(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Vc(this.auth,async function(e,t,n){const r=jt(e);ds(r.auth,t,Uo);const i=hl(r.auth,n);return new vl(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Lc))}async linkWithRedirect(e){return await Dc(po(this.auth)),xl(this._delegate,e,Lc)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Vc(this.auth,oa(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Bc(this.auth,async function(e,t,n){const r=jt(e),i=await cl(r.auth,t,jt(n));return new ll(i,(e=>oa(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Vc(this.auth,async function(e,t,n){const r=jt(e);ds(r.auth,t,Uo);const i=hl(r.auth,n);return new vl(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Lc))}async reauthenticateWithRedirect(e){return await Dc(po(this.auth)),Cl(this._delegate,e,Lc)}sendEmailVerification(e){return ga(this._delegate,e)}async unlink(e){return await Zo(this._delegate,e),this}updateEmail(e){return function(e,t){return _a(jt(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return _a(jt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await ea(jt(e),t)}(this._delegate,e)}updateProfile(e){return va(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ya(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qc.USER_MAP=new WeakMap;const Wc=ps;class Hc{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Wc(n,"invalid-api-key",{appName:e.name}),Wc(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Lc:void 0;this._delegate=t.initialize({options:{persistence:Yc(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(is),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qc.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){bo(this._delegate,e,t)}applyActionCode(e){return fa(this._delegate,e)}checkActionCode(e){return pa(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Io(jt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&da(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Vc(this._delegate,async function(e,t,n){const r=po(e),i=wo(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yo),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&da(e),t})),o=await Go._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return ma(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Lo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Wc(xc(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await po(e)._initializationPromise,Nl(e,t,!1)}(this._delegate,Lc);return e?Vc(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){po(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Kc(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Kc(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=po(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ps(t.handleCodeInApp,r,"argument-error"),t&&ha(r,e,t)}(i,n),await wo(r,i,"getOobCode",Po)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=po(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ha(r,i,n),await wo(r,i,"getOobCode",No)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Ac(Object.values(Pc).includes(t),e,"invalid-persistence-type"),st()?Ac(t!==Pc.SESSION,e,"unsupported-persistence-type"):rt()?Ac(t===Pc.NONE,e,"unsupported-persistence-type"):Cc()?Ac(t===Pc.NONE||t===Pc.LOCAL&&lt(),e,"unsupported-persistence-type"):Ac(t===Pc.NONE||Tc(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Pc.SESSION:t=La;break;case Pc.LOCAL:t=await Gs(Ja)._isAvailable()?Ja:Oa;break;case Pc.NONE:t=$s;break;default:return cs("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Vc(this._delegate,async function(e){var t;const n=po(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Go({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Yo(n,{returnSecureToken:!0}),i=await Go._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Vc(this._delegate,ia(this._delegate,e))}signInWithCustomToken(e){return Vc(this._delegate,aa(this._delegate,e))}signInWithEmailAndPassword(e,t){return Vc(this._delegate,function(e,t,n){return ia(jt(e),Fo.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&da(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Vc(this._delegate,async function(e,t,n){const r=jt(e),i=Fo.credentialWithLink(t,n||ys());return ps(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ia(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Bc(this._delegate,async function(e,t,n){const r=po(e),i=await cl(r,t,jt(n));return new ll(i,(e=>ia(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Wc(xc(),this._delegate,"operation-not-supported-in-this-environment"),Vc(this._delegate,async function(e,t,n){const r=po(e);ds(e,t,Uo);const i=hl(r,n);return new vl(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Lc))}async signInWithRedirect(e){return Wc(xc(),this._delegate,"operation-not-supported-in-this-environment"),await Dc(this._delegate),Tl(this._delegate,e,Lc)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await pa(jt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Kc(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&qc.getOrCreate(e)),error:t,complete:n}}function Yc(e,t){const n=function(e,t){const n=Oc();if(!n)return[];const r=Js(Rc,e,t);switch(n.getItem(r)){case Pc.NONE:return[$s];case Pc.LOCAL:return[Ja,La];case Pc.SESSION:return[La];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ja)||n.push(Ja),"undefined"!==typeof window)for(const r of[Oa,La])n.includes(r)||n.push(r);return n.includes($s)||n.push($s),n}Hc.Persistence=Pc;class Gc{constructor(){this.providerId="phone",this._delegate=new ul(Fc(Gi.auth()))}static credential(e,t){return ul.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Gc.PHONE_SIGN_IN_METHOD=ul.PHONE_SIGN_IN_METHOD,Gc.PROVIDER_ID=ul.PROVIDER_ID;const Qc=ps;class $c{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gi.app();var r;Qc(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new al(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Vt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Hc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ji,PASSWORD_RESET:Xi,RECOVER_EMAIL:Zi,REVERT_SECOND_FACTOR_ADDITION:es,VERIFY_AND_CHANGE_EMAIL:ts,VERIFY_EMAIL:ns}},EmailAuthProvider:Fo,FacebookAuthProvider:Bo,GithubAuthProvider:qo,GoogleAuthProvider:zo,OAuthProvider:Vo,SAMLAuthProvider:Ho,PhoneAuthProvider:Gc,PhoneMultiFactorGenerator:sc,RecaptchaVerifier:$c,TwitterAuthProvider:Ko,Auth:Hc,AuthCredential:Eo,Error:ut}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.9")}(Gi);const Jc="@firebase/database",Xc="1.0.1";let Zc="";function eu(e){Zc=e}class tu{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ft(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class nu{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return gt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ru=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tu(t)}}catch(t){}return new nu},iu=ru("localStorage"),su=ru("sessionStorage"),ou=new $t("@firebase/database"),au=function(){let e=1;return function(){return e++}}(),lu=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Be(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new It;n.update(t);const r=n.digest();return We.encodeByteArray(r)},cu=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=cu.apply(null,n):e+="object"===typeof n?pt(n):n,e+=" "}return e};let uu=null,hu=!0;const du=function(e,t){Be(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ou.logLevel=Ht.VERBOSE,uu=ou.log.bind(ou),t&&su.set("logging_enabled",!0)):"function"===typeof e?uu=e:(uu=null,su.remove("logging_enabled"))},fu=function(){if(!0===hu&&(hu=!1,null===uu&&!0===su.get("logging_enabled")&&du(!0)),uu){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=cu.apply(null,t);uu(r)}},pu=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];fu(e,...n)}},mu=function(){const e="FIREBASE INTERNAL ERROR: "+cu(...arguments);ou.error(e)},gu=function(){const e="FIREBASE FATAL ERROR: ".concat(cu(...arguments));throw ou.error(e),new Error(e)},yu=function(){const e="FIREBASE WARNING: "+cu(...arguments);ou.warn(e)},vu=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},_u="[MIN_NAME]",wu="[MAX_NAME]",bu=function(e,t){if(e===t)return 0;if(e===_u||t===wu)return-1;if(t===_u||e===wu)return 1;{const n=Nu(e),r=Nu(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Su=function(e,t){return e===t?0:e<t?-1:1},ku=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+pt(t))},Eu=function(e){if("object"!==typeof e||null===e)return pt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=pt(t[r]),n+=":",n+=Eu(e[t[r]]);return n+="}",n},Iu=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Tu(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Cu=function(e){Be(!vu(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const xu=new RegExp("^-?(0*)\\d{1,10}$"),Nu=function(e){if(xu.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Pu=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw yu("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Au=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Ru{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){yu('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Du{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(fu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yu(e)}}class Ou{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ou.OWNER="owner";const Mu="5",Lu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fu="ac",Uu="websocket",ju="long_polling";class Vu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=iu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&iu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Bu(e,t,n){let r;if(Be("string"===typeof t,"typeof type must == string"),Be("object"===typeof n,"typeof params must == object"),t===Uu)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ju)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Tu(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class zu{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;gt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Qe(void 0,this.counters_)}}const qu={},Wu={};function Hu(e){const t=e.toString();return qu[t]||(qu[t]=new zu),qu[t]}class Ku{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Pu((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Yu="start";class Gu{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pu(e),this.stats_=Hu(t),this.urlFn=e=>(this.appCheckToken&&(e[Fu]=this.appCheckToken),Bu(t,ju,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ku(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(at()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qu((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Yu)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Yu]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Mu,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Fu]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Lu.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gu.forceAllow_=!0}static forceDisallow(){Gu.forceDisallow_=!0}static isAvailable(){return!at()&&(!!Gu.forceAllow_||!Gu.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=pt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ke(t),r=Iu(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(at())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=pt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Qu{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,at())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=au(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Qu.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){fu("frame writing exception"),i.stack&&fu(i.stack),fu(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||fu("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){at()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{fu("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let $u=null;"undefined"!==typeof MozWebSocket?$u=MozWebSocket:"undefined"!==typeof WebSocket&&($u=WebSocket);class Ju{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pu(this.connId),this.stats_=Hu(t),this.connURL=Ju.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Mu,!at()&&"undefined"!==typeof location&&location.hostname&&Lu.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Fu]=r),i&&(s.p=i),Bu(e,Uu,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,iu.set("previous_websocket_failure",!0);try{let e;if(at()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Mu,"/").concat(Zc,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new $u(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Ju.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==$u&&!Ju.forceDisallow_}static previouslyFailed(){return iu.isInMemoryStorage||!0===iu.get("previous_websocket_failure")}markConnectionHealthy(){iu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=ft(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Be(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=pt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Iu(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ju.responsesRequiredToBeHealthy=2,Ju.healthyTimeout=3e4;class Xu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Gu,Ju]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Ju&&Ju.isAvailable();let n=t&&!Ju.previouslyFailed();if(e.webSocketOnly&&(t||yu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Ju];else{const e=this.transports_=[];for(const t of Xu.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xu.globalTransportInitialized_=!1;class Zu{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pu("c:"+this.id+":"),this.transportManager_=new Xu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Au((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ku("t",e),n=ku("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ku("t",e),n=ku("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ku("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?mu("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mu("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Mu!==n&&yu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Au((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Au((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(iu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class eh{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class th{constructor(e){this.allowedEvents_=e,this.listeners_={},Be(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Be(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class nh extends th{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||nt()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new nh}getInitialEvent(e){return Be("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const rh=32,ih=768;class sh{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function oh(){return new sh("")}function ah(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function lh(e){return e.pieces_.length-e.pieceNum_}function ch(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new sh(e.pieces_,t)}function uh(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function hh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function dh(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new sh(t,0)}function fh(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof sh)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new sh(n,0)}function ph(e){return e.pieceNum_>=e.pieces_.length}function mh(e,t){const n=ah(e),r=ah(t);if(null===n)return t;if(n===r)return mh(ch(e),ch(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function gh(e,t){const n=hh(e,0),r=hh(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=bu(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function yh(e,t){if(lh(e)!==lh(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function vh(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(lh(e)>lh(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class _h{constructor(e,t){this.errorPrefix_=t,this.parts_=hh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Dt(this.parts_[n]);wh(this)}}function wh(e){if(e.byteLength_>ih)throw new Error(e.errorPrefix_+"has a key path longer than "+ih+" bytes ("+e.byteLength_+").");if(e.parts_.length>rh)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rh+") or object contains a cycle "+bh(e))}function bh(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Sh extends th{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Sh}getInitialEvent(e){return Be("visible"===e,"Unknown event type: "+e),[this.visible_]}}const kh=1e3;class Eh extends eh{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Eh.nextPersistentConnectionId_++,this.log_=pu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!at())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sh.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&nh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(pt(i)),Be(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ze,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Be(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Eh.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&gt(e,"w")){const n=yt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();yu("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=mt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=mt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):mu("Unrecognized action received from server: "+pt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Be(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=kh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kh),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Eh.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Be(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?fu("getToken() completed but was canceled"):(fu("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Zu(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{yu(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(mu){this.log_("Failed to get token: "+mu),s||(this.repoInfo_.nodeAdmin&&yu(mu),a())}}}interrupt(e){fu("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fu("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vt(this.interruptReasons_)&&(this.reconnectDelay_=kh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Eu(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new sh(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){fu("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){fu("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";at()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Zc.replace(/\./g,"-")]=1,nt()?e["framework.cordova"]=1:st()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nh.getInstance().currentlyOnline();return vt(this.interruptReasons_)&&e}}Eh.nextPersistentConnectionId_=0,Eh.nextConnectionId_=0;class Ih{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ih(e,t)}}class Th{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ih(_u,e),r=new Ih(_u,t);return 0!==this.compare(n,r)}minPost(){return Ih.MIN}}let Ch;class xh extends Th{static get __EMPTY_NODE(){return Ch}static set __EMPTY_NODE(e){Ch=e}compare(e,t){return bu(e.name,t.name)}isDefinedOn(e){throw ze("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ih.MIN}maxPost(){return new Ih(wu,Ch)}makePost(e,t){return Be("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ih(e,Ch)}toString(){return".key"}}const Nh=new xh;class Ph{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ah{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ah.RED,this.left=null!=r?r:Rh.EMPTY_NODE,this.right=null!=i?i:Rh.EMPTY_NODE}copy(e,t,n,r,i){return new Ah(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rh.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Rh.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ah.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ah.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ah.RED=!0,Ah.BLACK=!1;class Rh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rh.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Rh(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ah.BLACK,null,null))}remove(e){return new Rh(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ah.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ph(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ph(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ph(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ph(this.root_,null,this.comparator_,!0,e)}}function Dh(e,t){return bu(e.name,t.name)}function Oh(e,t){return bu(e,t)}let Mh;Rh.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ah(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Lh=function(e){return"number"===typeof e?"number:"+Cu(e):"string:"+e},Fh=function(e){if(e.isLeafNode()){const t=e.val();Be("string"===typeof t||"number"===typeof t||"object"===typeof t&&gt(t,".sv"),"Priority must be a string or number.")}else Be(e===Mh||e.isEmpty(),"priority of unexpected type.");Be(e===Mh||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Uh,jh,Vh;class Bh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bh.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Be(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fh(this.priorityNode_)}static set __childrenNodeConstructor(e){Uh=e}static get __childrenNodeConstructor(){return Uh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Bh(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Bh.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ph(e)?this:".priority"===ah(e)?this.priorityNode_:Bh.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Bh.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ah(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Be(".priority"!==n||1===lh(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Bh.__childrenNodeConstructor.EMPTY_NODE.updateChild(ch(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Lh(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Cu(this.value_):this.value_,this.lazyHash_=lu(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Bh.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Bh.__childrenNodeConstructor?-1:(Be(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Bh.VALUE_TYPE_ORDER.indexOf(t),i=Bh.VALUE_TYPE_ORDER.indexOf(n);return Be(r>=0,"Unknown leaf type: "+t),Be(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Bh.VALUE_TYPE_ORDER=["object","boolean","number","string"];const zh=new class extends Th{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?bu(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ih.MIN}maxPost(){return new Ih(wu,new Bh("[PRIORITY-POST]",Vh))}makePost(e,t){const n=jh(e);return new Ih(t,new Bh("[PRIORITY-POST]",n))}toString(){return".priority"}},qh=Math.log(2);class Wh{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/qh,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hh=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Ah(a,o.node,Ah.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Ah(a,o.node,Ah.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Ah(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Ah.BLACK):(a(r,Ah.BLACK),a(r,Ah.RED))}return s}(new Wh(e.length));return new Rh(r||t,s)};let Kh;const Yh={};class Gh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Be(Yh&&zh,"ChildrenNode.ts has not been loaded"),Kh=Kh||new Gh({".priority":Yh},{".priority":zh}),Kh}get(e){const t=yt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Rh?t:null}hasIndex(e){return gt(this.indexSet_,e.toString())}addIndex(e,t){Be(e!==Nh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Ih.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Hh(n,e.getCompare()):Yh;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new Gh(c,l)}addToIndexes(e,t){const n=_t(this.indexes_,((n,r)=>{const i=yt(this.indexSet_,r);if(Be(i,"Missing index implementation for "+r),n===Yh){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Ih.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Hh(n,i.getCompare())}return Yh}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Ih(e.name,r))),i.insert(e,e.node)}}));return new Gh(n,this.indexSet_)}removeFromIndexes(e,t){const n=_t(this.indexes_,(n=>{if(n===Yh)return n;{const r=t.get(e.name);return r?n.remove(new Ih(e.name,r)):n}}));return new Gh(n,this.indexSet_)}}let Qh;class $h{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Fh(this.priorityNode_),this.children_.isEmpty()&&Be(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qh||(Qh=new $h(new Rh(Oh),null,Gh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qh}updatePriority(e){return this.children_.isEmpty()?this:new $h(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Qh:t}}getChild(e){const t=ah(e);return null===t?this:this.getImmediateChild(t).getChild(ch(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Be(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ih(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Qh:this.priorityNode_;return new $h(r,s,i)}}updateChild(e,t){const n=ah(e);if(null===n)return t;{Be(".priority"!==ah(e)||1===lh(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(ch(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(zh,((s,o)=>{t[s]=o.val(e),n++,i&&$h.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Lh(this.getPriority().val())+":"),this.forEachChild(zh,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":lu(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ih(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ih(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ih(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ih.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ih.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Jh?-1:0}withIndex(e){if(e===Nh||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new $h(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Nh||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(zh),n=t.getIterator(zh);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Nh?null:this.indexMap_.get(e.toString())}}$h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Jh=new class extends $h{constructor(){super(new Rh(Oh),$h.EMPTY_NODE,Gh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $h.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ih,{MIN:{value:new Ih(_u,$h.EMPTY_NODE)},MAX:{value:new Ih(wu,Jh)}}),xh.__EMPTY_NODE=$h.EMPTY_NODE,Bh.__childrenNodeConstructor=$h,Mh=Jh,function(e){Vh=e}(Jh);const Xh=!0;function Zh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return $h.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Be(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Bh(e,Zh(t))}if(e instanceof Array||!Xh){let n=$h.EMPTY_NODE;return Tu(e,((t,r)=>{if(gt(e,t)&&"."!==t.substring(0,1)){const e=Zh(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Zh(t))}{const n=[];let r=!1;if(Tu(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Zh(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ih(e,i)))}})),0===n.length)return $h.EMPTY_NODE;const i=Hh(n,Dh,(e=>e.name),Oh);if(r){const e=Hh(n,zh.getCompare());return new $h(i,Zh(t),new Gh({".priority":e},{".priority":zh}))}return new $h(i,Zh(t),Gh.Default)}}!function(e){jh=e}(Zh);class ed extends Th{constructor(e){super(),this.indexPath_=e,Be(!ph(e)&&".priority"!==ah(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?bu(e.name,t.name):i}makePost(e,t){const n=Zh(e),r=$h.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ih(t,r)}maxPost(){const e=$h.EMPTY_NODE.updateChild(this.indexPath_,Jh);return new Ih(wu,e)}toString(){return hh(this.indexPath_,0).join("/")}}const td=new class extends Th{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?bu(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ih.MIN}maxPost(){return Ih.MAX}makePost(e,t){const n=Zh(e);return new Ih(t,n)}toString(){return".value"}};function nd(e){return{type:"value",snapshotNode:e}}function rd(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function id(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function sd(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class od{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Be(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(id(t,o)):Be(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(rd(t,n)):s.trackChildChange(sd(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(zh,((e,r)=>{t.hasChild(e)||n.trackChildChange(id(e,r))})),t.isLeafNode()||t.forEachChild(zh,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(sd(t,r,i))}else n.trackChildChange(rd(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$h.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ad{constructor(e){this.indexedFilter_=new od(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ad.getStartPost_(e),this.endPost_=ad.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Ih(t,n))||(n=$h.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=$h.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority($h.EMPTY_NODE);const i=this;return t.forEachChild(zh,((e,t)=>{i.matches(new Ih(e,t))||(r=r.updateImmediateChild(e,$h.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ld{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ad(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Ih(t,n))||(n=$h.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=$h.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=$h.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority($h.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,$h.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Be(o.numChildren()===this.limit_,"");const a=new Ih(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(sd(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(id(t,e));const n=o.updateImmediateChild(t,$h.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(rd(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(id(l.name,l.node)),i.trackChildChange(rd(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,$h.EMPTY_NODE)):e}}class cd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zh}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Be(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Be(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_u}hasEnd(){return this.endSet_}getIndexEndValue(){return Be(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Be(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Be(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zh}copy(){const e=new cd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ud(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function hd(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function dd(e,t){const n=e.copy();return n.index_=t,n}function fd(e){const t={};if(e.isDefault())return t;let n;if(e.index_===zh?n="$priority":e.index_===td?n="$value":e.index_===Nh?n="$key":(Be(e.index_ instanceof ed,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=pt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=pt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+pt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=pt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+pt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function pd(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==zh&&(t.i=e.index_.toString()),t}class md extends eh{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=pu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Be(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=md.getListenId_(e,n),o={};this.listens_[s]=o;const a=fd(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),yt(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=md.getListenId_(e,t);delete this.listens_[n]}get(e){const t=fd(e._queryParams),n=e._path.toString(),r=new Ze;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+St(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=ft(a.responseText)}catch(e){yu("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&yu("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class gd{constructor(){this.rootNode_=$h.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yd(){return{value:null,children:new Map}}function vd(e,t,n){if(ph(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ah(t);e.children.has(r)||e.children.set(r,yd());vd(e.children.get(r),t=ch(t),n)}}function _d(e,t){if(ph(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(zh,((t,n)=>{vd(e,new sh(t),n)})),_d(e,t)}}if(e.children.size>0){const n=ah(t);if(t=ch(t),e.children.has(n)){_d(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function wd(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{wd(r,new sh(t.toString()+"/"+e),n)}))}class bd{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Tu(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Sd{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bd(e);const n=1e4+2e4*Math.random();Au(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Tu(e,((e,r)=>{r>0&&gt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Au(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var kd;function Ed(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(kd||(kd={}));class Id{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=kd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ph(this.path)){if(null!=this.affectedTree.value)return Be(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new sh(e));return new Id(oh(),t,this.revert)}}return Be(ah(this.path)===e,"operationForChild called for unrelated child."),new Id(ch(this.path),this.affectedTree,this.revert)}}class Td{constructor(e,t){this.source=e,this.path=t,this.type=kd.LISTEN_COMPLETE}operationForChild(e){return ph(this.path)?new Td(this.source,oh()):new Td(this.source,ch(this.path))}}class Cd{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=kd.OVERWRITE}operationForChild(e){return ph(this.path)?new Cd(this.source,oh(),this.snap.getImmediateChild(e)):new Cd(this.source,ch(this.path),this.snap)}}class xd{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=kd.MERGE}operationForChild(e){if(ph(this.path)){const t=this.children.subtree(new sh(e));return t.isEmpty()?null:t.value?new Cd(this.source,oh(),t.value):new xd(this.source,oh(),t)}return Be(ah(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xd(this.source,ch(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nd{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ph(e))return this.isFullyInitialized()&&!this.filtered_;const t=ah(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Pd{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ad(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw ze("Should only compare child_ events.");const r=new Ih(t.childName,t.snapshotNode),i=new Ih(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Rd(e,t){return{eventCache:e,serverCache:t}}function Dd(e,t,n,r){return Rd(new Nd(t,n,r),e.serverCache)}function Od(e,t,n,r){return Rd(e.eventCache,new Nd(t,n,r))}function Md(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ld(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Fd;class Ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Fd||(Fd=new Rh(Su)),Fd);this.value=e,this.children=t}static fromObject(e){let t=new Ud(null);return Tu(e,((e,n)=>{t=t.set(new sh(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:oh(),value:this.value};if(ph(e))return null;{const n=ah(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(ch(e),t);if(null!=i){return{path:fh(new sh(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(ph(e))return this;{const t=ah(e),n=this.children.get(t);return null!==n?n.subtree(ch(e)):new Ud(null)}}set(e,t){if(ph(e))return new Ud(t,this.children);{const n=ah(e),r=(this.children.get(n)||new Ud(null)).set(ch(e),t),i=this.children.insert(n,r);return new Ud(this.value,i)}}remove(e){if(ph(e))return this.children.isEmpty()?new Ud(null):new Ud(null,this.children);{const t=ah(e),n=this.children.get(t);if(n){const r=n.remove(ch(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Ud(null):new Ud(this.value,i)}return this}}get(e){if(ph(e))return this.value;{const t=ah(e),n=this.children.get(t);return n?n.get(ch(e)):null}}setTree(e,t){if(ph(e))return t;{const n=ah(e),r=(this.children.get(n)||new Ud(null)).setTree(ch(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ud(this.value,i)}}fold(e){return this.fold_(oh(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(fh(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,oh(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(ph(e))return null;{const r=ah(e),i=this.children.get(r);return i?i.findOnPath_(ch(e),fh(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,oh(),t)}foreachOnPath_(e,t,n){if(ph(e))return this;{this.value&&n(t,this.value);const r=ah(e),i=this.children.get(r);return i?i.foreachOnPath_(ch(e),fh(t,r),n):new Ud(null)}}foreach(e){this.foreach_(oh(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(fh(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class jd{constructor(e){this.writeTree_=e}static empty(){return new jd(new Ud(null))}}function Vd(e,t,n){if(ph(t))return new jd(new Ud(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=mh(i,t);return s=s.updateChild(o,n),new jd(e.writeTree_.set(i,s))}{const r=new Ud(n),i=e.writeTree_.setTree(t,r);return new jd(i)}}}function Bd(e,t,n){let r=e;return Tu(n,((e,n)=>{r=Vd(r,fh(t,e),n)})),r}function zd(e,t){if(ph(t))return jd.empty();{const n=e.writeTree_.setTree(t,new Ud(null));return new jd(n)}}function qd(e,t){return null!=Wd(e,t)}function Wd(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(mh(n.path,t)):null}function Hd(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(zh,((e,n)=>{t.push(new Ih(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ih(e,n.value))})),t}function Kd(e,t){if(ph(t))return e;{const n=Wd(e,t);return new jd(null!=n?new Ud(n):e.writeTree_.subtree(t))}}function Yd(e){return e.writeTree_.isEmpty()}function Gd(e,t){return Qd(oh(),e.writeTree_,t)}function Qd(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Be(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Qd(fh(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(fh(e,".priority"),r)),n}}function $d(e,t){return uf(t,e)}function Jd(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Be(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Xd(t,r.path)?i=!1:vh(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=ef(e.allWrites,Zd,oh()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=zd(e.visibleWrites,r.path);else{Tu(r.children,(t=>{e.visibleWrites=zd(e.visibleWrites,fh(r.path,t))}))}return!0}return!1}function Xd(e,t){if(e.snap)return vh(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&vh(fh(e.path,n),t))return!0;return!1}function Zd(e){return e.visible}function ef(e,t,n){let r=jd.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)vh(n,e)?(t=mh(n,e),r=Vd(r,t,s.snap)):vh(e,n)&&(t=mh(e,n),r=Vd(r,oh(),s.snap.getChild(t)));else{if(!s.children)throw ze("WriteRecord should have .snap or .children");if(vh(n,e))t=mh(n,e),r=Bd(r,t,s.children);else if(vh(e,n))if(t=mh(e,n),ph(t))r=Bd(r,oh(),s.children);else{const e=yt(s.children,ah(t));if(e){const n=e.getChild(ch(t));r=Vd(r,oh(),n)}}}}}return r}function tf(e,t,n,r,i){if(r||i){const s=Kd(e.visibleWrites,t);if(!i&&Yd(s))return n;if(i||null!=n||qd(s,oh())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(vh(e.path,t)||vh(t,e.path))};return Gd(ef(e.allWrites,s,t),n||$h.EMPTY_NODE)}return null}{const r=Wd(e.visibleWrites,t);if(null!=r)return r;{const r=Kd(e.visibleWrites,t);if(Yd(r))return n;if(null!=n||qd(r,oh())){return Gd(r,n||$h.EMPTY_NODE)}return null}}}function nf(e,t,n,r){return tf(e.writeTree,e.treePath,t,n,r)}function rf(e,t){return function(e,t,n){let r=$h.EMPTY_NODE;const i=Wd(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(zh,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Kd(e.visibleWrites,t);return n.forEachChild(zh,((e,t)=>{const n=Gd(Kd(i,new sh(e)),t);r=r.updateImmediateChild(e,n)})),Hd(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Hd(Kd(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function sf(e,t,n,r){return function(e,t,n,r,i){Be(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=fh(t,n);if(qd(e.visibleWrites,s))return null;{const t=Kd(e.visibleWrites,s);return Yd(t)?i.getChild(n):Gd(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function of(e,t){return function(e,t){return Wd(e.visibleWrites,t)}(e.writeTree,fh(e.treePath,t))}function af(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Kd(e.visibleWrites,t),c=Wd(l,oh());if(null!=c)a=c;else{if(null==n)return[];a=Gd(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function lf(e,t,n){return function(e,t,n,r){const i=fh(t,n),s=Wd(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Gd(Kd(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function cf(e,t){return uf(fh(e.treePath,t),e.writeTree)}function uf(e,t){return{treePath:e,writeTree:t}}class hf{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Be("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Be(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,sd(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,id(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,rd(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ze("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,sd(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const df=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ff{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Nd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lf(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ld(this.viewCache_),i=af(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function pf(e,t,n,r,i){const s=new hf;let o,a;if(n.type===kd.OVERWRITE){const l=n;l.source.fromUser?o=yf(e,t,l.path,l.snap,r,i,s):(Be(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!ph(l.path),o=gf(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===kd.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=fh(n,r);vf(t,ah(c))&&(a=yf(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=fh(n,r);vf(t,ah(c))||(a=yf(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Be(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=wf(e,t,l.path,l.children,r,i,a,s))}else if(n.type===kd.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=of(r,n))return t;{const a=new ff(r,t,i),l=t.eventCache.getNode();let c;if(ph(n)||".priority"===ah(n)){let n;if(t.serverCache.isFullyInitialized())n=nf(r,Ld(t));else{const e=t.serverCache.getNode();Be(e instanceof $h,"serverChildren would be complete if leaf node"),n=rf(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=ah(n);let u=lf(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,ch(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,$h.EMPTY_NODE,ch(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=nf(r,Ld(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=of(r,oh()),Dd(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=of(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(ph(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gf(e,t,n,l.getNode().getChild(n),i,s,a,o);if(ph(n)){let r=new Ud(null);return l.getNode().forEachChild(Nh,((e,t)=>{r=r.set(new sh(e),t)})),wf(e,t,n,r,i,s,a,o)}return t}{let c=new Ud(null);return r.foreach(((e,t)=>{const r=fh(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),wf(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==kd.LISTEN_COMPLETE)throw ze("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Od(t,s.getNode(),s.isFullyInitialized()||ph(n),s.isFiltered());return mf(e,o,n,r,df,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Md(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(nd(Md(t)))}}(t,o,l),{viewCache:o,changes:l}}function mf(e,t,n,r,i,s){const o=t.eventCache;if(null!=of(r,n))return t;{let a,l;if(ph(n))if(Be(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ld(t),i=rf(r,n instanceof $h?n:$h.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=nf(r,Ld(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=ah(n);if(".priority"===c){Be(1===lh(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=sf(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=ch(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=sf(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=lf(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Dd(t,a,o.isFullyInitialized()||ph(n),e.filter.filtersNodes())}}function gf(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(ph(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ah(n);if(!l.isCompleteForPath(n)&&lh(n)>1)return t;const i=ch(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,df,null)}const h=Od(t,c,l.isFullyInitialized()||ph(n),u.filtersNodes());return mf(e,h,n,i,new ff(i,h,s),a)}function yf(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new ff(i,t,s);if(ph(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Dd(t,c,!0,e.filter.filtersNodes());else{const i=ah(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Dd(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=ch(n),c=a.getNode().getImmediateChild(i);let h;if(ph(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===uh(s)&&e.getChild(dh(s)).isEmpty()?e:e.updateChild(s,r):$h.EMPTY_NODE}if(c.equals(h))l=t;else{l=Dd(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function vf(e,t){return e.eventCache.isCompleteForChild(t)}function _f(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function wf(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=ph(n)?r:new Ud(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=_f(0,t.serverCache.getNode().getImmediateChild(n),r);c=gf(e,c,new sh(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=_f(0,t.serverCache.getNode().getImmediateChild(n),r);c=gf(e,c,new sh(n),l,i,s,o,a)}})),c}class bf{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new od(n.getIndex()),i=(s=n).loadsAllData()?new od(s.getIndex()):s.hasLimit()?new ld(s):new ad(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode($h.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode($h.EMPTY_NODE,a.getNode(),null),u=new Nd(l,o.isFullyInitialized(),r.filtersNodes()),h=new Nd(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Rd(h,u),this.eventGenerator_=new Pd(this.query_)}get query(){return this.query_}}function Sf(e,t){const n=Ld(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ph(t)&&!n.getImmediateChild(ah(t)).isEmpty())?n.getChild(t):null}function kf(e){return 0===e.eventRegistrations_.length}function Ef(e,t,n){const r=[];if(n){Be(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function If(e,t,n,r){t.type===kd.MERGE&&null!==t.source.queryId&&(Be(Ld(e.viewCache_),"We should always have a full cache before handling merges"),Be(Md(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=pf(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Be(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Be(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Be(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Tf(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Tf(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ad(e,i,"child_removed",t,r,n),Ad(e,i,"child_added",t,r,n),Ad(e,i,"child_moved",s,r,n),Ad(e,i,"child_changed",t,r,n),Ad(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Cf,xf;class Nf{constructor(){this.views=new Map}}function Pf(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Be(null!=s,"SyncTree gave us an op for an invalid query."),If(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(If(s,t,n,r));return i}}function Af(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=nf(n,i?r:null),s=!1;e?s=!0:r instanceof $h?(e=rf(n,r),s=!1):(e=$h.EMPTY_NODE,s=!1);const o=Rd(new Nd(e,s,!1),new Nd(r,i,!1));return new bf(t,o)}return o}function Rf(e,t,n,r,i,s){const o=Af(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(zh,((e,t)=>{r.push(rd(e,t))}));return n.isFullyInitialized()&&r.push(nd(n.getNode())),Tf(e,r,n.getNode(),t)}(o,n)}function Df(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=Uf(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(Ef(c,n,r)),kf(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(Ef(t,n,r)),kf(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!Uf(e)&&s.push(new(Be(Cf,"Reference.ts has not been loaded"),Cf)(t._repo,t._path)),{removed:s,events:o}}function Of(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Mf(e,t){let n=null;for(const r of e.views.values())n=n||Sf(r,t);return n}function Lf(e,t){if(t._queryParams.loadsAllData())return jf(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Ff(e,t){return null!=Lf(e,t)}function Uf(e){return null!=jf(e)}function jf(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Vf=1;class Bf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ud(null),this.pendingWriteTree_={visibleWrites:jd.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zf(e,t,n,r,i){return function(e,t,n,r,i){Be(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Vd(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Jf(e,new Cd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function qf(e,t,n,r){!function(e,t,n,r){Be(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Bd(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Ud.fromObject(n);return Jf(e,new xd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Wf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Jd(e.pendingWriteTree_,t)){let t=new Ud(null);return null!=r.snap?t=t.set(oh(),!0):Tu(r.children,(e=>{t=t.set(new sh(e),!0)})),Jf(e,new Id(r.path,t,n))}return[]}function Hf(e,t,n){return Jf(e,new Cd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Kf(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Ff(o,t))){const l=Df(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Uf(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Uf(t)){return[jf(t)]}{let e=[];return t&&(e=Of(t)),Tu(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=ep(e,r);e.listenProvider_.startListening(op(i),tp(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(op(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(np(t));e.listenProvider_.stopListening(op(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=np(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Yf(e,t,n,r){const i=rp(e,r);if(null!=i){const r=ip(i),s=r.path,o=r.queryId,a=mh(s,t);return sp(e,s,new Cd(Ed(o),a,n))}return[]}function Gf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=mh(e,i);s=s||Mf(t,n),o=o||Uf(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||Uf(l),s=s||Mf(l,oh())):(l=new Nf,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=$h.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Mf(t,oh());n&&(s=s.updateImmediateChild(e,n))}))}const c=Ff(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=np(t);Be(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Vf++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Rf(l,t,n,$d(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=Lf(l,t);u=u.concat(function(e,t,n){const r=t._path,i=tp(e,t),s=ep(e,n),o=e.listenProvider_.startListening(op(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Be(!Uf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!ph(e)&&t&&Uf(t))return[jf(t).query];{let e=[];return t&&(e=e.concat(Of(t).map((e=>e.query)))),Tu(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(op(r),tp(e,r))}}return o}(e,t,n))}return u}function Qf(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Mf(n,mh(e,t));if(r)return r}));return tf(r,t,i,n,!0)}function $f(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=mh(e,n);r=r||Mf(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Mf(i,oh()):(i=new Nf,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Nd(r,!0,!1):null;return function(e){return Md(e.viewCache_)}(Af(i,t,$d(e.pendingWriteTree_,t._path),s?o.getNode():$h.EMPTY_NODE,s))}function Jf(e,t){return Xf(t,e.syncPointTree_,null,$d(e.pendingWriteTree_,oh()))}function Xf(e,t,n,r){if(ph(e.path))return Zf(e,t,n,r);{const i=t.get(oh());null==n&&null!=i&&(n=Mf(i,oh()));let s=[];const o=ah(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=cf(r,o);s=s.concat(Xf(a,l,e,t))}return i&&(s=s.concat(Pf(i,e,r,n))),s}}function Zf(e,t,n,r){const i=t.get(oh());null==n&&null!=i&&(n=Mf(i,oh()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=cf(r,t),l=e.operationForChild(t);l&&(s=s.concat(Zf(l,i,o,a)))})),i&&(s=s.concat(Pf(i,e,r,n))),s}function ep(e,t){const n=t.query,r=tp(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||$h.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=rp(e,n);if(r){const n=ip(r),i=n.path,s=n.queryId,o=mh(i,t);return sp(e,i,new Td(Ed(s),o))}return[]}(e,n._path,r):function(e,t){return Jf(e,new Td({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Kf(e,n,null,r)}}}}function tp(e,t){const n=np(t);return e.queryToTagMap.get(n)}function np(e){return e._path.toString()+"$"+e._queryIdentifier}function rp(e,t){return e.tagToQueryMap.get(t)}function ip(e){const t=e.indexOf("$");return Be(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new sh(e.substr(0,t))}}function sp(e,t,n){const r=e.syncPointTree_.get(t);Be(r,"Missing sync point for query tag that we're tracking");return Pf(r,n,$d(e.pendingWriteTree_,t),null)}function op(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Be(xf,"Reference.ts has not been loaded"),xf)(e._repo,e._path):e}class ap{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ap(t)}node(){return this.node_}}class lp{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=fh(this.path_,e);return new lp(this.syncTree_,t)}node(){return Qf(this.syncTree_,this.path_)}}const cp=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},up=function(e,t,n){return e&&"object"===typeof e?(Be(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?hp(e[".sv"],t,n):"object"===typeof e[".sv"]?dp(e[".sv"],t):void Be(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},hp=function(e,t,n){if("timestamp"===e)return n.timestamp;Be(!1,"Unexpected server value: "+e)},dp=function(e,t,n){e.hasOwnProperty("increment")||Be(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Be(!1,"Unexpected increment value: "+r);const i=t.node();if(Be(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},fp=function(e,t,n,r){return mp(t,new lp(n,e),r)},pp=function(e,t,n){return mp(e,new ap(t),n)};function mp(e,t,n){const r=e.getPriority().val(),i=up(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=up(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Bh(s,Zh(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Bh(i))),r.forEachChild(zh,((e,r)=>{const i=mp(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class gp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function yp(e,t){let n=t instanceof sh?t:new sh(t),r=e,i=ah(n);for(;null!==i;){const e=yt(r.node.children,i)||{children:{},childCount:0};r=new gp(i,r,e),n=ch(n),i=ah(n)}return r}function vp(e){return e.node.value}function _p(e,t){e.node.value=t,Ep(e)}function wp(e){return e.node.childCount>0}function bp(e,t){Tu(e.node.children,((n,r)=>{t(new gp(n,e,r))}))}function Sp(e,t,n,r){n&&!r&&t(e),bp(e,(e=>{Sp(e,t,!0,r)})),n&&r&&t(e)}function kp(e){return new sh(null===e.parent?e.name:kp(e.parent)+"/"+e.name)}function Ep(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===vp(e)&&!wp(e)}(n),i=gt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ep(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ep(e))}(e.parent,e.name,e)}const Ip=/[\[\].#$\/\u0000-\u001F\u007F]/,Tp=/[\[\].#$\u0000-\u001F\u007F]/,Cp=10485760,xp=function(e){return"string"===typeof e&&0!==e.length&&!Ip.test(e)},Np=function(e){return"string"===typeof e&&0!==e.length&&!Tp.test(e)},Pp=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!vu(e)||e&&"object"===typeof e&&gt(e,".sv")},Ap=function(e,t,n,r){r&&void 0===t||Rp(Pt(e,"value"),t,n)},Rp=function(e,t,n){const r=n instanceof sh?new _h(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+bh(r));if("function"===typeof t)throw new Error(e+"contains a function "+bh(r)+" with contents = "+t.toString());if(vu(t))throw new Error(e+"contains "+t.toString()+" "+bh(r));if("string"===typeof t&&t.length>Cp/3&&Dt(t)>Cp)throw new Error(e+"contains a string greater than "+Cp+" utf8 bytes "+bh(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Tu(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!xp(t)))throw new Error(e+" contains an invalid key ("+t+") "+bh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Dt(t),wh(e)}(r,t),Rp(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Dt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+bh(r)+" in addition to actual children.")}},Dp=function(e,t,n,r){if(r&&void 0===t)return;const i=Pt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Tu(t,((e,t)=>{const r=new sh(e);if(Rp(i,t,fh(n,r)),".priority"===uh(r)&&!Pp(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=hh(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!xp(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(gh);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&vh(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Op=function(e,t,n){if(!n||void 0!==t){if(vu(t))throw new Error(Pt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pp(t))throw new Error(Pt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mp=function(e,t,n,r){if((!r||void 0!==n)&&!xp(n))throw new Error(Pt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lp=function(e,t,n,r){if((!r||void 0!==n)&&!Np(n))throw new Error(Pt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fp=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lp(e,t,n,r)},Up=function(e,t){if(".info"===ah(t))throw new Error(e+" failed = Can't modify data under /.info/")},jp=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!xp(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Np(e)}(n))throw new Error(Pt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Vp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bp(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||yh(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function zp(e,t,n){Bp(e,n),Wp(e,(e=>yh(e,t)))}function qp(e,t,n){Bp(e,n),Wp(e,(e=>vh(e,t)||vh(t,e)))}function Wp(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Hp(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Hp(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();uu&&fu("event: "+n.toString()),Pu(r)}}}const Kp="repo_interrupt",Yp=25;class Gp{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yd(),this.transactionQueueTree_=new gp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qp(e,t,n){if(e.stats_=Hu(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new md(e.repoInfo_,((t,n,r,i)=>{Xp(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Zp(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Eh(e.repoInfo_,t,((t,n,r,i)=>{Xp(e,t,n,r,i)}),(t=>{Zp(e,t)}),(t=>{!function(e,t){Tu(t,((t,n)=>{em(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Wu[n]||(Wu[n]=t()),Wu[n]}(e.repoInfo_,(()=>new Sd(e.stats_,e.server_))),e.infoData_=new gd,e.infoSyncTree_=new Bf({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Hf(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),em(e,"connected",!1),e.serverSyncTree_=new Bf({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);qp(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function $p(e){const t=e.infoData_.getNode(new sh(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Jp(e){return cp({timestamp:$p(e)})}function Xp(e,t,n,r,i){e.dataUpdateCount++;const s=new sh(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=_t(n,(e=>Zh(e)));o=function(e,t,n,r){const i=rp(e,r);if(i){const r=ip(i),s=r.path,o=r.queryId,a=mh(s,t),l=Ud.fromObject(n);return sp(e,s,new xd(Ed(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Zh(n);o=Yf(e.serverSyncTree_,s,t,i)}else if(r){const t=_t(n,(e=>Zh(e)));o=function(e,t,n){const r=Ud.fromObject(n);return Jf(e,new xd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Zh(n);o=Hf(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=hm(e,s)),qp(e.eventQueue_,a,o)}function Zp(e,t){em(e,"connected",t),!1===t&&function(e){am(e,"onDisconnectEvents");const t=Jp(e),n=yd();wd(e.onDisconnect_,oh(),((r,i)=>{const s=fp(r,i,e.serverSyncTree_,t);vd(n,r,s)}));let r=[];wd(n,oh(),((t,n)=>{r=r.concat(Hf(e.serverSyncTree_,t,n));const i=gm(e,t);hm(e,i)})),e.onDisconnect_=yd(),qp(e.eventQueue_,oh(),r)}(e)}function em(e,t,n){const r=new sh("/.info/"+t),i=Zh(n);e.infoData_.updateSnapshot(r,i);const s=Hf(e.infoSyncTree_,r,i);qp(e.eventQueue_,r,s)}function tm(e){return e.nextWriteId_++}function nm(e,t,n,r,i){am(e,"set",{path:t.toString(),value:n,priority:r});const s=Jp(e),o=Zh(n,r),a=Qf(e.serverSyncTree_,t),l=pp(o,a,s),c=tm(e),u=zf(e.serverSyncTree_,t,l,c,!0);Bp(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||yu("set at "+t+" failed: "+n);const o=Wf(e.serverSyncTree_,c,!s);qp(e.eventQueue_,t,o),lm(e,i,n,r)}));const h=gm(e,t);hm(e,h),qp(e.eventQueue_,h,[])}function rm(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&_d(e.onDisconnect_,t),lm(e,n,r,i)}))}function im(e,t,n,r){const i=Zh(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&vd(e.onDisconnect_,t,i),lm(e,r,n,s)}))}function sm(e,t,n){let r;r=".info"===ah(t._path)?Kf(e.infoSyncTree_,t,n):Kf(e.serverSyncTree_,t,n),zp(e.eventQueue_,t._path,r)}function om(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Kp)}function am(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];fu(t,...r)}function lm(e,t,n,r){t&&Pu((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function cm(e,t,n){return Qf(e.serverSyncTree_,t,n)||$h.EMPTY_NODE}function um(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||mm(e,t),vp(t)){const n=fm(e,t);Be(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=cm(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Be(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=mh(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{am(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Wf(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();mm(e,yp(e.transactionQueueTree_,t)),um(e,e.transactionQueueTree_),qp(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Pu(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{yu("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}hm(e,t)}}),o)}(e,kp(t),n)}else wp(t)&&bp(t,(t=>{um(e,t)}))}function hm(e,t){const n=dm(e,t),r=kp(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=mh(n,s.path);let u,h=!1;if(Be(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(Wf(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=Yp)h=!0,u="maxretry",i=i.concat(Wf(e.serverSyncTree_,s.currentWriteId,!0));else{const n=cm(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){Rp("transaction failed: Data returned ",r,s.path);let t=Zh(r);"object"===typeof r&&null!=r&&gt(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=Jp(e),c=pp(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=tm(e),o.splice(o.indexOf(a),1),i=i.concat(zf(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Wf(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(Wf(e.serverSyncTree_,s.currentWriteId,!0))}qp(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;mm(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Pu(r[l]);um(e,e.transactionQueueTree_)}(e,fm(e,n),r),r}function dm(e,t){let n,r=e.transactionQueueTree_;for(n=ah(t);null!==n&&void 0===vp(r);)r=yp(r,n),n=ah(t=ch(t));return r}function fm(e,t){const n=[];return pm(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function pm(e,t,n){const r=vp(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);bp(t,(t=>{pm(e,t,n)}))}function mm(e,t){const n=vp(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,_p(t,n.length>0?n:void 0)}bp(t,(t=>{mm(e,t)}))}function gm(e,t){const n=kp(dm(e,t)),r=yp(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{ym(e,t)})),ym(e,r),Sp(r,(t=>{ym(e,t)})),n}function ym(e,t){const n=vp(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Be(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Be(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Wf(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_p(t,void 0):n.length=s+1,qp(e.eventQueue_,kp(t),i);for(let e=0;e<r.length;e++)Pu(r[e])}}const vm=function(e,t){const n=_m(e),r=n.namespace;"firebase.com"===n.domain&&gu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||gu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Vu(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new sh(n.pathString)}},_m=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):yu("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},wm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bm=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=wm.charAt(n%64),n=Math.floor(n/64);Be(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=wm.charAt(t[i]);return Be(20===o.length,"nextPushId: Length should be 20."),o}}();class Sm{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}}class km{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Em{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Be(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Im{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Ze;return rm(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){Up("OnDisconnect.remove",this._path);const e=new Ze;return im(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){Up("OnDisconnect.set",this._path),Ap("OnDisconnect.set",e,this._path,!1);const t=new Ze;return im(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){Up("OnDisconnect.setWithPriority",this._path),Ap("OnDisconnect.setWithPriority",e,this._path,!1),Op("OnDisconnect.setWithPriority",t,!1);const n=new Ze;return function(e,t,n,r,i){const s=Zh(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&vd(e.onDisconnect_,t,s),lm(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){Up("OnDisconnect.update",this._path),Dp("OnDisconnect.update",e,this._path,!1);const t=new Ze;return function(e,t,n,r){if(vt(n))return fu("onDisconnect().update() called with empty data.  Don't do anything."),void lm(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&Tu(n,((n,r)=>{const i=Zh(r);vd(e.onDisconnect_,fh(t,n),i)})),lm(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Tm{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ph(this._path)?null:uh(this._path)}get ref(){return new Pm(this._repo,this._path)}get _queryIdentifier(){const e=pd(this._queryParams),t=Eu(e);return"{}"===t?"default":t}get _queryObject(){return pd(this._queryParams)}isEqual(e){if(!((e=jt(e))instanceof Tm))return!1;const t=this._repo===e._repo,n=yh(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function Cm(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function xm(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Nh){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==_u)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==wu)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===zh){if(null!=t&&!Pp(t)||null!=n&&!Pp(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Be(e.getIndex()instanceof ed||e.getIndex()===td,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Nm(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Pm extends Tm{constructor(e,t){super(e,t,new cd,!1)}get parent(){const e=dh(this._path);return null===e?null:new Pm(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Am{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new sh(e),n=Om(this.ref,e);return new Am(this._node.getChild(t),n,zh)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Am(n,Om(this.ref,t),zh))))}hasChild(e){const t=new sh(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Rm(e,t){return(e=jt(e))._checkNotDeleted("ref"),void 0!==t?Om(e._root,t):e._root}function Dm(e,t){(e=jt(e))._checkNotDeleted("refFromURL");const n=vm(t,e._repo.repoInfo_.nodeAdmin);jp("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||gu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Rm(e,n.path.toString())}function Om(e,t){return null===ah((e=jt(e))._path)?Fp("child","path",t,!1):Lp("child","path",t,!1),new Pm(e._repo,fh(e._path,t))}function Mm(e,t){e=jt(e),Up("set",e._path),Ap("set",t,e._path,!1);const n=new Ze;return nm(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Lm(e,t){Dp("update",t,e._path,!1);const n=new Ze;return function(e,t,n,r){am(e,"update",{path:t.toString(),value:n});let i=!0;const s=Jp(e),o={};if(Tu(n,((n,r)=>{i=!1,o[n]=fp(fh(t,n),Zh(r),e.serverSyncTree_,s)})),i)fu("update() called with empty data.  Don't do anything."),lm(0,r,"ok",void 0);else{const i=tm(e),s=qf(e.serverSyncTree_,t,o,i);Bp(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||yu("update at "+t+" failed: "+n);const a=Wf(e.serverSyncTree_,i,!o),l=a.length>0?hm(e,t):t;qp(e.eventQueue_,l,a),lm(0,r,n,s)})),Tu(n,(n=>{const r=gm(e,fh(t,n));hm(e,r)})),qp(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Fm(e){e=jt(e);const t=new Em((()=>{})),n=new Um(t);return function(e,t,n){const r=$f(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Zh(r).withIndex(t._queryParams.getIndex());let s;if(Gf(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Hf(e.serverSyncTree_,t._path,i);else{const n=tp(e.serverSyncTree_,t);s=Yf(e.serverSyncTree_,t._path,i,n)}return qp(e.eventQueue_,t._path,s),Kf(e.serverSyncTree_,t,n,null,!0),i}),(n=>(am(e,"get for query "+pt(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Am(t,new Pm(e._repo,e._path),e._queryParams.getIndex())))}class Um{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Sm("value",this,new Am(e.snapshotNode,new Pm(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new km(this,e,t):null}matches(e){return e instanceof Um&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class jm{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new km(this,e,t):null}createEvent(e,t){Be(null!=e.childName,"Child events should have a childName.");const n=Om(new Pm(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Sm(e.type,this,new Am(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof jm&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Vm(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{sm(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Em(n,s||void 0),a="value"===t?new Um(o):new jm(t,o);return function(e,t,n){let r;r=".info"===ah(t._path)?Gf(e.infoSyncTree_,t,n):Gf(e.serverSyncTree_,t,n),zp(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>sm(e._repo,e,a)}function Bm(e,t,n,r){return Vm(e,"value",t,n,r)}function zm(e,t,n,r){return Vm(e,"child_added",t,n,r)}function qm(e,t,n,r){return Vm(e,"child_changed",t,n,r)}function Wm(e,t,n,r){return Vm(e,"child_moved",t,n,r)}function Hm(e,t,n,r){return Vm(e,"child_removed",t,n,r)}function Km(e,t,n){let r=null;const i=n?new Em(n):null;"value"===t?r=new Um(i):t&&(r=new jm(t,i)),sm(e._repo,e,r)}class Ym{}class Gm extends Ym{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ap("endAt",this._value,e._path,!0);const t=hd(e._queryParams,this._value,this._key);if(Nm(t),xm(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tm(e._repo,e._path,t,e._orderByCalled)}}class Qm extends Ym{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ap("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===Nh||n?hd(e,t,n):hd(e,t,_u),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Nm(t),xm(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tm(e._repo,e._path,t,e._orderByCalled)}}class $m extends Ym{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ap("startAt",this._value,e._path,!0);const t=ud(e._queryParams,this._value,this._key);if(Nm(t),xm(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Tm(e._repo,e._path,t,e._orderByCalled)}}class Jm extends Ym{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ap("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===Nh||n?ud(e,t,n):ud(e,t,wu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Nm(t),xm(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Tm(e._repo,e._path,t,e._orderByCalled)}}class Xm extends Ym{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tm(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class Zm extends Ym{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tm(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class eg extends Ym{constructor(e){super(),this._path=e}_apply(e){Cm(e,"orderByChild");const t=new sh(this._path);if(ph(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new ed(t),r=dd(e._queryParams,n);return xm(r),new Tm(e._repo,e._path,r,!0)}}class tg extends Ym{_apply(e){Cm(e,"orderByKey");const t=dd(e._queryParams,Nh);return xm(t),new Tm(e._repo,e._path,t,!0)}}class ng extends Ym{_apply(e){Cm(e,"orderByPriority");const t=dd(e._queryParams,zh);return xm(t),new Tm(e._repo,e._path,t,!0)}}class rg extends Ym{_apply(e){Cm(e,"orderByValue");const t=dd(e._queryParams,td);return xm(t),new Tm(e._repo,e._path,t,!0)}}class ig extends Ym{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ap("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gm(this._value,this._key)._apply(new $m(this._value,this._key)._apply(e))}}function sg(e){let t=jt(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){Be(!Cf,"__referenceConstructor has already been defined"),Cf=e}(Pm),function(e){Be(!xf,"__referenceConstructor has already been defined"),xf=e}(Pm);const og="FIREBASE_DATABASE_EMULATOR_HOST",ag={};let lg=!1;function cg(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||gu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fu("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=vm(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[og]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=vm(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Ou(Ou.OWNER):new Du(e.name,e.options,t);jp("Invalid Firebase Database URL",l),ph(l.path)||gu("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=ag[t.name];i||(i={},ag[t.name]=i);let s=i[e.toURLString()];s&&gu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Gp(e,lg,n,r),i[e.toURLString()]=s,s}(c,e,u,new Ru(e.name,n));return new ug(h,e)}class ug{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Qp(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pm(this._repo,oh())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=ag[t];n&&n[e.key]===e||gu("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),om(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&gu("Cannot call "+e+" on a deleted database.")}}function hg(){Xu.IS_TRANSPORT_INITIALIZED&&yu("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function dg(){hg(),Gu.forceDisallow()}function fg(){hg(),Ju.forceDisallow(),Gu.forceAllow()}function pg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=jt(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&gu("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&gu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ou(Ou.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:et(r.mockUserToken,e.app.options.projectId);s=new Ou(t)}!function(e,t,n,r){e.repoInfo_=new Vu("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}function mg(e){var t;(e=jt(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Kp)}function gg(e,t){du(e,t)}const yg={".sv":"timestamp"};class vg{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function _g(e,t,n){var r;if(e=jt(e),Up("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new Ze,o=Bm(e,(()=>{}));return function(e,t,n,r,i,s){am(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:au(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=cm(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Rp("transaction failed: Data returned ",l,o.path),o.status=0;const n=yp(e.transactionQueueTree_,t),r=vp(n)||[];let i;r.push(o),_p(n,r),"object"===typeof l&&null!==l&&gt(l,".priority")?(i=yt(l,".priority"),Be(Pp(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(Qf(e.serverSyncTree_,t)||$h.EMPTY_NODE).getPriority().val();const s=Jp(e),c=Zh(l,i),u=pp(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=tm(e);const h=zf(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);qp(e.eventQueue_,t,h),um(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new Am(r,new Pm(e._repo,e._path),zh),s.resolve(new vg(n,i)))}),o,i),s.promise}Eh.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Eh.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){eu(An),In(new Vt("database",((e,t)=>{let{instanceIdentifier:n}=t;return cg(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ln(Jc,Xc,e),Ln(Jc,Xc,"esm2017")}();const wg=new $t("@firebase/database-compat"),bg=function(e){const t="FIREBASE WARNING: "+e;wg.warn(t)};class Sg{constructor(e){this._delegate=e}cancel(e){Nt("OnDisconnect.cancel",0,1,arguments.length),At("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){Nt("OnDisconnect.remove",0,1,arguments.length),At("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){Nt("OnDisconnect.set",1,2,arguments.length),At("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Nt("OnDisconnect.setWithPriority",2,3,arguments.length),At("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(Nt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,bg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}At("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class kg{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return Nt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Eg{constructor(e,t){this._database=e,this._delegate=t}val(){return Nt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Nt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Nt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Nt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Nt("DataSnapshot.child",0,1,arguments.length),e=String(e),Lp("DataSnapshot.child","path",e,!1),new Eg(this._database,this._delegate.child(e))}hasChild(e){return Nt("DataSnapshot.hasChild",1,1,arguments.length),Lp("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Nt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Nt("DataSnapshot.forEach",1,1,arguments.length),At("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new Eg(this._database,t))))}hasChildren(){return Nt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Nt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Nt("DataSnapshot.ref",0,0,arguments.length),new Tg(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ig{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;Nt("Query.on",2,4,arguments.length),At("Query.on","callback",t,!1);const s=Ig.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new Eg(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return Bm(this._delegate,o,a),t;case"child_added":return zm(this._delegate,o,a),t;case"child_removed":return Hm(this._delegate,o,a),t;case"child_changed":return qm(this._delegate,o,a),t;case"child_moved":return Wm(this._delegate,o,a),t;default:throw new Error(Pt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(Nt("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Pt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),At("Query.off","callback",t,!0),Rt("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,Km(this._delegate,e,r)}else Km(this._delegate,e)}get(){return Fm(this._delegate).then((e=>new Eg(this.database,e)))}once(e,t,n,r){Nt("Query.once",1,4,arguments.length),At("Query.once","callback",t,!0);const i=Ig.getCancelAndContextArgs_("Query.once",n,r),s=new Ze,o=(e,n)=>{const r=new Eg(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":Bm(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":zm(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":Hm(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":qm(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":Wm(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(Pt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return Nt("Query.limitToFirst",1,1,arguments.length),new Ig(this.database,sg(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Xm(e)}(e)))}limitToLast(e){return Nt("Query.limitToLast",1,1,arguments.length),new Ig(this.database,sg(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Zm(e)}(e)))}orderByChild(e){return Nt("Query.orderByChild",1,1,arguments.length),new Ig(this.database,sg(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lp("orderByChild","path",e,!1),new eg(e)}(e)))}orderByKey(){return Nt("Query.orderByKey",0,0,arguments.length),new Ig(this.database,sg(this._delegate,new tg))}orderByPriority(){return Nt("Query.orderByPriority",0,0,arguments.length),new Ig(this.database,sg(this._delegate,new ng))}orderByValue(){return Nt("Query.orderByValue",0,0,arguments.length),new Ig(this.database,sg(this._delegate,new rg))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Nt("Query.startAt",0,2,arguments.length),new Ig(this.database,sg(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Mp("startAt","key",t,!0),new $m(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Nt("Query.startAfter",0,2,arguments.length),new Ig(this.database,sg(this._delegate,function(e,t){return Mp("startAfter","key",t,!0),new Jm(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Nt("Query.endAt",0,2,arguments.length),new Ig(this.database,sg(this._delegate,function(e,t){return Mp("endAt","key",t,!0),new Gm(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Nt("Query.endBefore",0,2,arguments.length),new Ig(this.database,sg(this._delegate,function(e,t){return Mp("endBefore","key",t,!0),new Qm(e,t)}(e,t)))}equalTo(e,t){return Nt("Query.equalTo",1,2,arguments.length),new Ig(this.database,sg(this._delegate,function(e,t){return Mp("equalTo","key",t,!0),new ig(e,t)}(e,t)))}toString(){return Nt("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Nt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Nt("Query.isEqual",1,1,arguments.length),!(e instanceof Ig)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,At(e,"cancel",r.cancel,!0),r.context=n,Rt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Pt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Tg(this.database,new Pm(this._delegate._repo,this._delegate._path))}}class Tg extends Ig{constructor(e,t){super(e,new Tm(t._repo,t._path,new cd,!1)),this.database=e,this._delegate=t}getKey(){return Nt("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Nt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new Tg(this.database,Om(this._delegate,e))}getParent(){Nt("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Tg(this.database,e):null}getRoot(){return Nt("Reference.root",0,0,arguments.length),new Tg(this.database,this._delegate.root)}set(e,t){Nt("Reference.set",1,2,arguments.length),At("Reference.set","onComplete",t,!0);const n=Mm(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(Nt("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,bg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Up("Reference.update",this._delegate._path),At("Reference.update","onComplete",t,!0);const n=Lm(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){Nt("Reference.setWithPriority",2,3,arguments.length),At("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(Up("setWithPriority",e._path),Ap("setWithPriority",t,e._path,!1),Op("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new Ze;return nm(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){Nt("Reference.remove",0,1,arguments.length),At("Reference.remove","onComplete",e,!0);const t=function(e){return Up("remove",e._path),Mm(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){Nt("Reference.transaction",1,3,arguments.length),At("Reference.transaction","transactionUpdate",e,!1),At("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Pt(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=_g(this._delegate,e,{applyLocally:n}).then((e=>new kg(e.committed,new Eg(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){Nt("Reference.setPriority",1,2,arguments.length),At("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=jt(e),Up("setPriority",e._path),Op("setPriority",t,!1);const n=new Ze;return nm(e._repo,fh(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){Nt("Reference.push",0,2,arguments.length),At("Reference.push","onComplete",t,!0);const n=function(e,t){e=jt(e),Up("push",e._path),Ap("push",t,e._path,!0);const n=$p(e._repo),r=bm(n),i=Om(e,r),s=Om(e,r);let o;return o=null!=t?Mm(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new Tg(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new Tg(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return Up("Reference.onDisconnect",this._delegate._path),new Sg(new Im(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Cg{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:dg,forceLongPolling:fg}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pg(this._delegate,e,t,n)}ref(e){if(Nt("database.ref",0,1,arguments.length),e instanceof Tg){const t=Dm(this._delegate,e.toString());return new Tg(this,t)}{const t=Rm(this._delegate,e);return new Tg(this,t)}}refFromURL(e){Nt("database.refFromURL",1,1,arguments.length);const t=Dm(this._delegate,e);return new Tg(this,t)}goOffline(){return Nt("database.goOffline",0,0,arguments.length),function(e){(e=jt(e))._checkNotDeleted("goOffline"),om(e._repo)}(this._delegate)}goOnline(){return Nt("database.goOnline",0,0,arguments.length),mg(this._delegate)}}Cg.ServerValue={TIMESTAMP:yg,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var xg=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:s,namespace:o,nodeAdmin:a=!1}=e;eu(r);const l=new qt("database-standalone"),c=new zt("auth-internal",l);let u;return c.setComponent(new Vt("auth-internal",(()=>i),"PRIVATE")),s&&(u=new zt("app-check-internal",l),u.setComponent(new Vt("app-check-internal",(()=>s),"PRIVATE"))),{instance:new Cg(cg(t,c,u,n,a),t),namespace:o}}});const Ng=Cg.ServerValue;!function(e){e.INTERNAL.registerComponent(new Vt("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Cg(i,r)}),"PUBLIC").setServiceProps({Reference:Tg,Query:Ig,Database:Cg,DataSnapshot:Eg,enableLogging:gg,INTERNAL:xg,ServerValue:Ng}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.1")}(Gi);var Pg,Ag="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Rg={},Dg=Dg||{},Og=Ag||self;function Mg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Lg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Fg="closure_uid_"+(1e9*Math.random()>>>0),Ug=0;function jg(e,t,n){return e.call.apply(e.bind,arguments)}function Vg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bg(e,t,n){return(Bg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jg:Vg).apply(null,arguments)}function zg(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qg(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Wg(){this.s=this.s,this.o=this.o}Wg.prototype.s=!1,Wg.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Fg)&&e[Fg]||(e[Fg]=++Ug))},Wg.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hg=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Kg(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Yg(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Mg(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Gg(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Gg.prototype.h=function(){this.defaultPrevented=!0};var Qg=function(){if(!Og.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Og.addEventListener("test",(()=>{}),t),Og.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function $g(e){return/^[\s\xa0]*$/.test(e)}function Jg(){var e=Og.navigator;return e&&(e=e.userAgent)?e:""}function Xg(e){return-1!=Jg().indexOf(e)}function Zg(e){return Zg[" "](e),e}Zg[" "]=function(){};var ey,ty,ny=Xg("Opera"),ry=Xg("Trident")||Xg("MSIE"),iy=Xg("Edge"),sy=iy||ry,oy=Xg("Gecko")&&!(-1!=Jg().toLowerCase().indexOf("webkit")&&!Xg("Edge"))&&!(Xg("Trident")||Xg("MSIE"))&&!Xg("Edge"),ay=-1!=Jg().toLowerCase().indexOf("webkit")&&!Xg("Edge");function ly(){var e=Og.document;return e?e.documentMode:void 0}e:{var cy="",uy=function(){var e=Jg();return oy?/rv:([^\);]+)(\)|;)/.exec(e):iy?/Edge\/([\d\.]+)/.exec(e):ry?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ay?/WebKit\/(\S+)/.exec(e):ny?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(uy&&(cy=uy?uy[1]:""),ry){var hy=ly();if(null!=hy&&hy>parseFloat(cy)){ey=String(hy);break e}}ey=cy}if(Og.document&&ry){var dy=ly();ty=dy||(parseInt(ey,10)||void 0)}else ty=void 0;var fy=ty;function py(e,t){if(Gg.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(oy){e:{try{Zg(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:my[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&py.$.h.call(this)}}qg(py,Gg);var my={2:"touch",3:"pen",4:"mouse"};py.prototype.h=function(){py.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var gy="closure_listenable_"+(1e6*Math.random()|0),yy=0;function vy(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++yy,this.fa=this.ia=!1}function _y(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function wy(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function by(e){const t={};for(const n in e)t[n]=e[n];return t}const Sy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ky(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Sy.length;t++)n=Sy[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ey(e){this.src=e,this.g={},this.h=0}function Iy(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Hg(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(_y(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ty(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Ey.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Ty(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new vy(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Cy="closure_lm_"+(1e6*Math.random()|0),xy={};function Ny(e,t,n,r,i){if(r&&r.once)return Ay(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ny(e,t[s],n,r,i);return null}return n=Uy(n),e&&e[gy]?e.O(t,n,Lg(r)?!!r.capture:!!r,i):Py(e,t,n,!1,r,i)}function Py(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Lg(i)?!!i.capture:!!i,a=Ly(e);if(a||(e[Cy]=a=new Ey(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=My;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qg||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oy(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ay(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ay(e,t[s],n,r,i);return null}return n=Uy(n),e&&e[gy]?e.P(t,n,Lg(r)?!!r.capture:!!r,i):Py(e,t,n,!0,r,i)}function Ry(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ry(e,t[s],n,r,i);else r=Lg(r)?!!r.capture:!!r,n=Uy(n),e&&e[gy]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ty(s=e.g[t],n,r,i))&&(_y(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ly(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ty(t,n,r,i)),(n=-1<e?t[e]:null)&&Dy(n))}function Dy(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[gy])Iy(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oy(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ly(t))?(Iy(n,e),0==n.h&&(n.src=null,t[Cy]=null)):_y(e)}}}function Oy(e){return e in xy?xy[e]:xy[e]="on"+e}function My(e,t){if(e.fa)e=!0;else{t=new py(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Dy(e),e=n.call(r,t)}return e}function Ly(e){return(e=e[Cy])instanceof Ey?e:null}var Fy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uy(e){return"function"===typeof e?e:(e[Fy]||(e[Fy]=function(t){return e.handleEvent(t)}),e[Fy])}function jy(){Wg.call(this),this.i=new Ey(this),this.S=this,this.J=null}function Vy(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Gg(t,e);else if(t instanceof Gg)t.target=t.target||e;else{var i=t;ky(t=new Gg(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=By(o,r,!0,t)&&i}if(i=By(o=t.g=e,r,!0,t)&&i,i=By(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=By(o=t.g=n[s],r,!1,t)&&i}function By(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Iy(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}qg(jy,Wg),jy.prototype[gy]=!0,jy.prototype.removeEventListener=function(e,t,n,r){Ry(this,e,t,n,r)},jy.prototype.N=function(){if(jy.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_y(n[r]);delete t.g[e],t.h--}}this.J=null},jy.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},jy.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zy=Og.JSON.stringify;function qy(){var e=$y;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Wy=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Hy),(e=>e.reset()));class Hy{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ky(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Yy(e){Og.setTimeout((()=>{throw e}),0)}let Gy,Qy=!1,$y=new class{constructor(){this.h=this.g=null}add(e,t){const n=Wy.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Jy=()=>{const e=Og.Promise.resolve(void 0);Gy=()=>{e.then(Xy)}};var Xy=()=>{for(var e;e=qy();){try{e.h.call(e.g)}catch(n){Yy(n)}var t=Wy;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Qy=!1};function Zy(e,t){jy.call(this),this.h=e||1,this.g=t||Og,this.j=Bg(this.qb,this),this.l=Date.now()}function ev(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function tv(e,t,n){if("function"===typeof e)n&&(e=Bg(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bg(e.handleEvent,e)}return 2147483647<Number(t)?-1:Og.setTimeout(e,t||0)}function nv(e){e.g=tv((()=>{e.g=null,e.i&&(e.i=!1,nv(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}qg(Zy,jy),(Pg=Zy.prototype).ga=!1,Pg.T=null,Pg.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vy(this,"tick"),this.ga&&(ev(this),this.start()))}},Pg.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pg.N=function(){Zy.$.N.call(this),ev(this),delete this.g};class rv extends Wg{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nv(this)}N(){super.N(),this.g&&(Og.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function iv(e){Wg.call(this),this.h=e,this.g={}}qg(iv,Wg);var sv=[];function ov(e,t,n,r){Array.isArray(n)||(n&&(sv[0]=n.toString()),n=sv);for(var i=0;i<n.length;i++){var s=Ny(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function av(e){wy(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Dy(e)}),e),e.g={}}function lv(){this.g=!0}function cv(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return zy(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}iv.prototype.N=function(){iv.$.N.call(this),av(this)},iv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lv.prototype.Ea=function(){this.g=!1},lv.prototype.info=function(){};var uv={},hv=null;function dv(){return hv=hv||new jy}function fv(e){Gg.call(this,uv.Ta,e)}function pv(e){const t=dv();Vy(t,new fv(t))}function mv(e,t){Gg.call(this,uv.STAT_EVENT,e),this.stat=t}function gv(e){const t=dv();Vy(t,new mv(t,e))}function yv(e,t){Gg.call(this,uv.Ua,e),this.size=t}function vv(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Og.setTimeout((function(){e()}),t)}uv.Ta="serverreachability",qg(fv,Gg),uv.STAT_EVENT="statevent",qg(mv,Gg),uv.Ua="timingevent",qg(yv,Gg);var _v={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},wv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bv(){}function Sv(e){return e.h||(e.h=e.i())}function kv(){}bv.prototype.h=null;var Ev,Iv={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tv(){Gg.call(this,"d")}function Cv(){Gg.call(this,"c")}function xv(){}function Nv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new iv(this),this.P=Av,e=sy?125:void 0,this.V=new Zy(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Pv}function Pv(){this.i=null,this.g="",this.h=!1}qg(Tv,Gg),qg(Cv,Gg),qg(xv,bv),xv.prototype.g=function(){return new XMLHttpRequest},xv.prototype.i=function(){return{}},Ev=new xv;var Av=45e3,Rv={},Dv={};function Ov(e,t,n){e.L=1,e.v=Zv(Gv(t)),e.s=n,e.S=!0,Mv(e,null)}function Mv(e,t){e.G=Date.now(),jv(e),e.A=Gv(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),d_(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Pv,e.g=fw(e.l,n?t:null,!e.s),0<e.O&&(e.M=new rv(Bg(e.Pa,e,e.g),e.O)),ov(e.U,e.g,"readystatechange",e.nb),t=e.I?by(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),pv(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Lv(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Fv(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Uv(e,n),r==Dv){4==t&&(e.o=4,gv(14),i=!1),cv(e.j,e.m,null,"[Incomplete Response]");break}if(r==Rv){e.o=4,gv(15),cv(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}cv(e.j,e.m,r,null),Wv(e,r)}Lv(e)&&r!=Dv&&r!=Rv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,gv(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),sw(t),t.M=!0,gv(11))):(cv(e.j,e.m,n,"[Invalid Chunked Response]"),qv(e),zv(e))}function Uv(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Dv:(n=Number(t.substring(n,r)),isNaN(n)?Rv:(r+=1)+n>t.length?Dv:(t=t.slice(r,r+n),e.C=r+n,t))}function jv(e){e.Y=Date.now()+e.P,Vv(e,e.P)}function Vv(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=vv(Bg(e.lb,e),t)}function Bv(e){e.B&&(Og.clearTimeout(e.B),e.B=null)}function zv(e){0==e.l.H||e.J||lw(e.l,e)}function qv(e){Bv(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ev(e.V),av(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Wv(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||__(n.i,e)))if(!e.K&&__(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;aw(n),J_(n)}iw(n),gv(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=vv(Bg(n.ib,n),6e3));if(1>=v_(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else uw(n,11)}else if((e.K||n.g==e)&&aw(n),!$g(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(w_(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Xv(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=dw(r,r.J?r.pa:null,r.Y),o.K){b_(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Bv(a),jv(a)),r.g=o}else rw(r);0<n.j.length&&Z_(n)}else"stop"!=c[0]&&"close"!=c[0]||uw(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?uw(n,7):$_(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}pv()}catch(c){}}function Hv(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mg(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mg(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Pg=Nv.prototype).setTimeout=function(e){this.P=e},Pg.nb=function(e){e=e.target;const t=this.M;t&&3==W_(e)?t.l():this.Pa(e)},Pg.Pa=function(e){try{if(e==this.g)e:{const u=W_(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||sy||this.g&&(this.h.h||this.g.ja()||H_(this.g)))){this.J||4!=u||7==t||pv(),Bv(this);var n=this.g.da();this.ca=n;t:if(Lv(this)){var r=H_(this.g);e="";var i=r.length,s=4==W_(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qv(this),zv(this);var o="";break t}this.h.i=new Og.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$g(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,gv(12),qv(this),zv(this);break e}cv(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wv(this,n)}this.S?(Fv(this,u,o),sy&&this.i&&3==u&&(ov(this.U,this.V,"tick",this.mb),this.V.start())):(cv(this.j,this.m,o,null),Wv(this,o)),4==u&&qv(this),this.i&&!this.J&&(4==u?lw(this.l,this):(this.i=!1,jv(this)))}else(function(e){const t={};e=(e.g&&2<=W_(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if($g(e[r]))continue;var n=Ky(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,gv(12)):(this.o=0,gv(13)),qv(this),zv(this)}}}catch(u){}},Pg.mb=function(){if(this.g){var e=W_(this.g),t=this.g.ja();this.C<t.length&&(Bv(this),Fv(this,e,t),this.i&&4!=e&&jv(this))}},Pg.cancel=function(){this.J=!0,qv(this)},Pg.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(pv(),gv(17)),qv(this),this.o=2,zv(this)):Vv(this,this.Y-e)};var Kv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yv(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Yv){this.h=e.h,Qv(this,e.j),this.s=e.s,this.g=e.g,$v(this,e.m),this.l=e.l;var t=e.i,n=new l_;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Jv(this,n),this.o=e.o}else e&&(t=String(e).match(Kv))?(this.h=!1,Qv(this,t[1]||"",!0),this.s=e_(t[2]||""),this.g=e_(t[3]||"",!0),$v(this,t[4]),this.l=e_(t[5]||"",!0),Jv(this,t[6]||"",!0),this.o=e_(t[7]||"")):(this.h=!1,this.i=new l_(null,this.h))}function Gv(e){return new Yv(e)}function Qv(e,t,n){e.j=n?e_(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $v(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jv(e,t,n){t instanceof l_?(e.i=t,function(e,t){t&&!e.j&&(c_(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(u_(this,t),d_(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=t_(t,o_)),e.i=new l_(t,e.h))}function Xv(e,t,n){e.i.set(t,n)}function Zv(e){return Xv(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function e_(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function t_(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,n_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function n_(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Yv.prototype.toString=function(){var e=[],t=this.j;t&&e.push(t_(t,r_,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(t_(t,r_,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(t_(n,"/"==n.charAt(0)?s_:i_,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",t_(n,a_)),e.join("")};var r_=/[#\/\?@]/g,i_=/[#\?:]/g,s_=/[#\?]/g,o_=/[#\?@]/g,a_=/#/g;function l_(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function c_(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function u_(e,t){c_(e),t=f_(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function h_(e,t){return c_(e),t=f_(e,t),e.g.has(t)}function d_(e,t,n){u_(e,t),0<n.length&&(e.i=null,e.g.set(f_(e,t),Kg(n)),e.h+=n.length)}function f_(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Pg=l_.prototype).add=function(e,t){c_(this),this.i=null,e=f_(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Pg.forEach=function(e,t){c_(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Pg.ta=function(){c_(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Pg.Z=function(e){c_(this);let t=[];if("string"===typeof e)h_(this,e)&&(t=t.concat(this.g.get(f_(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Pg.set=function(e,t){return c_(this),this.i=null,h_(this,e=f_(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pg.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Pg.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var p_=class{constructor(e,t){this.g=e,this.map=t}};function m_(e){this.l=e||g_,Og.PerformanceNavigationTiming?e=0<(e=Og.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Og.g&&Og.g.Ka&&Og.g.Ka()&&Og.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var g_=10;function y_(e){return!!e.h||!!e.g&&e.g.size>=e.j}function v_(e){return e.h?1:e.g?e.g.size:0}function __(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function w_(e,t){e.g?e.g.add(t):e.h=t}function b_(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function S_(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Kg(e.i)}m_.prototype.cancel=function(){if(this.i=S_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var k_,E_=class{stringify(e){return Og.JSON.stringify(e,void 0)}parse(e){return Og.JSON.parse(e,void 0)}};function I_(){this.g=new E_}function T_(e,t,n){const r=n||"";try{Hv(e,(function(e,n){let i=e;Lg(e)&&(i=zy(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function C_(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function x_(e){this.l=e.ec||null,this.j=e.ob||!1}function N_(e,t){jy.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=P_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qg(x_,bv),x_.prototype.g=function(){return new N_(this.l,this.j)},x_.prototype.i=(k_={},function(){return k_}),qg(N_,jy);var P_=0;function A_(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function R_(e){e.readyState=4,e.l=null,e.j=null,e.A=null,D_(e)}function D_(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pg=N_.prototype).open=function(e,t){if(this.readyState!=P_)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,D_(this)},Pg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Og).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Pg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,R_(this)),this.readyState=P_},Pg.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,D_(this)),this.g&&(this.readyState=3,D_(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Og.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;A_(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Pg.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?R_(this):D_(this),3==this.readyState&&A_(this)}},Pg.Za=function(e){this.g&&(this.response=this.responseText=e,R_(this))},Pg.Ya=function(e){this.g&&(this.response=e,R_(this))},Pg.ka=function(){this.g&&R_(this)},Pg.setRequestHeader=function(e,t){this.v.append(e,t)},Pg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pg.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(N_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var O_=Og.JSON.parse;function M_(e){jy.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L_,this.L=this.M=!1}qg(M_,jy);var L_="",F_=/^https?$/i,U_=["POST","PUT"];function j_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,V_(e),z_(e)}function V_(e){e.F||(e.F=!0,Vy(e,"complete"),Vy(e,"error"))}function B_(e){if(e.h&&"undefined"!=typeof Dg&&(!e.C[1]||4!=W_(e)||2!=e.da()))if(e.v&&4==W_(e))tv(e.La,0,e);else if(Vy(e,"readystatechange"),4==W_(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Kv)[1]||null;!i&&Og.self&&Og.self.location&&(i=Og.self.location.protocol.slice(0,-1)),r=!F_.test(i?i.toLowerCase():"")}n=r}if(n)Vy(e,"complete"),Vy(e,"success");else{e.m=6;try{var s=2<W_(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",V_(e)}}finally{z_(e)}}}function z_(e,t){if(e.g){q_(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Vy(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function q_(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Og.clearTimeout(e.A),e.A=null)}function W_(e){return e.g?e.g.readyState:0}function H_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case L_:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Xw){return null}}function K_(e){let t="";return wy(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Y_(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=K_(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Xv(e,t,n))}function G_(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Q_(e){this.Ga=0,this.j=[],this.l=new lv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=G_("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=G_("baseRetryDelayMs",5e3,e),this.hb=G_("retryDelaySeedMs",1e4,e),this.eb=G_("forwardChannelMaxRetries",2,e),this.xa=G_("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new m_(e&&e.concurrentRequestLimit),this.Ja=new I_,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $_(e){if(X_(e),3==e.H){var t=e.W++,n=Gv(e.I);if(Xv(n,"SID",e.K),Xv(n,"RID",t),Xv(n,"TYPE","terminate"),tw(e,n),(t=new Nv(e,e.l,t)).L=2,t.v=Zv(Gv(n)),n=!1,Og.navigator&&Og.navigator.sendBeacon)try{n=Og.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Og.Image&&((new Image).src=t.v,n=!0),n||(t.g=fw(t.l,null),t.g.ha(t.v)),t.G=Date.now(),jv(t)}hw(e)}function J_(e){e.g&&(sw(e),e.g.cancel(),e.g=null)}function X_(e){J_(e),e.u&&(Og.clearTimeout(e.u),e.u=null),aw(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Og.clearTimeout(e.m),e.m=null)}function Z_(e){if(!y_(e.i)&&!e.m){e.m=!0;var t=e.Na;Gy||Jy(),Qy||(Gy(),Qy=!0),$y.add(t,e),e.C=0}}function ew(e,t){var n;n=t?t.m:e.W++;const r=Gv(e.I);Xv(r,"SID",e.K),Xv(r,"RID",n),Xv(r,"AID",e.V),tw(e,r),e.o&&e.s&&Y_(r,e.o,e.s),n=new Nv(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=nw(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),w_(e.i,n),Ov(n,r,t)}function tw(e,t){e.na&&wy(e.na,(function(e,n){Xv(t,n,e)})),e.h&&Hv({},(function(e,n){Xv(t,n,e)}))}function nw(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Bg(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{T_(a,e,"req"+n+"_")}catch(mS){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function rw(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Gy||Jy(),Qy||(Gy(),Qy=!0),$y.add(t,e),e.A=0}}function iw(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=vv(Bg(e.Ma,e),cw(e,e.A)),e.A++,!0)}function sw(e){null!=e.B&&(Og.clearTimeout(e.B),e.B=null)}function ow(e){e.g=new Nv(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Gv(e.wa);Xv(t,"RID","rpc"),Xv(t,"SID",e.K),Xv(t,"AID",e.V),Xv(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Xv(t,"TO",e.qa),Xv(t,"TYPE","xmlhttp"),tw(e,t),e.o&&e.s&&Y_(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Zv(Gv(t)),n.s=null,n.S=!0,Mv(n,e)}function aw(e){null!=e.v&&(Og.clearTimeout(e.v),e.v=null)}function lw(e,t){var n=null;if(e.g==t){aw(e),sw(e),e.g=null;var r=2}else{if(!__(e.i,t))return;n=t.F,b_(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Vy(r=dv(),new yv(r,n)),Z_(e)}else rw(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(v_(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=vv(Bg(e.Na,e,t),cw(e,e.C)),e.C++,!0))}(e,t)||2==r&&iw(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:uw(e,5);break;case 4:uw(e,10);break;case 3:uw(e,6);break;default:uw(e,2)}}function cw(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function uw(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Bg(e.pb,e);n||(n=new Yv("//www.google.com/images/cleardot.gif"),Og.location&&"http"==Og.location.protocol||Qv(n,"https"),Zv(n)),function(e,t){const n=new lv;if(Og.Image){const r=new Image;r.onload=zg(C_,n,r,"TestLoadImage: loaded",!0,t),r.onerror=zg(C_,n,r,"TestLoadImage: error",!1,t),r.onabort=zg(C_,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=zg(C_,n,r,"TestLoadImage: timeout",!1,t),Og.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else gv(2);e.H=0,e.h&&e.h.za(t),hw(e),X_(e)}function hw(e){if(e.H=0,e.ma=[],e.h){const t=S_(e.i);0==t.length&&0==e.j.length||(Yg(e.ma,t),Yg(e.ma,e.j),e.i.i.length=0,Kg(e.j),e.j.length=0),e.h.ya()}}function dw(e,t,n){var r=n instanceof Yv?Gv(n):new Yv(n);if(""!=r.g)t&&(r.g=t+"."+r.g),$v(r,r.m);else{var i=Og.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Yv(null);r&&Qv(s,r),t&&(s.g=t),i&&$v(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Xv(r,n,t),Xv(r,"VER",e.ra),tw(e,r),r}function fw(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new M_(new x_({ob:!0})):new M_(e.va)).Oa(e.J),t}function pw(){}function mw(){if(ry&&!(10<=Number(fy)))throw Error("Environmental error: no available transport.")}function gw(e,t){jy.call(this),this.g=new Q_(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!$g(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$g(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _w(this)}function yw(e){Tv.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vw(){Cv.call(this),this.status=1}function _w(e){this.g=e}function ww(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bw(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Sw(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Pg=M_.prototype).Oa=function(e){this.M=e},Pg.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ev.g(),this.C=this.u?Sv(this.u):Sv(Ev),this.g.onreadystatechange=Bg(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void j_(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Og.FormData&&e instanceof Og.FormData,!(0<=Hg(U_,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{q_(this),0<this.B&&((this.L=function(e){return ry&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bg(this.ua,this)):this.A=tv(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){j_(this,s)}},Pg.ua=function(){"undefined"!=typeof Dg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vy(this,"timeout"),this.abort(8))},Pg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Vy(this,"complete"),Vy(this,"abort"),z_(this))},Pg.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),z_(this,!0)),M_.$.N.call(this)},Pg.La=function(){this.s||(this.G||this.v||this.l?B_(this):this.kb())},Pg.kb=function(){B_(this)},Pg.isActive=function(){return!!this.g},Pg.da=function(){try{return 2<W_(this)?this.g.status:-1}catch(k_){return-1}},Pg.ja=function(){try{return this.g?this.g.responseText:""}catch(k_){return""}},Pg.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),O_(t)}},Pg.Ia=function(){return this.m},Pg.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Pg=Q_.prototype).ra=8,Pg.H=1,Pg.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Nv(this,this.l,e);let s=this.s;if(this.U&&(s?(s=by(s),ky(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=nw(this,i,t),Xv(n=Gv(this.I),"RID",e),Xv(n,"CVER",22),this.F&&Xv(n,"X-HTTP-Session-Id",this.F),tw(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(K_(s)))+"&"+t:this.o&&Y_(n,this.o,s)),w_(this.i,i),this.bb&&Xv(n,"TYPE","init"),this.P?(Xv(n,"$req",t),Xv(n,"SID","null"),i.aa=!0,Ov(i,n,null)):Ov(i,n,t),this.H=2}}else 3==this.H&&(e?ew(this,e):0==this.j.length||y_(this.i)||ew(this))},Pg.Ma=function(){if(this.u=null,ow(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=vv(Bg(this.jb,this),e)}},Pg.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gv(10),J_(this),ow(this))},Pg.ib=function(){null!=this.v&&(this.v=null,J_(this),iw(this),gv(19))},Pg.pb=function(e){e?(this.l.info("Successfully pinged google.com"),gv(2)):(this.l.info("Failed to ping google.com"),gv(1))},Pg.isActive=function(){return!!this.h&&this.h.isActive(this)},(Pg=pw.prototype).Ba=function(){},Pg.Aa=function(){},Pg.za=function(){},Pg.ya=function(){},Pg.isActive=function(){return!0},Pg.Va=function(){},mw.prototype.g=function(e,t){return new gw(e,t)},qg(gw,jy),gw.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;gv(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=dw(e,null,e.Y),Z_(e)},gw.prototype.close=function(){$_(this.g)},gw.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=zy(e),e=n);t.j.push(new p_(t.fb++,e)),3==t.H&&Z_(t)},gw.prototype.N=function(){this.g.h=null,delete this.j,$_(this.g),delete this.g,gw.$.N.call(this)},qg(yw,Tv),qg(vw,Cv),qg(_w,pw),_w.prototype.Ba=function(){Vy(this.g,"a")},_w.prototype.Aa=function(e){Vy(this.g,new yw(e))},_w.prototype.za=function(e){Vy(this.g,new vw)},_w.prototype.ya=function(){Vy(this.g,"b")},qg(ww,(function(){this.blockSize=-1})),ww.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ww.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)bw(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){bw(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){bw(this,r),i=0;break}}this.h=i,this.i+=t},ww.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var kw={};function Ew(e){return-128<=e&&128>e?function(e,t){var n=kw;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Sw([0|e],0>e?-1:0)})):new Sw([0|e],0>e?-1:0)}function Iw(e){if(isNaN(e)||!isFinite(e))return Cw;if(0>e)return Rw(Iw(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Tw;return new Sw(t,0)}var Tw=4294967296,Cw=Ew(0),xw=Ew(1),Nw=Ew(16777216);function Pw(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Aw(e){return-1==e.h}function Rw(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Sw(n,~e.h).add(xw)}function Dw(e,t){return e.add(Rw(t))}function Ow(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Mw(e,t){this.g=e,this.h=t}function Lw(e,t){if(Pw(t))throw Error("division by zero");if(Pw(e))return new Mw(Cw,Cw);if(Aw(e))return t=Lw(Rw(e),t),new Mw(Rw(t.g),Rw(t.h));if(Aw(t))return t=Lw(e,Rw(t)),new Mw(Rw(t.g),t.h);if(30<e.g.length){if(Aw(e)||Aw(t))throw Error("slowDivide_ only works with positive integers.");for(var n=xw,r=t;0>=r.X(e);)n=Fw(n),r=Fw(r);var i=Uw(n,1),s=Uw(r,1);for(r=Uw(r,2),n=Uw(n,2);!Pw(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Uw(r,1),n=Uw(n,1)}return t=Dw(e,i.R(t)),new Mw(i,t)}for(i=Cw;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Iw(n)).R(t);Aw(o)||0<o.X(e);)o=(s=Iw(n-=r)).R(t);Pw(s)&&(s=xw),i=i.add(s),e=Dw(e,o)}return new Mw(i,e)}function Fw(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Sw(n,e.h)}function Uw(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Sw(i,e.h)}(Pg=Sw.prototype).ea=function(){if(Aw(this))return-Rw(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Tw+r)*t,t*=Tw}return e},Pg.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Pw(this))return"0";if(Aw(this))return"-"+Rw(this).toString(e);for(var t=Iw(Math.pow(e,6)),n=this,r="";;){var i=Lw(n,t).g,s=((0<(n=Dw(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Pw(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Pg.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Pg.X=function(e){return Aw(e=Dw(this,e))?-1:Pw(e)?0:1},Pg.abs=function(){return Aw(this)?Rw(this):this},Pg.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Sw(n,-2147483648&n[n.length-1]?-1:0)},Pg.R=function(e){if(Pw(this)||Pw(e))return Cw;if(Aw(this))return Aw(e)?Rw(this).R(Rw(e)):Rw(Rw(this).R(e));if(Aw(e))return Rw(this.R(Rw(e)));if(0>this.X(Nw)&&0>e.X(Nw))return Iw(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Ow(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ow(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ow(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ow(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Sw(n,0)},Pg.gb=function(e){return Lw(this,e).h},Pg.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Sw(n,this.h&e.h)},Pg.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Sw(n,this.h|e.h)},Pg.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Sw(n,this.h^e.h)},mw.prototype.createWebChannel=mw.prototype.g,gw.prototype.send=gw.prototype.u,gw.prototype.open=gw.prototype.m,gw.prototype.close=gw.prototype.close,_v.NO_ERROR=0,_v.TIMEOUT=8,_v.HTTP_ERROR=6,wv.COMPLETE="complete",kv.EventType=Iv,Iv.OPEN="a",Iv.CLOSE="b",Iv.ERROR="c",Iv.MESSAGE="d",jy.prototype.listen=jy.prototype.O,M_.prototype.listenOnce=M_.prototype.P,M_.prototype.getLastError=M_.prototype.Sa,M_.prototype.getLastErrorCode=M_.prototype.Ia,M_.prototype.getStatus=M_.prototype.da,M_.prototype.getResponseJson=M_.prototype.Wa,M_.prototype.getResponseText=M_.prototype.ja,M_.prototype.send=M_.prototype.ha,M_.prototype.setWithCredentials=M_.prototype.Oa,ww.prototype.digest=ww.prototype.l,ww.prototype.reset=ww.prototype.reset,ww.prototype.update=ww.prototype.j,Sw.prototype.add=Sw.prototype.add,Sw.prototype.multiply=Sw.prototype.R,Sw.prototype.modulo=Sw.prototype.gb,Sw.prototype.compare=Sw.prototype.X,Sw.prototype.toNumber=Sw.prototype.ea,Sw.prototype.toString=Sw.prototype.toString,Sw.prototype.getBits=Sw.prototype.D,Sw.fromNumber=Iw,Sw.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Rw(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Iw(Math.pow(n,8)),i=Cw,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Iw(Math.pow(n,o)),i=i.R(o).add(Iw(a))):i=(i=i.R(r)).add(Iw(a))}return i};var jw=Rg.createWebChannelTransport=function(){return new mw},Vw=Rg.getStatEventTarget=function(){return dv()},Bw=Rg.ErrorCode=_v,zw=Rg.EventType=wv,qw=Rg.Event=uv,Ww=Rg.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hw=Rg.FetchXmlHttpFactory=x_,Kw=Rg.WebChannel=kv,Yw=Rg.XhrIo=M_,Gw=Rg.Md5=ww,Qw=Rg.Integer=Sw;const $w="@firebase/firestore";class Jw{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jw.UNAUTHENTICATED=new Jw(null),Jw.GOOGLE_CREDENTIALS=new Jw("google-credentials-uid"),Jw.FIRST_PARTY=new Jw("first-party-uid"),Jw.MOCK_USER=new Jw("mock-user");let Xw="10.5.2";const Zw=new $t("@firebase/firestore");function eb(){return Zw.logLevel}function tb(e){if(Zw.logLevel<=Ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ib);Zw.debug("Firestore (".concat(Xw,"): ").concat(e),...i)}}function nb(e){if(Zw.logLevel<=Ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ib);Zw.error("Firestore (".concat(Xw,"): ").concat(e),...i)}}function rb(e){if(Zw.logLevel<=Ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ib);Zw.warn("Firestore (".concat(Xw,"): ").concat(e),...i)}}function ib(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function sb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Xw,") INTERNAL ASSERTION FAILED: ")+e;throw nb(t),new Error(t)}function ob(e,t){e||sb()}function ab(e,t){return e}const lb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cb extends ut{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ub{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class hb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class db{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jw.UNAUTHENTICATED)))}shutdown(){}}class fb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pb{constructor(e){this.t=e,this.currentUser=Jw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ub;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ub,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{tb("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(tb("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ub)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(tb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ob("string"==typeof t.accessToken),new hb(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ob(null===e||"string"==typeof e),new Jw(e)}}class mb{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Jw.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gb{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new mb(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Jw.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&tb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,tb("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{tb("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):tb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ob("string"==typeof e.token),this.R=e.token,new yb(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _b(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class wb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=_b(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function bb(e,t){return e<t?-1:e>t?1:0}function Sb(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function kb(e){return e+"\0"}class Eb{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new cb(lb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new cb(lb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new cb(lb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new cb(lb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Eb.fromMillis(Date.now())}static fromDate(e){return Eb.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Eb(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bb(this.nanoseconds,e.nanoseconds):bb(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ib{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ib(e)}static min(){return new Ib(new Eb(0,0))}static max(){return new Ib(new Eb(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Tb{constructor(e,t,n){void 0===t?t=0:t>e.length&&sb(),void 0===n?n=e.length-t:n>e.length-t&&sb(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Tb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tb?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cb extends Tb{construct(e,t,n){return new Cb(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new cb(lb.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Cb(e)}static emptyPath(){return new Cb([])}}const xb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nb extends Tb{construct(e,t,n){return new Nb(e,t,n)}static isValidIdentifier(e){return xb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nb.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nb(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new cb(lb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new cb(lb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new cb(lb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new cb(lb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nb(t)}static emptyPath(){return new Nb([])}}class Pb{constructor(e){this.path=e}static fromPath(e){return new Pb(Cb.fromString(e))}static fromName(e){return new Pb(Cb.fromString(e).popFirst(5))}static empty(){return new Pb(Cb.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cb.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cb.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pb(new Cb(e.slice()))}}class Ab{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Rb(e){return e.fields.find((e=>2===e.kind))}function Db(e){return e.fields.filter((e=>2!==e.kind))}Ab.UNKNOWN_ID=-1;class Ob{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mb(0,Ub.min())}}function Lb(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ib.fromTimestamp(1e9===r?new Eb(n+1,0):new Eb(n,r));return new Ub(i,Pb.empty(),t)}function Fb(e){return new Ub(e.readTime,e.key,-1)}class Ub{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ub(Ib.min(),Pb.empty(),-1)}static max(){return new Ub(Ib.max(),Pb.empty(),-1)}}function jb(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Pb.comparator(e.documentKey,t.documentKey),0!==n?n:bb(e.largestBatchId,t.largestBatchId))}const Vb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zb(e){if(e.code!==lb.FAILED_PRECONDITION||e.message!==Vb)throw e;tb("LocalStore","Unexpectedly lost primary lease")}class qb{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qb(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof qb?t:qb.resolve(t)}catch(e){return qb.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):qb.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):qb.reject(t)}static resolve(e){return new qb(((t,n)=>{t(e)}))}static reject(e){return new qb(((t,n)=>{n(e)}))}static waitFor(e){return new qb(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=qb.resolve(!1);for(const n of e)t=t.next((e=>e?qb.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new qb(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new qb(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Wb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ub,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Yb(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Xb(t.target.error);this.V.reject(new Yb(e,n))}}static open(e,t,n,r){try{return new Wb(t,e.transaction(r,n))}catch(e){throw new Yb(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(tb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qb(t)}}class Hb{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Hb.S(tt())&&nb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tb("SimpleDb","Removing database:",e),$b(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!lt())return!1;if(Hb.C())return!0;const e=tt(),t=Hb.S(e),n=0<t&&t<10,r=Hb.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(tb("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Yb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new cb(lb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new cb(lb.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Yb(e,r))},r.onupgradeneeded=e=>{tb("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{tb("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Wb.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),qb.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(tb("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Kb{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return $b(this.k.delete())}}class Yb extends cb{constructor(e,t){super(lb.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Gb(e){return"IndexedDbTransactionError"===e.name}class Qb{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(tb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(tb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$b(n)}add(e){return tb("SimpleDb","ADD",this.store.name,e,e),$b(this.store.add(e))}get(e){return $b(this.store.get(e)).next((t=>(void 0===t&&(t=null),tb("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return tb("SimpleDb","DELETE",this.store.name,e),$b(this.store.delete(e))}count(){return tb("SimpleDb","COUNT",this.store.name),$b(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new qb(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new qb(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){tb("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new qb(((n,r)=>{t.onerror=e=>{const t=Xb(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new qb(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Kb(i),o=t(i.primaryKey,i.value,s);if(o instanceof qb){const e=o.catch((e=>(s.done(),qb.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>qb.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $b(e){return new qb(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Xb(e.target.error);n(t)}}))}let Jb=!1;function Xb(e){const t=Hb.S(tt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new cb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Jb||(Jb=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Zb{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){tb("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{tb("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){Gb(e)?tb("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await zb(e)}await this.ee(6e4)}))}}class eS{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return qb.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return tb("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(tb("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Fb(t);jb(r,n)>0&&(n=r)})),new Ub(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class tS{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function nS(e){return null==e}function rS(e){return 0===e&&1/e==-1/0}function iS(e){return"number"==typeof e&&Number.isInteger(e)&&!rS(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function sS(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=aS(t)),t=oS(e.get(n),t);return aS(t)}function oS(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function aS(e){return e+"\x01\x01"}function lS(e){const t=e.length;if(ob(t>=2),2===t)return ob("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Cb.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&sb(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:sb()}s=t+2}return new Cb(r)}tS._e=-1;const cS=["userId","batchId"];function uS(e,t){return[e,sS(t)]}function hS(e,t,n){return[e,sS(t),n]}const dS={},fS=["prefixPath","collectionGroup","readTime","documentId"],pS=["prefixPath","collectionGroup","documentId"],mS=["collectionGroup","readTime","prefixPath","documentId"],gS=["canonicalId","targetId"],yS=["targetId","path"],vS=["path","targetId"],_S=["collectionId","parent"],wS=["indexId","uid"],bS=["uid","sequenceNumber"],SS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kS=["indexId","uid","orderedDocumentKey"],ES=["userId","collectionPath","documentId"],IS=["userId","collectionPath","largestBatchId"],TS=["userId","collectionGroup","largestBatchId"],CS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xS=[...CS,"documentOverlays"],NS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PS=NS,AS=[...PS,"indexConfiguration","indexState","indexEntries"];class RS extends Bb{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function DS(e,t){const n=ab(e);return Hb.M(n.ae,t)}function OS(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function MS(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function LS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class FS{constructor(e,t){this.comparator=e,this.root=t||jS.EMPTY}insert(e,t){return new FS(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jS.BLACK,null,null))}remove(e){return new FS(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jS.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new US(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new US(this.root,e,this.comparator,!1)}getReverseIterator(){return new US(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new US(this.root,e,this.comparator,!0)}}class US{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jS{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:jS.RED,this.left=null!=r?r:jS.EMPTY,this.right=null!=i?i:jS.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new jS(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jS.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return jS.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jS.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jS.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw sb();if(this.right.isRed())throw sb();const e=this.left.check();if(e!==this.right.check())throw sb();return e+(this.isRed()?0:1)}}jS.EMPTY=null,jS.RED=!0,jS.BLACK=!1,jS.EMPTY=new class{constructor(){this.size=0}get key(){throw sb()}get value(){throw sb()}get color(){throw sb()}get left(){throw sb()}get right(){throw sb()}copy(e,t,n,r,i){return this}insert(e,t,n){return new jS(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class VS{constructor(e){this.comparator=e,this.data=new FS(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BS(this.data.getIterator())}getIteratorFrom(e){return new BS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof VS))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new VS(this.comparator);return t.data=e,t}}class BS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zS(e){return e.hasNext()?e.getNext():void 0}class qS{constructor(e){this.fields=e,e.sort(Nb.comparator)}static empty(){return new qS([])}unionWith(e){let t=new VS(Nb.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qS(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sb(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class WS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class HS{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new WS("Invalid base64 string: "+e):e}}(e);return new HS(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new HS(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bb(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}HS.EMPTY_BYTE_STRING=new HS("");const KS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function YS(e){if(ob(!!e),"string"==typeof e){let t=0;const n=KS.exec(e);if(ob(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:GS(e.seconds),nanos:GS(e.nanos)}}function GS(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function QS(e){return"string"==typeof e?HS.fromBase64String(e):HS.fromUint8Array(e)}function $S(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function JS(e){const t=e.mapValue.fields.__previous_value__;return $S(t)?JS(t):t}function XS(e){const t=YS(e.mapValue.fields.__local_write_time__.timestampValue);return new Eb(t.seconds,t.nanos)}class ZS{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ek{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ek("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ek&&e.projectId===this.projectId&&e.database===this.database}}const tk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nk={nullValue:"NULL_VALUE"};function rk(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$S(e)?4:yk(e)?9007199254740991:10:sb()}function ik(e,t){if(e===t)return!0;const n=rk(e);if(n!==rk(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return XS(e).isEqual(XS(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=YS(e.timestampValue),r=YS(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return QS(e.bytesValue).isEqual(QS(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return GS(e.geoPointValue.latitude)===GS(t.geoPointValue.latitude)&&GS(e.geoPointValue.longitude)===GS(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return GS(e.integerValue)===GS(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=GS(e.doubleValue),r=GS(t.doubleValue);return n===r?rS(n)===rS(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Sb(e.arrayValue.values||[],t.arrayValue.values||[],ik);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(OS(n)!==OS(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ik(n[i],r[i])))return!1;return!0}(e,t);default:return sb()}}function sk(e,t){return void 0!==(e.values||[]).find((e=>ik(e,t)))}function ok(e,t){if(e===t)return 0;const n=rk(e),r=rk(t);if(n!==r)return bb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bb(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=GS(e.integerValue||e.doubleValue),r=GS(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ak(e.timestampValue,t.timestampValue);case 4:return ak(XS(e),XS(t));case 5:return bb(e.stringValue,t.stringValue);case 6:return function(e,t){const n=QS(e),r=QS(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=bb(n[i],r[i]);if(0!==e)return e}return bb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=bb(GS(e.latitude),GS(t.latitude));return 0!==n?n:bb(GS(e.longitude),GS(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ok(n[i],r[i]);if(e)return e}return bb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===tk.mapValue&&t===tk.mapValue)return 0;if(e===tk.mapValue)return 1;if(t===tk.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=bb(r[o],s[o]);if(0!==e)return e;const t=ok(n[r[o]],i[s[o]]);if(0!==t)return t}return bb(r.length,s.length)}(e.mapValue,t.mapValue);default:throw sb()}}function ak(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return bb(e,t);const n=YS(e),r=YS(t),i=bb(n.seconds,r.seconds);return 0!==i?i:bb(n.nanos,r.nanos)}function lk(e){return ck(e)}function ck(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=YS(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return QS(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Pb.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ck(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ck(e.fields[i]));return n+"}"}(e.mapValue):sb()}function uk(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function hk(e){return!!e&&"integerValue"in e}function dk(e){return!!e&&"arrayValue"in e}function fk(e){return!!e&&"nullValue"in e}function pk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mk(e){return!!e&&"mapValue"in e}function gk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return MS(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=gk(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function vk(e){return"nullValue"in e?nk:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?uk(ek.empty(),Pb.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:sb()}function _k(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?uk(ek.empty(),Pb.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?tk:sb()}function wk(e,t){const n=ok(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function bk(e,t){const n=ok(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Sk{constructor(e){this.value=e}static empty(){return new Sk({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mk(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gk(t)}setAll(e){let t=Nb.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=gk(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());mk(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ik(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mk(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){MS(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Sk(gk(this.value))}}function kk(e){const t=[];return MS(e.fields,((e,n)=>{const r=new Nb([e]);if(mk(n)){const e=kk(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new qS(t)}class Ek{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ek(e,0,Ib.min(),Ib.min(),Ib.min(),Sk.empty(),0)}static newFoundDocument(e,t,n,r){return new Ek(e,1,t,Ib.min(),n,r,0)}static newNoDocument(e,t){return new Ek(e,2,t,Ib.min(),Ib.min(),Sk.empty(),0)}static newUnknownDocument(e,t){return new Ek(e,3,t,Ib.min(),Ib.min(),Sk.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ib.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sk.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sk.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ib.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ek&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ek(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ik{constructor(e,t){this.position=e,this.inclusive=t}}function Tk(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Pb.comparator(Pb.fromName(o.referenceValue),n.key):ok(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ck(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ik(e.position[n],t.position[n]))return!1;return!0}class xk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Nk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pk{}class Ak extends Pk{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Bk(e,t,n):"array-contains"===t?new Hk(e,n):"in"===t?new Kk(e,n):"not-in"===t?new Yk(e,n):"array-contains-any"===t?new Gk(e,n):new Ak(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new zk(e,n):new qk(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ok(t,this.value)):null!==t&&rk(this.value)===rk(t)&&this.matchesComparison(ok(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sb()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rk extends Pk{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Rk(e,t)}matches(e){return Dk(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Dk(e){return"and"===e.op}function Ok(e){return"or"===e.op}function Mk(e){return Lk(e)&&Dk(e)}function Lk(e){for(const t of e.filters)if(t instanceof Rk)return!1;return!0}function Fk(e){if(e instanceof Ak)return e.field.canonicalString()+e.op.toString()+lk(e.value);if(Mk(e))return e.filters.map((e=>Fk(e))).join(",");{const t=e.filters.map((e=>Fk(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Uk(e,t){return e instanceof Ak?function(e,t){return t instanceof Ak&&e.op===t.op&&e.field.isEqual(t.field)&&ik(e.value,t.value)}(e,t):e instanceof Rk?function(e,t){return t instanceof Rk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Uk(n,t.filters[r])),!0)}(e,t):void sb()}function jk(e,t){const n=e.filters.concat(t);return Rk.create(n,e.op)}function Vk(e){return e instanceof Ak?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(lk(e.value))}(e):e instanceof Rk?function(e){return e.op.toString()+" {"+e.getFilters().map(Vk).join(" ,")+"}"}(e):"Filter"}class Bk extends Ak{constructor(e,t,n){super(e,t,n),this.key=Pb.fromName(n.referenceValue)}matches(e){const t=Pb.comparator(e.key,this.key);return this.matchesComparison(t)}}class zk extends Ak{constructor(e,t){super(e,"in",t),this.keys=Wk("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qk extends Ak{constructor(e,t){super(e,"not-in",t),this.keys=Wk("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Wk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Pb.fromName(e.referenceValue)))}class Hk extends Ak{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dk(t)&&sk(t.arrayValue,this.value)}}class Kk extends Ak{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sk(this.value.arrayValue,t)}}class Yk extends Ak{constructor(e,t){super(e,"not-in",t)}matches(e){if(sk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sk(this.value.arrayValue,t)}}class Gk extends Ak{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dk(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>sk(this.value.arrayValue,e)))}}class Qk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function $k(e){return new Qk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Jk(e){const t=ab(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Fk(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),nS(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>lk(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>lk(e))).join(",")),t.ce=e}return t.ce}function Xk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Nk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Uk(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ck(e.startAt,t.startAt)&&Ck(e.endAt,t.endAt)}function Zk(e){return Pb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function eE(e,t){return e.filters.filter((e=>e instanceof Ak&&e.field.isEqual(t)))}function tE(e,t,n){let r=nk,i=!0;for(const s of eE(e,t)){let e=nk,t=!0;switch(s.op){case"<":case"<=":e=vk(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=nk}wk({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];wk({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function nE(e,t,n){let r=tk,i=!0;for(const s of eE(e,t)){let e=tk,t=!0;switch(s.op){case">=":case">":e=_k(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=tk}bk({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];bk({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class rE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function iE(e,t,n,r,i,s,o,a){return new rE(e,t,n,r,i,s,o,a)}function sE(e){return new rE(e)}function oE(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function aE(e){return null!==e.collectionGroup}function lE(e){const t=ab(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new VS(Nb.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new xk(r,n))})),e.has(Nb.keyField().canonicalString())||t.le.push(new xk(Nb.keyField(),n))}return t.le}function cE(e){const t=ab(e);return t.he||(t.he=uE(t,lE(e))),t.he}function uE(e,t){if("F"===e.limitType)return $k(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new xk(e.field,t)}));const n=e.endAt?new Ik(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ik(e.startAt.position,e.startAt.inclusive):null;return $k(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function hE(e,t){const n=e.filters.concat([t]);return new rE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function dE(e,t,n){return new rE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fE(e,t){return Xk(cE(e),cE(t))&&e.limitType===t.limitType}function pE(e){return"".concat(Jk(cE(e)),"|lt:").concat(e.limitType)}function mE(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Vk(e))).join(", "),"]")),nS(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>lk(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>lk(e))).join(",")),"Target(".concat(t,")")}(cE(e)),"; limitType=").concat(e.limitType,")")}function gE(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Pb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of lE(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Tk(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,lE(e),t))&&!(e.endAt&&!function(e,t,n){const r=Tk(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,lE(e),t))}(e,t)}function yE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vE(e){return(t,n)=>{let r=!1;for(const i of lE(e)){const e=_E(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function _E(e,t,n){const r=e.field.isKeyField()?Pb.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ok(r,i):sb()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sb()}}class wE{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){MS(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return LS(this.inner)}size(){return this.innerSize}}const bE=new FS(Pb.comparator);function SE(){return bE}const kE=new FS(Pb.comparator);function EE(){let e=kE;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function IE(e){let t=kE;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function TE(){return xE()}function CE(){return xE()}function xE(){return new wE((e=>e.toString()),((e,t)=>e.isEqual(t)))}const NE=new FS(Pb.comparator),PE=new VS(Pb.comparator);function AE(){let e=PE;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const RE=new VS(bb);function DE(){return RE}function OE(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rS(t)?"-0":t}}function ME(e){return{integerValue:""+e}}function LE(e,t){return iS(t)?ME(t):OE(e,t)}class FE{constructor(){this._=void 0}}function UE(e,t,n){return e instanceof BE?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$S(t)&&(t=JS(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof zE?qE(e,t):e instanceof WE?HE(e,t):function(e,t){const n=VE(e,t),r=YE(n)+YE(e.Ie);return hk(n)&&hk(e.Ie)?ME(r):OE(e.serializer,r)}(e,t)}function jE(e,t,n){return e instanceof zE?qE(e,t):e instanceof WE?HE(e,t):n}function VE(e,t){return e instanceof KE?function(e){return hk(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class BE extends FE{}class zE extends FE{constructor(e){super(),this.elements=e}}function qE(e,t){const n=GE(t);for(const r of e.elements)n.some((e=>ik(e,r)))||n.push(r);return{arrayValue:{values:n}}}class WE extends FE{constructor(e){super(),this.elements=e}}function HE(e,t){let n=GE(t);for(const r of e.elements)n=n.filter((e=>!ik(e,r)));return{arrayValue:{values:n}}}class KE extends FE{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function YE(e){return GS(e.integerValue||e.doubleValue)}function GE(e){return dk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class QE{constructor(e,t){this.field=e,this.transform=t}}class $E{constructor(e,t){this.version=e,this.transformResults=t}}class JE{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new JE}static exists(e){return new JE(void 0,e)}static updateTime(e){return new JE(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function XE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ZE{}function eI(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new uI(e.key,JE.none()):new sI(e.key,e.data,JE.none());{const n=e.data,r=Sk.empty();let i=new VS(Nb.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new oI(e.key,r,new qS(i.toArray()),JE.none())}}function tI(e,t,n){e instanceof sI?function(e,t,n){const r=e.value.clone(),i=lI(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof oI?function(e,t,n){if(!XE(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=lI(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(aI(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function nI(e,t,n,r){return e instanceof sI?function(e,t,n,r){if(!XE(e.precondition,t))return n;const i=e.value.clone(),s=cI(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof oI?function(e,t,n,r){if(!XE(e.precondition,t))return n;const i=cI(e.fieldTransforms,r,t),s=t.data;return s.setAll(aI(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return XE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function rI(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=VE(r.transform,e||null);null!=i&&(null===n&&(n=Sk.empty()),n.set(r.field,i))}return n||null}function iI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Sb(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zE&&t instanceof zE||e instanceof WE&&t instanceof WE?Sb(e.elements,t.elements,ik):e instanceof KE&&t instanceof KE?ik(e.Ie,t.Ie):e instanceof BE&&t instanceof BE}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sI extends ZE{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oI extends ZE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function aI(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function lI(e,t,n){const r=new Map;ob(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,jE(o,a,n[i]))}return r}function cI(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,UE(e,s,t))}return r}class uI extends ZE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hI extends ZE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dI{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&tI(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=nI(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=nI(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=CE();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=eI(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Ib.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),AE())}isEqual(e){return this.batchId===e.batchId&&Sb(this.mutations,e.mutations,((e,t)=>iI(e,t)))&&Sb(this.baseMutations,e.baseMutations,((e,t)=>iI(e,t)))}}class fI{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ob(e.mutations.length===n.length);let r=NE;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new fI(e,t,n,r)}}class pI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class mI{constructor(e,t){this.count=e,this.unchangedNames=t}}var gI,yI;function vI(e){switch(e){default:return sb();case lb.CANCELLED:case lb.UNKNOWN:case lb.DEADLINE_EXCEEDED:case lb.RESOURCE_EXHAUSTED:case lb.INTERNAL:case lb.UNAVAILABLE:case lb.UNAUTHENTICATED:return!1;case lb.INVALID_ARGUMENT:case lb.NOT_FOUND:case lb.ALREADY_EXISTS:case lb.PERMISSION_DENIED:case lb.FAILED_PRECONDITION:case lb.ABORTED:case lb.OUT_OF_RANGE:case lb.UNIMPLEMENTED:case lb.DATA_LOSS:return!0}}function _I(e){if(void 0===e)return nb("GRPC error has no .code"),lb.UNKNOWN;switch(e){case gI.OK:return lb.OK;case gI.CANCELLED:return lb.CANCELLED;case gI.UNKNOWN:return lb.UNKNOWN;case gI.DEADLINE_EXCEEDED:return lb.DEADLINE_EXCEEDED;case gI.RESOURCE_EXHAUSTED:return lb.RESOURCE_EXHAUSTED;case gI.INTERNAL:return lb.INTERNAL;case gI.UNAVAILABLE:return lb.UNAVAILABLE;case gI.UNAUTHENTICATED:return lb.UNAUTHENTICATED;case gI.INVALID_ARGUMENT:return lb.INVALID_ARGUMENT;case gI.NOT_FOUND:return lb.NOT_FOUND;case gI.ALREADY_EXISTS:return lb.ALREADY_EXISTS;case gI.PERMISSION_DENIED:return lb.PERMISSION_DENIED;case gI.FAILED_PRECONDITION:return lb.FAILED_PRECONDITION;case gI.ABORTED:return lb.ABORTED;case gI.OUT_OF_RANGE:return lb.OUT_OF_RANGE;case gI.UNIMPLEMENTED:return lb.UNIMPLEMENTED;case gI.DATA_LOSS:return lb.DATA_LOSS;default:return sb()}}(yI=gI||(gI={}))[yI.OK=0]="OK",yI[yI.CANCELLED=1]="CANCELLED",yI[yI.UNKNOWN=2]="UNKNOWN",yI[yI.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yI[yI.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yI[yI.NOT_FOUND=5]="NOT_FOUND",yI[yI.ALREADY_EXISTS=6]="ALREADY_EXISTS",yI[yI.PERMISSION_DENIED=7]="PERMISSION_DENIED",yI[yI.UNAUTHENTICATED=16]="UNAUTHENTICATED",yI[yI.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yI[yI.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yI[yI.ABORTED=10]="ABORTED",yI[yI.OUT_OF_RANGE=11]="OUT_OF_RANGE",yI[yI.UNIMPLEMENTED=12]="UNIMPLEMENTED",yI[yI.INTERNAL=13]="INTERNAL",yI[yI.UNAVAILABLE=14]="UNAVAILABLE",yI[yI.DATA_LOSS=15]="DATA_LOSS";let wI=null;function bI(){return new TextEncoder}const SI=new Qw([4294967295,4294967295],0);function kI(e){const t=bI().encode(e),n=new Gw;return n.update(t),new Uint8Array(n.digest())}function EI(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Qw([n,r],0),new Qw([i,s],0)]}class II{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new TI("Invalid padding: ".concat(t));if(n<0)throw new TI("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new TI("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new TI("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Qw.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Qw.fromNumber(n)));return 1===r.compare(SI)&&(r=new Qw([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=kI(e),[n,r]=EI(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new II(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=kI(e),[n,r]=EI(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class TI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class CI{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xI.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new CI(Ib.min(),r,new FS(bb),SE(),AE())}}class xI{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xI(n,t,AE(),AE(),AE())}}class NI{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class PI{constructor(e,t){this.targetId=e,this.fe=t}}class AI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:HS.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class RI{constructor(){this.ge=0,this.pe=MI(),this.ye=HS.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=AE(),t=AE(),n=AE();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sb()}})),new xI(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=MI()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class DI{constructor(e){this.Le=e,this.ke=new Map,this.qe=SE(),this.Qe=OI(),this.Ke=new FS(bb)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:sb()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Zk(i))if(0===n){const e=new Pb(i.path);this.We(t,e,Ek.newNoDocument(e,Ib.min()))}else ob(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==wI||wI.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=QS(n).toUint8Array()}catch(e){if(e instanceof WS)return rb("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new II(s,r,i)}catch(e){return rb(e instanceof TI?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Zk(i.target)){const t=new Pb(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Ek.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=AE();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new CI(e,t,this.Ke,this.qe,n);return this.qe=SE(),this.Qe=OI(),this.Ke=new FS(bb),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new RI,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new VS(bb),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||tb("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new RI),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function OI(){return new FS(Pb.comparator)}function MI(){return new FS(Pb.comparator)}const LI={asc:"ASCENDING",desc:"DESCENDING"},FI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UI={and:"AND",or:"OR"};class jI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function VI(e,t){return e.useProto3Json||nS(t)?t:{value:t}}function BI(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function zI(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qI(e,t){return BI(e,t.toTimestamp())}function WI(e){return ob(!!e),Ib.fromTimestamp(function(e){const t=YS(e);return new Eb(t.seconds,t.nanos)}(e))}function HI(e,t){return function(e){return new Cb(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function KI(e){const t=Cb.fromString(e);return ob(pT(t)),t}function YI(e,t){return HI(e.databaseId,t.path)}function GI(e,t){const n=KI(t);if(n.get(1)!==e.databaseId.projectId)throw new cb(lb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new cb(lb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Pb(XI(n))}function QI(e,t){return HI(e.databaseId,t)}function $I(e){const t=KI(e);return 4===t.length?Cb.emptyPath():XI(t)}function JI(e){return new Cb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function XI(e){return ob(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ZI(e,t,n){return{name:YI(e,t),fields:n.value.mapValue.fields}}function eT(e,t,n){const r=GI(e,t.name),i=WI(t.updateTime),s=t.createTime?WI(t.createTime):Ib.min(),o=new Sk({mapValue:{fields:t.fields}}),a=Ek.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function tT(e,t){let n;if(t instanceof sI)n={update:ZI(e,t.key,t.value)};else if(t instanceof uI)n={delete:YI(e,t.key)};else if(t instanceof oI)n={update:ZI(e,t.key,t.data),updateMask:fT(t.fieldMask)};else{if(!(t instanceof hI))return sb();n={verify:YI(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof BE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zE)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof WE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof KE)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw sb()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qI(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sb()}(e,t.precondition)),n}function nT(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?JE.updateTime(WI(e.updateTime)):void 0!==e.exists?JE.exists(e.exists):JE.none()}(t.currentDocument):JE.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)ob("REQUEST_TIME"===t.setToServerValue),n=new BE;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new zE(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new WE(e)}else"increment"in t?n=new KE(e,t.increment):sb();const r=Nb.fromServerFormat(t.fieldPath);return new QE(r,n)}(e,t))):[];if(t.update){t.update.name;const i=GI(e,t.update.name),s=new Sk({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new qS(t.map((e=>Nb.fromServerFormat(e))))}(t.updateMask);return new oI(i,s,e,n,r)}return new sI(i,s,n,r)}if(t.delete){const r=GI(e,t.delete);return new uI(r,n)}if(t.verify){const r=GI(e,t.verify);return new hI(r,n)}return sb()}function rT(e,t){return{documents:[QI(e,t.path)]}}function iT(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=QI(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=QI(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return dT(Rk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:uT(e.field),direction:aT(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=VI(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function sT(e){let t=$I(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ob(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=oT(e);return t instanceof Rk&&Mk(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new xk(hT(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,nS(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ik(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ik(n,t)}(n.endAt)),iE(t,i,o,s,a,"F",l,c)}function oT(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hT(e.unaryFilter.field);return Ak.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=hT(e.unaryFilter.field);return Ak.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hT(e.unaryFilter.field);return Ak.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hT(e.unaryFilter.field);return Ak.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sb()}}(e):void 0!==e.fieldFilter?function(e){return Ak.create(hT(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sb()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Rk.create(e.compositeFilter.filters.map((e=>oT(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sb()}}(e.compositeFilter.op))}(e):sb()}function aT(e){return LI[e]}function lT(e){return FI[e]}function cT(e){return UI[e]}function uT(e){return{fieldPath:e.canonicalString()}}function hT(e){return Nb.fromServerFormat(e.fieldPath)}function dT(e){return e instanceof Ak?function(e){if("=="===e.op){if(pk(e.value))return{unaryFilter:{field:uT(e.field),op:"IS_NAN"}};if(fk(e.value))return{unaryFilter:{field:uT(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pk(e.value))return{unaryFilter:{field:uT(e.field),op:"IS_NOT_NAN"}};if(fk(e.value))return{unaryFilter:{field:uT(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uT(e.field),op:lT(e.op),value:e.value}}}(e):e instanceof Rk?function(e){const t=e.getFilters().map((e=>dT(e)));return 1===t.length?t[0]:{compositeFilter:{op:cT(e.op),filters:t}}}(e):sb()}function fT(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pT(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class mT{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ib.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ib.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:HS.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new mT(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mT(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mT(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mT(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gT{constructor(e){this.ut=e}}function yT(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:YI(e,t.key),fields:t.data.value.mapValue.fields,updateTime:BI(e,t.version.toTimestamp()),createTime:BI(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:_T(t.version)};else{if(!t.isUnknownDocument())return sb();r.unknownDocument={path:n.path.toArray(),version:_T(t.version)}}return r}function vT(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function _T(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wT(e){const t=new Eb(e.seconds,e.nanoseconds);return Ib.fromTimestamp(t)}function bT(e,t){const n=(t.baseMutations||[]).map((t=>nT(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>nT(e.ut,t))),i=Eb.fromMillis(t.localWriteTimeMs);return new dI(t.batchId,i,n,r)}function ST(e){const t=wT(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?wT(e.lastLimboFreeSnapshotVersion):Ib.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return ob(1===e.documents.length),cE(sE($I(e.documents[0])))}(e.query):function(e){return cE(sT(e))}(e.query),new mT(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,HS.fromBase64String(e.resumeToken))}function kT(e,t){const n=_T(t.snapshotVersion),r=_T(t.lastLimboFreeSnapshotVersion);let i;i=Zk(t.target)?rT(e.ut,t.target):iT(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Jk(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ET(e){const t=sT({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?dE(t,t.limit,"L"):t}function IT(e,t){return new pI(t.largestBatchId,nT(e.ut,t.overlayMutation))}function TT(e,t){const n=t.path.lastSegment();return[e,sS(t.path.popLast()),n]}function CT(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:_T(r.readTime),documentKey:sS(r.documentKey.path),largestBatchId:r.largestBatchId}}class xT{getBundleMetadata(e,t){return NT(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:wT(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return NT(e).put(function(e){return{bundleId:e.id,createTime:_T(WI(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return PT(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:ET(e.bundledQuery),readTime:wT(e.readTime)}}(e)}))}saveNamedQuery(e,t){return PT(e).put(function(e){return{name:e.name,readTime:_T(WI(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function NT(e){return DS(e,"bundles")}function PT(e){return DS(e,"namedQueries")}class AT{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new AT(e,n)}getOverlay(e,t){return RT(e).get(TT(this.userId,t)).next((e=>e?IT(this.serializer,e):null))}getOverlays(e,t){const n=TE();return qb.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new pI(t,i);r.push(this.lt(e,s))})),qb.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(sS(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(RT(e).H("collectionPathOverlayIndex",r))})),qb.waitFor(i)}getOverlaysForCollection(e,t,n){const r=TE(),i=sS(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return RT(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=IT(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=TE();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return RT(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=IT(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return RT(e).put(function(e,t,n){const[r,i,s]=TT(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:tT(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function RT(e){return DS(e,"documentOverlays")}class DT{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(GS(e.integerValue));else if("doubleValue"in e){const n=GS(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),rS(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(QS(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?yk(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):sb()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Pb.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function OT(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function MT(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=OT(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}DT.St=new DT;class LT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=MT(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=MT(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class FT{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class UT{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class jT{constructor(){this.Wt=new LT,this.Gt=new FT(this.Wt),this.zt=new UT(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class VT{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new VT(this.indexId,this.documentKey,this.arrayValue,n)}}function BT(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=zT(e.arrayValue,t.arrayValue),0!==n?n:(n=zT(e.directionalValue,t.directionalValue),0!==n?n:Pb.comparator(e.documentKey,t.documentKey)))}function zT(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class qT{constructor(e){this.Jt=new VS(((e,t)=>Nb.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(ob(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Rb(e);if(void 0!==t&&!this.tn(t))return!1;const n=Db(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new VS(Nb.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ob(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ob(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ob(n.field,"asc"===n.dir?0:1)));return new Ab(Ab.UNKNOWN_ID,this.collectionId,t,Mb.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function WT(e){var t,n;if(ob(e instanceof Ak||e instanceof Rk),e instanceof Ak){if(e instanceof Kk){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Ak.create(e.field,"==",t))))||[];return Rk.create(r,"or")}return e}const r=e.filters.map((e=>WT(e)));return Rk.create(r,e.op)}function HT(e){if(0===e.getFilters().length)return[];const t=QT(WT(e));return ob(GT(t)),KT(t)||YT(t)?[t]:t.getFilters()}function KT(e){return e instanceof Ak}function YT(e){return e instanceof Rk&&Mk(e)}function GT(e){return KT(e)||YT(e)||function(e){if(e instanceof Rk&&Ok(e)){for(const t of e.getFilters())if(!KT(t)&&!YT(t))return!1;return!0}return!1}(e)}function QT(e){if(ob(e instanceof Ak||e instanceof Rk),e instanceof Ak)return e;if(1===e.filters.length)return QT(e.filters[0]);const t=e.filters.map((e=>QT(e)));let n=Rk.create(t,e.op);return n=XT(n),GT(n)?n:(ob(n instanceof Rk),ob(Dk(n)),ob(n.filters.length>1),n.filters.reduce(((e,t)=>$T(e,t))))}function $T(e,t){let n;return ob(e instanceof Ak||e instanceof Rk),ob(t instanceof Ak||t instanceof Rk),n=e instanceof Ak?t instanceof Ak?function(e,t){return Rk.create([e,t],"and")}(e,t):JT(e,t):t instanceof Ak?JT(t,e):function(e,t){if(ob(e.filters.length>0&&t.filters.length>0),Dk(e)&&Dk(t))return jk(e,t.getFilters());const n=Ok(e)?e:t,r=Ok(e)?t:e,i=n.filters.map((e=>$T(e,r)));return Rk.create(i,"or")}(e,t),XT(n)}function JT(e,t){if(Dk(t))return jk(t,e.getFilters());{const n=t.filters.map((t=>$T(e,t)));return Rk.create(n,"or")}}function XT(e){if(ob(e instanceof Ak||e instanceof Rk),e instanceof Ak)return e;const t=e.getFilters();if(1===t.length)return XT(t[0]);if(Lk(e))return e;const n=t.map((e=>XT(e))),r=[];return n.forEach((t=>{t instanceof Ak?r.push(t):t instanceof Rk&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Rk.create(r,e.op)}class ZT{constructor(){this.on=new eC}addToCollectionParentIndex(e,t){return this.on.add(t),qb.resolve()}getCollectionParents(e,t){return qb.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return qb.resolve()}deleteFieldIndex(e,t){return qb.resolve()}deleteAllFieldIndexes(e){return qb.resolve()}createTargetIndexes(e,t){return qb.resolve()}getDocumentsMatchingTarget(e,t){return qb.resolve(null)}getIndexType(e,t){return qb.resolve(0)}getFieldIndexes(e,t){return qb.resolve([])}getNextCollectionGroupToUpdate(e){return qb.resolve(null)}getMinOffset(e,t){return qb.resolve(Ub.min())}getMinOffsetFromCollectionGroup(e,t){return qb.resolve(Ub.min())}updateCollectionGroup(e,t,n){return qb.resolve()}updateIndexEntries(e,t){return qb.resolve()}}class eC{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new VS(Cb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new VS(Cb.comparator)).toArray()}}const tC=new Uint8Array(0);class nC{constructor(e,t){this.user=e,this.databaseId=t,this._n=new eC,this.an=new wE((e=>Jk(e)),((e,t)=>Xk(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:sS(r)};return rC(e).put(i)}return qb.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[kb(t),""],!1,!0);return rC(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(lS(r.parent))}return n}))}addFieldIndex(e,t){const n=sC(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=oC(e);return i.next((e=>{n.put(CT(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=sC(e),r=oC(e),i=iC(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=sC(e),n=iC(e),r=oC(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return qb.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new qT(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=iC(e);let r=!0;const i=new Map;return qb.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=AE();const r=[];return qb.forEach(i,((i,s)=>{tb("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Jk(t)));const o=function(e,t){const n=Rb(t);if(void 0===n)return null;for(const r of eE(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Db(t))for(const t of eE(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Db(t)){const t=0===i.kind?tE(e,i.fieldPath,e.startAt):nE(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ik(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Db(t)){const t=0===i.kind?nE(e,i.fieldPath,e.endAt):tE(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ik(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return qb.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Pb.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return qb.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:HT(Rk.create(e.filters,"and")).map((t=>$k(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):tC,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new VT(e,Pb.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new VT(e,Pb.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new qT(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return qb.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new VS(Nb.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new jT;for(const r of Db(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);DT.St.ht(e,i)}return n.Ut()}In(e){const t=new jT;return DT.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new jT;return DT.St.ht(uk(this.databaseId,t),n.jt(function(e){const t=Db(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new jT);let i=0;for(const s of Db(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&dk(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);DT.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new jT;n.seed(e.Ut()),DT.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof Ak&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=sC(e),r=oC(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return qb.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Mb(t.sequenceNumber,new Ub(wT(t.readTime),new Pb(lS(t.documentKey)),t.largestBatchId)):Mb.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Ob(Nb.fromServerFormat(t),n)}));return new Ab(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:bb(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=sC(e),i=oC(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>qb.forEach(t,(t=>i.put(CT(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return qb.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?qb.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),qb.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?qb.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return iC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return iC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=iC(e);let i=new VS(BT);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new VT(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new VS(BT);const r=this.dn(t,e);if(null==r)return n;const i=Rb(t);if(null!=i){const s=e.data.field(i.fieldPath);if(dk(s))for(const i of s.arrayValue.values||[])n=n.add(new VT(t.indexId,e.key,this.In(i),r))}else n=n.add(new VT(t.indexId,e.key,tC,r));return n}yn(e,t,n,r,i){tb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=zS(s),l=zS(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=zS(o)):t?(i(a),a=zS(s)):(a=zS(s),l=zS(o))}}(r,i,BT,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),qb.waitFor(s)}fn(e){let t=1;return oC(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>BT(e,t))).filter(((e,t,n)=>!t||0!==BT(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=BT(s,e),i=BT(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,tC,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,tC,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return BT(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aC)}getMinOffset(e,t){return qb.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||sb())))).next(aC)}}function rC(e){return DS(e,"collectionParents")}function iC(e){return DS(e,"indexEntries")}function sC(e){return DS(e,"indexConfiguration")}function oC(e){return DS(e,"indexState")}function aC(e){ob(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;jb(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ub(t.readTime,t.documentKey,n)}const lC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cC{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new cC(e,cC.DEFAULT_COLLECTION_PERCENTILE,cC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uC(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{ob(1===a)})));const c=[];for(const u of n.mutations){const e=hS(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return qb.waitFor(s).next((()=>c))}function hC(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw sb();t=e.noDocument}return JSON.stringify(t).length}cC.DEFAULT_COLLECTION_PERCENTILE=10,cC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cC.DEFAULT=new cC(41943040,cC.DEFAULT_COLLECTION_PERCENTILE,cC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cC.DISABLED=new cC(-1,0,0);class dC{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){ob(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new dC(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pC(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=mC(e),s=pC(e);return s.add({}).next((o=>{ob("number"==typeof o);const a=new dI(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>tT(e.ut,t))),i=n.mutations.map((t=>tT(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new VS(((e,t)=>bb(e.canonicalString(),t.canonicalString())));for(const e of r){const t=hS(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,dS))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),qb.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return pC(e).get(t).next((e=>e?(ob(e.userId===this.userId),bT(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?qb.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return pC(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(ob(t.batchId>=n),i=bT(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return pC(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pC(e).W("userMutationsIndex",t).next((e=>e.map((e=>bT(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=uS(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return mC(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=lS(a);if(o===this.userId&&t.path.isEqual(c))return pC(e).get(l).next((e=>{if(!e)throw sb();ob(e.userId===this.userId),i.push(bT(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new VS(bb);const r=[];return t.forEach((t=>{const i=uS(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=mC(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=lS(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),qb.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=uS(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new VS(bb);return mC(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=lS(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(pC(e).get(t).next((e=>{if(null===e)throw sb();ob(e.userId===this.userId),n.push(bT(this.serializer,e))})))})),qb.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return uC(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),qb.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return qb.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return mC(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=lS(e[1]);r.push(t)}else n.done()})).next((()=>{ob(0===r.length)}))}))}containsKey(e,t){return fC(e,this.userId,t)}Mn(e){return gC(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function fC(e,t,n){const r=uS(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return mC(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function pC(e){return DS(e,"mutations")}function mC(e){return DS(e,"documentMutations")}function gC(e){return DS(e,"mutationQueues")}class yC{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new yC(0)}static Nn(){return new yC(-1)}}class vC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new yC(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Ib.fromTimestamp(new Eb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>_C(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(ob(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return _C(e).Y(((s,o)=>{const a=ST(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>qb.waitFor(i))).next((()=>r))}forEachTarget(e,t){return _C(e).Y(((e,n)=>{const r=ST(n);t(r)}))}Bn(e){return wC(e).get("targetGlobalKey").next((e=>(ob(null!==e),e)))}Ln(e,t){return wC(e).put("targetGlobalKey",t)}kn(e,t){return _C(e).put(kT(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Jk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return _C(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=ST(n);Xk(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=bC(e);return t.forEach((t=>{const s=sS(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),qb.waitFor(r)}removeMatchingKeys(e,t,n){const r=bC(e);return qb.forEach(t,(t=>{const i=sS(t.path);return qb.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=bC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bC(e);let i=AE();return r.Y({range:n,J:!0},((e,t,n)=>{const r=lS(e[1]),s=new Pb(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=sS(t.path),r=IDBKeyRange.bound([n],[kb(n)],!1,!0);let i=0;return bC(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return _C(e).get(t).next((e=>e?ST(e):null))}}function _C(e){return DS(e,"targets")}function wC(e){return DS(e,"targetGlobal")}function bC(e){return DS(e,"targetDocuments")}function SC(e,t){let[n,r]=e,[i,s]=t;const o=bb(n,i);return 0===o?bb(r,s):o}class kC{constructor(e){this.Qn=e,this.buffer=new VS(SC),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();SC(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EC{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){tb("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Gb(e)?tb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await zb(e)}await this.Gn(3e5)}))}}class IC{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return qb.resolve(tS._e);const n=new kC(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tb("LruGarbageCollector","Garbage collection skipped; disabled"),qb.resolve(lC)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(tb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),lC):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(tb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),eb()<=Ht.DEBUG&&tb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),qb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function TC(e,t){return new IC(e,t)}class CC{constructor(e,t){this.db=e,this.garbageCollector=TC(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return xC(e,n)}removeReference(e,t,n){return xC(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return xC(e,t)}Xn(e,t){return function(e,t){let n=!1;return gC(e).Z((r=>fC(e,r,t).next((e=>(e&&(n=!0),qb.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Ib.min()),bC(e).delete(function(e){return[0,sS(e.path)]}(s)))))}));r.push(t)}})).next((()=>qb.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return xC(e,t)}Zn(e,t){const n=bC(e);let r,i=tS._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==tS._e&&t(new Pb(lS(r)),i),i=l,r=a):i=tS._e})).next((()=>{i!==tS._e&&t(new Pb(lS(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xC(e,t){return bC(e).put(function(e,t){return{targetId:0,path:sS(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class NC{constructor(){this.changes=new wE((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ek.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qb.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return OC(e).put(n)}removeEntry(e,t,n){return OC(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],vT(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Ek.newInvalidDocument(t);return OC(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(MC(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Ek.newInvalidDocument(t)};return OC(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(MC(t))},((e,r)=>{n={document:this.tr(t,r),size:hC(r)}})).next((()=>n))}getEntries(e,t){let n=SE();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=SE(),r=new FS(Pb.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,hC(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return qb.resolve();let r=new VS(FC);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(MC(r.first()),MC(r.last())),s=r.getIterator();let o=s.getNext();return OC(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Pb.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&FC(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(MC(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),vT(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return OC(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=SE();for(const i of e){const e=this.tr(Pb.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(gE(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=SE();const s=LC(t,n),o=LC(t,Ub.max());return OC(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(Pb.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new RC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return DC(e).get("remoteDocumentGlobalKey").next((e=>(ob(!!e),e)))}er(e,t){return DC(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=eT(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Pb.fromSegments(t.noDocument.path),r=wT(t.noDocument.readTime);n=Ek.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return sb();{const e=Pb.fromSegments(t.unknownDocument.path),r=wT(t.unknownDocument.version);n=Ek.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Eb(e[0],e[1]);return Ib.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Ib.min()))return e}return Ek.newInvalidDocument(e)}}function AC(e){return new PC(e)}class RC extends NC{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new wE((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new VS(((e,t)=>bb(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=yT(this._r.serializer,s);r=r.add(i.path.popLast());const l=hC(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=yT(this._r.serializer,s.convertToNoDocument(Ib.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),qb.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function DC(e){return DS(e,"remoteDocumentGlobal")}function OC(e){return DS(e,"remoteDocumentsV14")}function MC(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function LC(e,t){const n=t.documentKey.path.toArray();return[e,vT(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function FC(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=bb(n[s],r[s]),i)return i;return i=bb(n.length,r.length),i||(i=bb(n[n.length-2],r[r.length-2]),i||bb(n[n.length-1],r[r.length-1]))}class UC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jC{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&nI(n.mutation,e,qS.empty(),Eb.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,AE()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AE();const r=TE();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=EE();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=TE();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,AE())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=SE();const s=xE(),o=xE();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof oI)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),nI(o.mutation,t,o.mutation.getFieldMask(),Eb.now())):s.set(t.key,qS.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new UC(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=xE();let r=new FS(((e,t)=>e-t)),i=AE();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||qS.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||AE()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=CE();l.forEach((e=>{if(!i.has(e)){const r=eI(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return qb.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Pb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):qb.resolve(TE());let o=-1,a=i;return s.next((t=>qb.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?qb.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,AE()))).next((e=>({batchId:o,changes:IE(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pb(t)).next((e=>{let t=EE();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=EE();return this.indexManager.getCollectionParents(e,i).next((o=>qb.forEach(o,(o=>{const a=function(e,t){return new rE(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ek.newInvalidDocument(r)))}));let n=EE();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&nI(s.mutation,r,qS.empty(),Eb.now()),gE(t,r)&&(n=n.insert(e,r))})),n}))}}class VC{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return qb.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:WI(e.createTime)}}(t)),qb.resolve()}getNamedQuery(e,t){return qb.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:ET(e.bundledQuery),readTime:WI(e.readTime)}}(t)),qb.resolve()}}class BC{constructor(){this.overlays=new FS(Pb.comparator),this.lr=new Map}getOverlay(e,t){return qb.resolve(this.overlays.get(t))}getOverlays(e,t){const n=TE();return qb.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),qb.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),qb.resolve()}getOverlaysForCollection(e,t,n){const r=TE(),i=t.length+1,s=new Pb(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return qb.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new FS(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=TE(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=TE(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return qb.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new pI(t,n));let i=this.lr.get(t);void 0===i&&(i=AE(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class zC{constructor(){this.hr=new VS(qC.Pr),this.Ir=new VS(qC.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new qC(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new qC(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Pb(new Cb([])),n=new qC(t,e),r=new qC(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Pb(new Cb([])),n=new qC(t,e),r=new qC(t,e+1);let i=AE();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new qC(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class qC{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Pb.comparator(e.key,t.key)||bb(e.gr,t.gr)}static Tr(e,t){return bb(e.gr,t.gr)||Pb.comparator(e.key,t.key)}}class WC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new VS(qC.Pr)}checkEmpty(e){return qb.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dI(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new qC(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return qb.resolve(s)}lookupMutationBatch(e,t){return qb.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return qb.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return qb.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return qb.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new qC(t,0),r=new qC(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),qb.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new VS(bb);return t.forEach((e=>{const t=new qC(e,0),r=new qC(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),qb.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Pb.isDocumentKey(i)||(i=i.child(""));const s=new qC(new Pb(i),0);let o=new VS(bb);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),qb.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ob(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return qb.forEach(t.mutations,(r=>{const i=new qC(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new qC(t,0),r=this.yr.firstAfterOrEqual(n);return qb.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,qb.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HC{constructor(e){this.Cr=e,this.docs=new FS(Pb.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qb.resolve(n?n.document.mutableCopy():Ek.newInvalidDocument(t))}getEntries(e,t){let n=SE();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ek.newInvalidDocument(e))})),qb.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=SE();const s=t.path,o=new Pb(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||jb(Fb(o),n)<=0||(r.has(o.key)||gE(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return qb.resolve(i)}getAllFromCollectionGroup(e,t,n,r){sb()}vr(e,t){return qb.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new KC(this)}getSize(e){return qb.resolve(this.size)}}class KC extends NC{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),qb.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class YC{constructor(e){this.persistence=e,this.Fr=new wE((e=>Jk(e)),Xk),this.lastRemoteSnapshotVersion=Ib.min(),this.highestTargetId=0,this.Mr=0,this.Or=new zC,this.targetCount=0,this.Nr=yC.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),qb.resolve()}getLastRemoteSnapshotVersion(e){return qb.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qb.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),qb.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),qb.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new yC(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,qb.resolve()}updateTargetData(e,t){return this.kn(t),qb.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,qb.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),qb.waitFor(i).next((()=>r))}getTargetCount(e){return qb.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return qb.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),qb.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),qb.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),qb.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return qb.resolve(n)}containsKey(e,t){return qb.resolve(this.Or.containsKey(t))}}class GC{constructor(e,t){this.Br={},this.overlays={},this.Lr=new tS(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new YC(this),this.indexManager=new ZT,this.remoteDocumentCache=function(e){return new HC(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new gT(t),this.Kr=new VC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new WC(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){tb("MemoryPersistence","Starting transaction:",e);const r=new QC(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return qb.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class QC extends Bb{constructor(e){super(),this.currentSequenceNumber=e}}class $C{constructor(e){this.persistence=e,this.Gr=new zC,this.zr=null}static jr(e){return new $C(e)}get Hr(){if(this.zr)return this.zr;throw sb()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),qb.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),qb.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),qb.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qb.forEach(this.Hr,(n=>{const r=Pb.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Ib.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return qb.or([()=>qb.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class JC{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Wb("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cS,{unique:!0}),e.createObjectStore("documentMutations")}(e),XC(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=qb.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),XC(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ib.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cS,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return qb.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ES});t.createIndex("collectionPathOverlayIndex",IS,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",TS,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:fS});t.createIndex("documentKeyIndex",pS),t.createIndex("collectionGroupIndex",mS)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:wS}).createIndex("sequenceNumberIndex",bS,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:SS}).createIndex("documentKeyIndex",kS,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=hC(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>qb.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>qb.forEach(n,(n=>{ob(n.userId===t.userId);const r=bT(this.serializer,n);return uC(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new Cb(n),o=function(e){return[0,sS(e)]}(s);r.push(t.get(o).next((n=>n?qb.resolve():(n=>t.put({targetId:0,path:sS(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>qb.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:_S});const n=t.store("collectionParents"),r=new eC,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:sS(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Cb(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=lS(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=ST(n),i=kT(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Pb(Cb.fromString(e.document.name).popFirst(5)):e.noDocument?Pb.fromSegments(e.noDocument.path):e.unknownDocument?Pb.fromSegments(e.unknownDocument.path):sb()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>qb.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=AC(this.serializer),i=new GC($C.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:AE();bT(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),qb.forEach(n,((e,n)=>{const s=new Jw(n),o=AT.ct(this.serializer,s),a=i.getIndexManager(s),l=dC.ct(s,this.serializer,a,i.referenceDelegate);return new jC(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new RS(t,tS._e),e).next()}))}))}}function XC(e){e.createObjectStore("targetDocuments",{keyPath:yS}).createIndex("documentTargetsIndex",vS,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gS,{unique:!0}),e.createObjectStore("targetGlobal")}const ZC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ex{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!ex.D())throw new cb(lb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CC(this,r),this.Ii=t+"main",this.serializer=new gT(a),this.Ti=new Hb(this.Ii,this.ai,new JC(this.serializer)),this.qr=new vC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AC(this.serializer),this.Kr=new xT,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&nb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new cb(lb.FAILED_PRECONDITION,ZC);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new tS(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>nx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Gb(e))return tb("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return tx(e).get("owner").next((e=>qb.resolve(this.wi(e))))}Si(e){return nx(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=DS(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return qb.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?qb.resolve(!0):tx(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new cb(lb.FAILED_PRECONDITION,ZC);return!1}}return!(!this.networkEnabled||!this.inForeground)||nx(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&tb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new RS(e,tS._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>nx(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return dC.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nC(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return AT.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){tb("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?AS:14===e?PS:13===e?NS:12===e?xS:11===e?CS:void sb()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new RS(r,this.Lr?this.Lr.next():tS._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw nb("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new cb(lb.FAILED_PRECONDITION,Vb);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return tx(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new cb(lb.FAILED_PRECONDITION,ZC)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tx(e).put("owner",t)}static D(){return Hb.D()}pi(e){const t=tx(e);return t.get("owner").next((e=>this.wi(e)?(tb("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qb.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(nb("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!rt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return tb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return nb("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){nb("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function tx(e){return DS(e,"owner")}function nx(e){return DS(e,"clientMetadata")}function rx(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ix{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=AE(),r=AE();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ix(e,t.fromCache,n,r)}}class sx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ox{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new sx;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(eb()<=Ht.DEBUG&&tb("QueryEngine","SDK will not create cache indexes for query:",mE(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),qb.resolve()):(eb()<=Ht.DEBUG&&tb("QueryEngine","Query:",mE(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(eb()<=Ht.DEBUG&&tb("QueryEngine","The SDK decides to create cache indexes for query:",mE(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cE(t))):qb.resolve())}zi(e,t){if(oE(t))return qb.resolve(null);let n=cE(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=dE(t,null,"F"),n=cE(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=AE(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,dE(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return oE(t)||r.isEqual(Ib.min())?qb.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?qb.resolve(null):(eb()<=Ht.DEBUG&&tb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mE(t)),this.Xi(e,s,t,Lb(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new VS(vE(e));return t.forEach(((t,r)=>{gE(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return eb()<=Ht.DEBUG&&tb("QueryEngine","Using full collection scan to execute query:",mE(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ub.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class ax{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new FS(bb),this.ns=new wE((e=>Jk(e)),Xk),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jC(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function lx(e,t,n,r){return new ax(e,t,n,r)}async function cx(e,t){const n=ab(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=AE();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ux(e){const t=ab(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function hx(e,t,n){let r=AE(),i=AE();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=SE();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ib.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):tb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function dx(e,t){const n=ab(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function fx(e,t){const n=ab(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,qb.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new mT(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function px(e,t,n){const r=ab(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Gb(e))throw e;tb("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function mx(e,t,n){const r=ab(e);let i=Ib.min(),s=AE();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ab(e),i=r.ns.get(n);return void 0!==i?qb.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,cE(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Ib.min(),n?s:AE()))).next((e=>(vx(r,yE(t),e),{documents:e,ls:s})))))}function gx(e,t){const n=ab(e),r=ab(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function yx(e,t){const n=ab(e),r=n.rs.get(t)||Ib.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,Lb(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(vx(n,t,e),e)))}function vx(e,t,n){let r=e.rs.get(t)||Ib.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function _x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AE();const r=await fx(e,cE(ET(t.bundledQuery))),i=ab(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=WI(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(HS.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function wx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function bx(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Sx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class kx{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new cb(r.error.code,r.error.message))),s?new kx(e,t,r.state,i):(nb("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ex{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new cb(n.error.code,n.error.message))),i?new Ex(e,n.state,r):(nb("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ix{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=DE();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=iS(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Ix(e,i):(nb("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Tx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tx(t.clientId,t.onlineState):(nb("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Cx{constructor(){this.activeTargetIds=DE()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xx{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new FS(bb),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=wx(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Cx),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(wx(this.persistenceKey,n));if(e){const t=Ix.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Sx(this.persistenceKey,e));if(n){const r=Ex.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sx(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return tb("SharedClientState","READ",e,t),t}setItem(e,t){tb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){tb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(tb("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void nb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=tS._e;if(null!=e)try{const n=JSON.parse(e);ob("number"==typeof n),t=n}catch(e){nb("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==tS._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new kx(this.currentUser,e,t,n),i=bx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=bx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=Sx(this.persistenceKey,e),i=new Ex(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return Ix.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return kx.Ts(new Jw(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return Ex.Ts(r,t)}Ms(e){return Tx.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);tb("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=DE();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Nx{constructor(){this.eo=new Cx,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Cx,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Px{ro(e){}shutdown(){}}class Ax{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){tb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){tb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Rx=null;function Dx(){return null===Rx?Rx=268435456+Math.round(2147483648*Math.random()):Rx++,"0x"+Rx.toString(16)}const Ox={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mx{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Lx="WebChannelConnection";class Fx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=Dx(),o=this.So(e,t);tb("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(tb("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw rb("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xw,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Ox[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=Dx();return new Promise(((s,o)=>{const a=new Yw;a.setWithCredentials(!0),a.listenOnce(zw.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Bw.NO_ERROR:const t=a.getResponseJson();tb(Lx,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Bw.TIMEOUT:tb(Lx,"RPC '".concat(e,"' ").concat(i," timed out")),o(new cb(lb.DEADLINE_EXCEEDED,"Request time out"));break;case Bw.HTTP_ERROR:const n=a.getStatus();if(tb(Lx,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(lb).indexOf(t)>=0?t:lb.UNKNOWN}(t.status);o(new cb(e,t.message))}else o(new cb(lb.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new cb(lb.UNAVAILABLE,"Connection failed."));break;default:sb()}}finally{tb(Lx,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);tb(Lx,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=Dx(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jw(),o=Vw(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Hw({})),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");tb(Lx,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Mx({co:t=>{d?tb(Lx,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(tb(Lx,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),tb(Lx,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Kw.EventType.OPEN,(()=>{d||tb(Lx,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Kw.EventType.CLOSE,(()=>{d||(d=!0,tb(Lx,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,Kw.EventType.ERROR,(t=>{d||(d=!0,rb(Lx,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new cb(lb.UNAVAILABLE,"The operation could not be completed")))})),p(u,Kw.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ob(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){tb(Lx,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=gI[e];if(void 0!==t)return _I(t)}(t),i=o.message;void 0===n&&(n=lb.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new cb(n,i)),u.close()}else tb(Lx,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,qw.STAT_EVENT,(t=>{t.stat===Ww.PROXY?tb(Lx,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ww.NOPROXY&&tb(Lx,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Ux(){return"undefined"!=typeof window?window:null}function jx(){return"undefined"!=typeof document?document:null}function Vx(e){return new jI(e,!0)}class Bx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&tb("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class zx{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Bx(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===lb.RESOURCE_EXHAUSTED?(nb(t.toString()),nb("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===lb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new cb(lb.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return tb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(tb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qx extends zx{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sb()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ob(void 0===t||"string"==typeof t),HS.fromBase64String(t||"")):(ob(void 0===t||t instanceof Uint8Array),HS.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?lb.UNKNOWN:_I(e.code);return new cb(t,e.message||"")}(o);n=new AI(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=GI(e,r.document.name),s=WI(r.document.updateTime),o=r.document.createTime?WI(r.document.createTime):Ib.min(),a=new Sk({mapValue:{fields:r.document.fields}}),l=Ek.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new NI(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=GI(e,r.document),s=r.readTime?WI(r.readTime):Ib.min(),o=Ek.newNoDocument(i,s),a=r.removedTargetIds||[];n=new NI([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=GI(e,r.document),s=r.removedTargetIds||[];n=new NI([],s,i,null)}else{if(!("filter"in t))return sb();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new mI(r,i),o=e.targetId;n=new PI(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ib.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ib.min():t.readTime?WI(t.readTime):Ib.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=JI(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Zk(r)?{documents:rT(e,r)}:{query:iT(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=zI(e,t.resumeToken);const r=VI(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ib.min())>0){n.readTime=BI(e,t.snapshotVersion.toTimestamp());const r=VI(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sb()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=JI(this.serializer),t.removeTarget=e,this.e_(t)}}class Wx extends zx{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(ob(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(ob(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?WI(e.updateTime):WI(t);return n.isEqual(Ib.min())&&(n=WI(t)),new $E(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=WI(e.commitTime);return this.listener.I_(n,t)}return ob(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=JI(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>tT(this.serializer,e)))};this.e_(t)}}class Hx extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new cb(lb.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===lb.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cb(lb.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===lb.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cb(lb.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Kx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(nb(t),this.f_=!1):tb("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Yx{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{nN(this)&&(tb("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ab(e);t.C_.add(4),await Qx(t),t.M_.set("Unknown"),t.C_.delete(4),await Gx(t)}(this))}))})),this.M_=new Kx(n,r)}}async function Gx(e){if(nN(e))for(const t of e.v_)await t(!0)}async function Qx(e){for(const t of e.v_)await t(!1)}function $x(e,t){const n=ab(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),tN(n)?eN(n):wN(n).Ho()&&Xx(n,t))}function Jx(e,t){const n=ab(e),r=wN(n);n.D_.delete(t),r.Ho()&&Zx(n,t),0===n.D_.size&&(r.Ho()?r.Zo():nN(n)&&n.M_.set("Unknown"))}function Xx(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ib.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wN(e).u_(t)}function Zx(e,t){e.x_.Oe(t),wN(e).c_(t)}function eN(e){e.x_=new DI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),wN(e).start(),e.M_.g_()}function tN(e){return nN(e)&&!wN(e).jo()&&e.D_.size>0}function nN(e){return 0===ab(e).C_.size}function rN(e){e.x_=void 0}async function iN(e){e.D_.forEach(((t,n)=>{Xx(e,t)}))}async function sN(e,t){rN(e),tN(e)?(e.M_.w_(t),eN(e)):e.M_.set("Unknown")}async function oN(e,t,n){if(e.M_.set("Online"),t instanceof AI&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){tb("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await aN(e,n)}else if(t instanceof NI?e.x_.$e(t):t instanceof PI?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Ib.min()))try{const t=await ux(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(HS.EMPTY_BYTE_STRING,r.snapshotVersion)),Zx(e,t);const i=new mT(r.target,t,n,r.sequenceNumber);Xx(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){tb("RemoteStore","Failed to raise snapshot:",t),await aN(e,t)}}async function aN(e,t,n){if(!Gb(t))throw t;e.C_.add(1),await Qx(e),e.M_.set("Offline"),n||(n=()=>ux(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{tb("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Gx(e)}))}function lN(e,t){return t().catch((n=>aN(e,n,t)))}async function cN(e){const t=ab(e),n=bN(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;uN(t);)try{const e=await dx(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,hN(t,e)}catch(e){await aN(t,e)}dN(t)&&fN(t)}function uN(e){return nN(e)&&e.b_.length<10}function hN(e,t){e.b_.push(t);const n=bN(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function dN(e){return nN(e)&&!bN(e).jo()&&e.b_.length>0}function fN(e){bN(e).start()}async function pN(e){bN(e).E_()}async function mN(e){const t=bN(e);for(const n of e.b_)t.P_(n.mutations)}async function gN(e,t,n){const r=e.b_.shift(),i=fI.from(r,t,n);await lN(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await cN(e)}async function yN(e,t){t&&bN(e).h_&&await async function(e,t){if(function(e){return vI(e)&&e!==lb.ABORTED}(t.code)){const n=e.b_.shift();bN(e).Yo(),await lN(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await cN(e)}}(e,t),dN(e)&&fN(e)}async function vN(e,t){const n=ab(e);n.asyncQueue.verifyOperationInProgress(),tb("RemoteStore","RemoteStore received new credentials");const r=nN(n);n.C_.add(3),await Qx(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Gx(n)}async function _N(e,t){const n=ab(e);t?(n.C_.delete(2),await Gx(n)):t||(n.C_.add(2),await Qx(n),n.M_.set("Unknown"))}function wN(e){return e.O_||(e.O_=function(e,t,n){const r=ab(e);return r.A_(),new qx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:iN.bind(null,e),Io:sN.bind(null,e),a_:oN.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),tN(e)?eN(e):e.M_.set("Unknown")):(await e.O_.stop(),rN(e))}))),e.O_}function bN(e){return e.N_||(e.N_=function(e,t,n){const r=ab(e);return r.A_(),new Wx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:pN.bind(null,e),Io:yN.bind(null,e),T_:mN.bind(null,e),I_:gN.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await cN(e)):(await e.N_.stop(),e.b_.length>0&&(tb("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class SN{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ub,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new SN(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cb(lb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kN(e,t){if(nb("AsyncQueue","".concat(t,": ").concat(e)),Gb(e))return new cb(lb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class EN{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Pb.comparator(t.key,n.key):(e,t)=>Pb.comparator(e.key,t.key),this.keyedMap=EE(),this.sortedSet=new FS(this.comparator)}static emptySet(e){return new EN(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof EN))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new EN;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class IN{constructor(){this.B_=new FS(Pb.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):sb():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class TN{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new TN(e,t,EN.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class CN{constructor(){this.k_=void 0,this.listeners=[]}}class xN{constructor(){this.queries=new wE((e=>pE(e)),fE),this.onlineState="Unknown",this.q_=new Set}}async function NN(e,t){const n=ab(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new CN),i)try{s.k_=await n.onListen(r)}catch(e){const n=kN(e,"Initialization of query '".concat(mE(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&DN(n)}async function PN(e,t){const n=ab(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function AN(e,t){const n=ab(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&DN(n)}function RN(e,t,n){const r=ab(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function DN(e){e.q_.forEach((e=>{e.next()}))}class ON{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new TN(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=TN.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class MN{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class LN{constructor(e){this.serializer=e}hs(e){return GI(this.serializer,e)}Ps(e){return e.metadata.exists?eT(this.serializer,e.document,!1):Ek.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return WI(e)}}class FN{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UN(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=Cb.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new LN(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||AE()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ab(e);let s=AE(),o=SE();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await fx(i,function(e){return cE(sE(Cb.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>hx(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new LN(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await _x(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function UN(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class jN{constructor(e){this.key=e}}class VN{constructor(e){this.key=e}}class BN{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=AE(),this.mutatedKeys=AE(),this._a=vE(e),this.aa=new EN(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new IN,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=gE(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const i=e.la.L_();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sb()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n);const s=t?this.Ia():[],o=0===this.oa.size&&this.current?1:0,a=o!==this.sa;return this.sa=o,0!==i.length||a?{snapshot:new TN(this.query,e.aa,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new IN,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=AE(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new VN(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new jN(n))})),t}da(e){this.ia=e.ls,this.oa=AE();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return TN.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class zN{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class qN{constructor(e){this.key=e,this.Ra=!1}}class WN{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new wE((e=>pE(e)),fE),this.fa=new Map,this.ga=new Set,this.pa=new FS(Pb.comparator),this.ya=new Map,this.wa=new zC,this.Sa={},this.ba=new Map,this.Da=yC.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function HN(e,t){const n=yP(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await fx(n.localStore,cE(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await KN(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&$x(n.remoteStore,e)}return i}async function KN(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await mx(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return rP(e,t.targetId,o.Ta),o.snapshot}(e,t,n,r);const s=await mx(e.localStore,t,!0),o=new BN(t,s.ls),a=o.ca(s.documents),l=xI.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);rP(e,n,c.Ta);const u=new zN(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function YN(e,t){const n=ab(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!fE(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await px(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Jx(n.remoteStore,r.targetId),tP(n,r.targetId)})).catch(zb)):(tP(n,r.targetId),await px(n.localStore,r.targetId,!0))}async function GN(e,t){const n=ab(e);try{const e=await function(e,t){const n=ab(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(HS.EMPTY_BYTE_STRING,Ib.min()).withLastLimboFreeSnapshotVersion(Ib.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=SE(),l=AE();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hx(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(Ib.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return qb.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(ob(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?ob(r.Ra):e.removedDocuments.size>0&&(ob(r.Ra),r.Ra=!1))})),await oP(n,e,t)}catch(e){await zb(e)}}function QN(e,t,n){const r=ab(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ab(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&DN(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $N(e,t,n){const r=ab(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new FS(Pb.comparator);e=e.insert(s,Ek.newNoDocument(s,Ib.min()));const n=AE().add(s),i=new CI(Ib.min(),new Map,new FS(bb),e,n);await GN(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),sP(r)}else await px(r.localStore,t,!1).then((()=>tP(r,t,n))).catch(zb)}async function JN(e,t){const n=ab(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ab(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=qb.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ob(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=AE();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);eP(n,r,null),ZN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oP(n,e)}catch(e){await zb(e)}}async function XN(e,t,n){const r=ab(e);try{const e=await function(e,t){const n=ab(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ob(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);eP(r,t,n),ZN(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await oP(r,e)}catch(n){await zb(n)}}function ZN(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function eP(e,t,n){const r=ab(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function tP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||nP(e,t)}))}function nP(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Jx(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),sP(e))}function rP(e,t,n){for(const r of n)r instanceof jN?(e.wa.addReference(r.key,t),iP(e,r)):r instanceof VN?(tb("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||nP(e,r.key)):sb()}function iP(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(tb("SyncEngine","New document in limbo: "+n),e.ga.add(r),sP(e))}function sP(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Pb(Cb.fromString(t)),r=e.Da.next();e.ya.set(r,new qN(n)),e.pa=e.pa.insert(n,r),$x(e.remoteStore,new mT(cE(sE(n.path)),r,"TargetPurposeLimboResolution",tS._e))}}async function oP(e,t,n){const r=ab(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=ix.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=ab(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>qb.forEach(t,(t=>qb.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>qb.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Gb(e))throw e;tb("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function aP(e,t){const n=ab(e);if(!n.currentUser.isEqual(t)){tb("SyncEngine","User change. New user:",t.toKey());const e=await cx(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new cb(lb.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await oP(n,e._s)}}function lP(e,t){const n=ab(e),r=n.ya.get(t);if(r&&r.Ra)return AE().add(r.key);{let e=AE();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function cP(e,t){const n=ab(e),r=await mx(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&rP(n,t.targetId,i.Ta),i}async function uP(e,t){const n=ab(e);return yx(n.localStore,t).then((e=>oP(n,e)))}async function hP(e,t,n,r){const i=ab(e),s=await function(e,t){const n=ab(e),r=ab(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):qb.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await cN(i.remoteStore):"acknowledged"===n||"rejected"===n?(eP(i,t,r||null),ZN(i,t),function(e,t){ab(ab(e).mutationQueue).Fn(t)}(i.localStore,t)):sb(),await oP(i,s)):tb("SyncEngine","Cannot apply mutation batch with id: "+t)}async function dP(e,t,n){const r=ab(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await fx(r.localStore,cE(t[0]));for(const e of t){const t=r.ma.get(e),n=await cP(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await gx(r.localStore,o);e=await fx(r.localStore,t),await KN(r,fP(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function fP(e){return iE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function pP(e){return function(e){return ab(ab(e).persistence).Bi()}(ab(e).localStore)}async function mP(e,t,n,r){const i=ab(e);if(i.Ca)return void tb("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await yx(i.localStore,yE(s[0])),r=CI.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,HS.EMPTY_BYTE_STRING);await oP(i,e,r);break}case"rejected":await px(i.localStore,t,!0),tP(i,t,r);break;default:sb()}}async function gP(e,t,n){const r=yP(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){tb("SyncEngine","Adding an already active target "+e);continue}const t=await gx(r.localStore,e),n=await fx(r.localStore,t);await KN(r,fP(t),n.targetId,!1,n.resumeToken),$x(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await px(r.localStore,e,!1).then((()=>{Jx(r.remoteStore,e),tP(r,e)})).catch(zb)}}function yP(e){const t=ab(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$N.bind(null,t),t.Va.a_=AN.bind(null,t.eventManager),t.Va.Fa=RN.bind(null,t.eventManager),t}function vP(e){const t=ab(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XN.bind(null,t),t}class _P{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Vx(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return lx(this.persistence,new ox,e.initialUser,this.serializer)}createPersistence(e){return new GC($C.jr,this.serializer)}createSharedClientState(e){return new Nx}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wP extends _P{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await vP(this.xa.syncEngine),await cN(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return lx(this.persistence,new ox,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new EC(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new eS(t,this.persistence);return new Zb(e.asyncQueue,n)}createPersistence(e){const t=rx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cC.withCacheSize(this.cacheSizeBytes):cC.DEFAULT;return new ex(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ux(),jx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Nx}}class bP extends wP{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof xx&&(this.sharedClientState.syncEngine={Ys:hP.bind(null,t),Zs:mP.bind(null,t),Xs:gP.bind(null,t),Bi:pP.bind(null,t),Js:uP.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=ab(e);if(yP(n),vP(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await dP(n,e.toArray());n.Ca=!0,await _N(n.remoteStore,!0);for(const r of t)$x(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(tP(n,i),px(n.localStore,i,!0)))),Jx(n.remoteStore,i)})),await t,await dP(n,e),function(e){const t=ab(e);t.ya.forEach(((e,n)=>{Jx(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new FS(Pb.comparator)}(n),n.Ca=!1,await _N(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Ux();if(!xx.D(t))throw new cb(lb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=rx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class SP{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>QN(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=aP.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new xN}createDatastore(e){const t=Vx(e.databaseInfo.databaseId),n=function(e){return new Fx(e)}(e.databaseInfo);return function(e,t,n,r){return new Hx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yx(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>QN(this.syncEngine,e,0)),Ax.D()?new Ax:new Px)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new WN(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ab(e);tb("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await Qx(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function kP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class EP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):nb("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class IP{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new ub,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new MN(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class TP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new cb(lb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=ab(e),r=JI(n.serializer)+"/documents",i={documents:t.map((e=>YI(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){ob(!!t.found),t.found.name,t.found.updateTime;const n=GI(e,t.found.name),r=WI(t.found.updateTime),i=t.found.createTime?WI(t.found.createTime):Ib.min(),s=new Sk({mapValue:{fields:t.found.fields}});return Ek.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){ob(!!t.missing),ob(!!t.readTime);const n=GI(e,t.missing),r=WI(t.readTime);return Ek.newNoDocument(n,r)}(e,t):sb()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());ob(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new uI(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Pb.fromPath(t);this.mutations.push(new hI(n,this.precondition(n)))})),await async function(e,t){const n=ab(e),r=JI(n.serializer)+"/documents",i={writes:t.map((e=>tT(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sb();t=Ib.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new cb(lb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ib.min())?JE.exists(!1):JE.updateTime(t):JE.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ib.min()))throw new cb(lb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return JE.updateTime(t)}return JE.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CP{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new Bx(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new TP(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!nS(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vI(t)}return!1}}class xP{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Jw.UNAUTHENTICATED,this.clientId=wb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{tb("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(tb("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new cb(lb.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ub;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=kN(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function NP(e,t){e.asyncQueue.verifyOperationInProgress(),tb("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await cx(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function PP(e,t){e.asyncQueue.verifyOperationInProgress();const n=await RP(e);tb("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>vN(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>vN(t.remoteStore,n))),e._onlineComponents=t}function AP(e){return"FirebaseError"===e.name?e.code===lb.FAILED_PRECONDITION||e.code===lb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function RP(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tb("FirestoreClient","Using user provided OfflineComponentProvider");try{await NP(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!AP(n))throw n;rb("Error using user provided cache. Falling back to memory cache: "+n),await NP(e,new _P)}}else tb("FirestoreClient","Using default OfflineComponentProvider"),await NP(e,new _P);return e._offlineComponents}async function DP(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tb("FirestoreClient","Using user provided OnlineComponentProvider"),await PP(e,e._uninitializedComponentsProvider._online)):(tb("FirestoreClient","Using default OnlineComponentProvider"),await PP(e,new SP))),e._onlineComponents}function OP(e){return RP(e).then((e=>e.persistence))}function MP(e){return RP(e).then((e=>e.localStore))}function LP(e){return DP(e).then((e=>e.remoteStore))}function FP(e){return DP(e).then((e=>e.syncEngine))}function UP(e){return DP(e).then((e=>e.datastore))}async function jP(e){const t=await DP(e),n=t.eventManager;return n.onListen=HN.bind(null,t.syncEngine),n.onUnlisten=YN.bind(null,t.syncEngine),n}function VP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ub;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new EP({next:s=>{t.enqueueAndForget((()=>PN(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new cb(lb.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new cb(lb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new ON(sE(n.path),s,{includeMetadataChanges:!0,J_:!0});return NN(e,o)}(await jP(e),e.asyncQueue,t,n,r))),r.promise}function BP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ub;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new EP({next:n=>{t.enqueueAndForget((()=>PN(e,o))),n.fromCache&&"server"===r.source?i.reject(new cb(lb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ON(n,s,{includeMetadataChanges:!0,J_:!0});return NN(e,o)}(await jP(e),e.asyncQueue,t,n,r))),r.promise}function zP(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?bI().encode(e):e,function(e,t){return new IP(e,t)}(function(e,t){if(e instanceof Uint8Array)return kP(e,t);if(e instanceof ArrayBuffer)return kP(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Vx(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ab(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ab(e),r=WI(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(UN(r));const i=new FN(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await oP(e,o.ra,void 0),await function(e,t){const n=ab(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return rb("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await FP(e),i,r)}))}function qP(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const WP=new Map;function HP(e,t,n){if(!n)throw new cb(lb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function KP(e,t,n,r){if(!0===t&&!0===r)throw new cb(lb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function YP(e){if(!Pb.isDocumentKey(e))throw new cb(lb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function GP(e){if(Pb.isDocumentKey(e))throw new cb(lb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function QP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":sb()}function $P(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cb(lb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=QP(e);throw new cb(lb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function JP(e,t){if(t<=0)throw new cb(lb.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class XP{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new cb(lb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new cb(lb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qP(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new cb(lb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new cb(lb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new cb(lb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZP{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new cb(lb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new cb(lb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new db;switch(e.type){case"firstParty":return new gb(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new cb(lb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WP.get(e);t&&(tb("ComponentProvider","Removing Datastore"),WP.delete(e),t.terminate())}(this),Promise.resolve()}}function eA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=$P(e,ZP))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&rb("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Jw.MOCK_USER;else{t=et(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new cb(lb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Jw(s)}e._authCredentials=new fb(new hb(t,n))}}class tA{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tA(this.firestore,e,this._query)}}class nA{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nA(this.firestore,e,this._key)}}class rA extends tA{constructor(e,t,n){super(e,t,sE(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nA(this.firestore,null,new Pb(e))}withConverter(e){return new rA(this.firestore,e,this._path)}}function iA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),HP("collection","path",t),e instanceof ZP){const n=Cb.fromString(t,...r);return GP(n),new rA(e,null,n)}{if(!(e instanceof nA||e instanceof rA))throw new cb(lb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Cb.fromString(t,...r));return GP(n),new rA(e.firestore,null,n)}}function sA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),1===arguments.length&&(t=wb.newId()),HP("doc","path",t),e instanceof ZP){const n=Cb.fromString(t,...r);return YP(n),new nA(e,null,new Pb(n))}{if(!(e instanceof nA||e instanceof rA))throw new cb(lb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Cb.fromString(t,...r));return YP(n),new nA(e.firestore,e instanceof rA?e.converter:null,new Pb(n))}}function oA(e,t){return e=jt(e),t=jt(t),(e instanceof nA||e instanceof rA)&&(t instanceof nA||t instanceof rA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function aA(e,t){return e=jt(e),t=jt(t),e instanceof tA&&t instanceof tA&&e.firestore===t.firestore&&fE(e._query,t._query)&&e.converter===t.converter}class lA{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Bx(this,"async_queue_retry"),this.iu=()=>{const e=jx();e&&tb("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=jx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=jx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new ub;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Gb(e))throw e;tb("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw nb("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=SN.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&sb()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function cA(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class uA{constructor(){this._progressObserver={},this._taskCompletionResolver=new ub,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hA extends ZP{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new lA,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fA(this),this._firestoreClient.terminate()}}function dA(e){return e._firestoreClient||fA(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function fA(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ZS(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qP(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new xP(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function pA(e,t,n){const r=new ub;return e.asyncQueue.enqueue((async()=>{try{await NP(e,n),await PP(e,t),r.resolve()}catch(e){const n=e;if(!AP(n))throw n;rb("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function mA(e){return function(e){const t=new ub;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ab(e);nN(n.remoteStore)||tb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ab(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=kN(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await FP(e),t))),t.promise}(dA(e=$P(e,hA)))}function gA(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await OP(e),n=await LP(e);return t.setNetworkEnabled(!0),function(e){const t=ab(e);return t.C_.delete(0),Gx(t)}(n)}))}(dA(e=$P(e,hA)))}function yA(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await OP(e),n=await LP(e);return t.setNetworkEnabled(!1),async function(e){const t=ab(e);t.C_.add(0),await Qx(t),t.M_.set("Offline")}(n)}))}(dA(e=$P(e,hA)))}function vA(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ab(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await MP(e),t)))}(dA(e=$P(e,hA)),t).then((t=>t?new tA(e,null,t.query):null))}function _A(e){if(e._initialized||e._terminated)throw new cb(lb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wA(HS.fromBase64String(e))}catch(e){throw new cb(lb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wA(HS.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bA{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new cb(lb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nb(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class SA{constructor(e){this._methodName=e}}class kA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new cb(lb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new cb(lb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bb(this._lat,e._lat)||bb(this._long,e._long)}}const EA=/^__.*__$/;class IA{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new oI(e,this.data,this.fieldMask,t,this.fieldTransforms):new sI(e,this.data,t,this.fieldTransforms)}}class TA{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new oI(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sb()}}class xA{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new xA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return GA(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(CA(this.Iu)&&EA.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class NA{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vx(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new xA({Iu:e,methodName:t,gu:n,path:Nb.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PA(e){const t=e._freezeSettings(),n=Vx(e._databaseId);return new NA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function AA(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);WA("Data must be an object, but it was:",o,r);const a=zA(r,o);let l,c;if(s.merge)l=new qS(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=HA(t,r,n);if(!o.contains(i))throw new cb(lb.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));QA(e,i)||e.push(i)}l=new qS(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new IA(new Sk(a),l,c)}class RA extends SA{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof RA}}function DA(e,t,n){return new xA({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class OA extends SA{_toFieldTransform(e){return new QE(e.path,new BE)}isEqual(e){return e instanceof OA}}class MA extends SA{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=DA(this,e,!0),n=this.yu.map((e=>BA(e,t))),r=new zE(n);return new QE(e.path,r)}isEqual(e){return this===e}}class LA extends SA{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=DA(this,e,!0),n=this.yu.map((e=>BA(e,t))),r=new WE(n);return new QE(e.path,r)}isEqual(e){return this===e}}class FA extends SA{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new KE(e.serializer,LE(e.serializer,this.wu));return new QE(e.path,t)}isEqual(e){return this===e}}function UA(e,t,n,r){const i=e.pu(1,t,n);WA("Data must be an object, but it was:",i,r);const s=[],o=Sk.empty();MS(r,((e,r)=>{const a=YA(t,e,n);r=jt(r);const l=i.Ru(a);if(r instanceof RA)s.push(a);else{const e=BA(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new qS(s);return new TA(o,a,i.fieldTransforms)}function jA(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[HA(t,r,n)],l=[i];if(s.length%2!=0)throw new cb(lb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(HA(t,s[d])),l.push(s[d+1]);const c=[],u=Sk.empty();for(let d=a.length-1;d>=0;--d)if(!QA(c,a[d])){const e=a[d];let t=l[d];t=jt(t);const n=o.Ru(e);if(t instanceof RA)c.push(e);else{const r=BA(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new qS(c);return new TA(u,h,o.fieldTransforms)}function VA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return BA(n,e.pu(r?4:3,t))}function BA(e,t){if(qA(e=jt(e)))return WA("Unsupported field value:",t,e),zA(e,t);if(e instanceof SA)return function(e,t){if(!CA(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=BA(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=jt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return LE(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Eb.fromDate(e);return{timestampValue:BI(t.serializer,n)}}if(e instanceof Eb){const n=new Eb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:BI(t.serializer,n)}}if(e instanceof kA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wA)return{bytesValue:zI(t.serializer,e._byteString)};if(e instanceof nA){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:HI(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(QP(e)))}(e,t)}function zA(e,t){const n={};return LS(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):MS(e,((e,r)=>{const i=BA(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function qA(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Eb||e instanceof kA||e instanceof wA||e instanceof nA||e instanceof SA)}function WA(e,t,n){if(!qA(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=QP(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function HA(e,t,n){if((t=jt(t))instanceof bA)return t._internalPath;if("string"==typeof t)return YA(e,t);throw GA("Field path arguments must be of type string or ",e,!1,void 0,n)}const KA=new RegExp("[~\\*/\\[\\]]");function YA(e,t,n){if(t.search(KA)>=0)throw GA("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new bA(...t.split("."))._internalPath}catch(qg){throw GA("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function GA(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new cb(lb.INVALID_ARGUMENT,a+e+l)}function QA(e,t){return e.some((e=>e.isEqual(t)))}class $A{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nA(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JA extends $A{data(){return super.data()}}function XA(e,t){return"string"==typeof t?YA(e,t):t instanceof bA?t._internalPath:t._delegate._internalPath}function ZA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cb(lb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eR{}class tR extends eR{}function nR(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof eR&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof iR)).length,n=e.filter((e=>e instanceof rR)).length;if(t>1||t>0&&n>0)throw new cb(lb.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class rR extends tR{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new rR(e,t,n)}_apply(e){const t=this._parse(e);return dR(e._query,t),new tA(e.firestore,e.converter,hE(e._query,t))}_parse(e){const t=PA(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new cb(lb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){hR(o,s);const t=[];for(const n of o)t.push(uR(r,e,n));a={arrayValue:{values:t}}}else a=uR(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||hR(o,s),a=VA(n,t,o,"in"===s||"not-in"===s);return Ak.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class iR extends eR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iR(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Rk.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)dR(n,i),n=hE(n,i)}(e._query,t),new tA(e.firestore,e.converter,hE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sR extends tR{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sR(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new cb(lb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new cb(lb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xk(t,n)}(e._query,this._field,this._direction);return new tA(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new rE(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class oR extends tR{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new oR(e,t,n)}_apply(e){return new tA(e.firestore,e.converter,dE(e._query,this._limit,this._limitType))}}class aR extends tR{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new aR(e,t,n)}_apply(e){const t=cR(e,this.type,this._docOrFields,this._inclusive);return new tA(e.firestore,e.converter,function(e,t){return new rE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class lR extends tR{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new lR(e,t,n)}_apply(e){const t=cR(e,this.type,this._docOrFields,this._inclusive);return new tA(e.firestore,e.converter,function(e,t){return new rE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function cR(e,t,n,r){if(n[0]=jt(n[0]),n[0]instanceof $A)return function(e,t,n,r,i){if(!r)throw new cb(lb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of lE(e))if(o.field.isKeyField())s.push(uk(t,r.key));else{const e=r.data.field(o.field);if($S(e))throw new cb(lb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new cb(lb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Ik(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=PA(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new cb(lb.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new cb(lb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!aE(e)&&-1!==s.indexOf("/"))throw new cb(lb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Cb.fromString(s));if(!Pb.isDocumentKey(n))throw new cb(lb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Pb(n);a.push(uk(t,i))}else{const e=VA(n,r,s);a.push(e)}}return new Ik(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function uR(e,t,n){if("string"==typeof(n=jt(n))){if(""===n)throw new cb(lb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aE(t)&&-1!==n.indexOf("/"))throw new cb(lb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Cb.fromString(n));if(!Pb.isDocumentKey(r))throw new cb(lb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return uk(e,new Pb(r))}if(n instanceof nA)return uk(e,n._key);throw new cb(lb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(QP(n),"."))}function hR(e,t){if(!Array.isArray(e)||0===e.length)throw new cb(lb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function dR(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new cb(lb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new cb(lb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class fR{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(rk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return GS(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(QS(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sb()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return MS(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new kA(GS(e.latitude),GS(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=JS(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(XS(e));default:return null}}convertTimestamp(e){const t=YS(e);return new Eb(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Cb.fromString(e);ob(pT(n));const r=new ek(n.get(1),n.get(3)),i=new Pb(n.popFirst(5));return r.isEqual(t)||nb("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function pR(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class mR extends fR{constructor(e){super(),this.firestore=e}convertBytes(e){return new wA(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nA(this.firestore,null,t)}}class gR{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yR extends $A{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new vR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(XA("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class vR extends yR{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _R{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new gR(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new vR(this._firestore,this._userDataWriter,n.key,n,new gR(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new cb(lb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new vR(e._firestore,e._userDataWriter,n.doc.key,n.doc,new gR(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new vR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:wR(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sb()}}function bR(e,t){return e instanceof yR&&t instanceof yR?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _R&&t instanceof _R&&e._firestore===t._firestore&&aA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class SR extends fR{constructor(e){super(),this.firestore=e}convertBytes(e){return new wA(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nA(this.firestore,null,t)}}function kR(e){e=$P(e,nA);const t=$P(e.firestore,hA),n=dA(t),r=new SR(t);return function(e,t){const n=new ub;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ab(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new cb(lb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=kN(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await MP(e),t,n))),n.promise}(n,e._key).then((n=>new yR(t,r,e._key,n,new gR(null!==n&&n.hasLocalMutations,!0),e.converter)))}function ER(e){e=$P(e,tA);const t=$P(e.firestore,hA),n=dA(t),r=new SR(t);return function(e,t){const n=new ub;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await mx(e,t,!0),i=new BN(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=kN(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await MP(e),t,n))),n.promise}(n,e._query).then((n=>new _R(t,r,e,n)))}function IR(e,t,n){e=$P(e,nA);const r=$P(e.firestore,hA),i=pR(e.converter,t,n);return NR(r,[AA(PA(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,JE.none())])}function TR(e,t,n){e=$P(e,nA);const r=$P(e.firestore,hA),i=PA(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=jt(t))||t instanceof bA?jA(i,"updateDoc",e._key,t,n,a):UA(i,"updateDoc",e._key,t),NR(r,[s.toMutation(e._key,JE.exists(!0))])}function CR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=jt(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||cA(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(cA(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof nA)h=$P(e.firestore,hA),d=sE(e._key.path),u={next:t=>{n[l]&&n[l](PR(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=$P(e,tA);h=$P(t.firestore,hA),d=t._query;const r=new SR(h);u={next:e=>{n[l]&&n[l](new _R(h,r,t,e))},error:n[l+1],complete:n[l+2]},ZA(e._query)}return function(e,t,n,r){const i=new EP(r),s=new ON(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>NN(await jP(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>PN(await jP(e),s)))}}(dA(h),d,c,u)}function xR(e,t){return function(e,t){const n=new EP(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ab(e).q_.add(t),t.next()}(await jP(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ab(e).q_.delete(t)}(await jP(e),n)))}}(dA(e=$P(e,hA)),cA(t)?t:{next:t})}function NR(e,t){return function(e,t){const n=new ub;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=vP(e);try{const e=await function(e,t){const n=ab(e),r=Eb.now(),i=t.reduce(((e,t)=>e.add(t.key)),AE());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=SE(),l=AE();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=rI(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new oI(e.key,t,kk(t.value.mapValue),JE.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:IE(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new FS(bb)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await oP(r,e.changes),await cN(r.remoteStore)}catch(e){const t=kN(e,"Failed to persist write");n.reject(t)}}(await FP(e),t,n))),n.promise}(dA(e),t)}function PR(e,t,n){const r=n.docs.get(t._key),i=new SR(e);return new yR(e,i,t._key,r,new gR(n.hasPendingWrites,n.fromCache),t.converter)}const AR={maxAttempts:5};class RR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=PA(e)}set(e,t,n){this._verifyNotCommitted();const r=DR(e,this._firestore),i=pR(r.converter,t,n),s=AA(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,JE.none())),this}update(e,t,n){this._verifyNotCommitted();const r=DR(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=jt(t))||t instanceof bA?jA(this._dataReader,"WriteBatch.update",r._key,t,n,o):UA(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,JE.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=DR(e,this._firestore);return this._mutations=this._mutations.concat(new uI(t._key,JE.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new cb(lb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function DR(e,t){if((e=jt(e)).firestore!==t)throw new cb(lb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class OR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=PA(e)}get(e){const t=DR(e,this._firestore),n=new mR(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return sb();const r=e[0];if(r.isFoundDocument())return new $A(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new $A(this._firestore,n,t._key,null,t.converter);throw sb()}))}set(e,t,n){const r=DR(e,this._firestore),i=pR(r.converter,t,n),s=AA(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=DR(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=jt(t))||t instanceof bA?jA(this._dataReader,"Transaction.update",r._key,t,n,o):UA(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=DR(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=DR(e,this._firestore),n=new SR(this._firestore);return super.get(e).then((e=>new yR(this._firestore,n,t._key,e._document,new gR(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Xw=e}(An),In(new Vt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new hA(new pb(e.getProvider("auth-internal")),new vb(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cb(lb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ek(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ln($w,"4.3.2",e),Ln($w,"4.3.2","esm2017")}();function MR(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new cb("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function LR(){if("undefined"===typeof Uint8Array)throw new cb("unimplemented","Uint8Arrays are not available in this environment.")}function FR(){if("undefined"==typeof atob)throw new cb("unimplemented","Blobs are unavailable in Firestore in this environment.")}class UR{constructor(e){this._delegate=e}static fromBase64String(e){return FR(),new UR(wA.fromBase64String(e))}static fromUint8Array(e){return LR(),new UR(wA.fromUint8Array(e))}toBase64(){return FR(),this._delegate.toBase64()}toUint8Array(){return LR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jR(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class VR{enableIndexedDbPersistence(e,t){return function(e,t){_A(e=$P(e,hA));const n=dA(e);if(n._uninitializedComponentsProvider)throw new cb(lb.FAILED_PRECONDITION,"SDK cache is already specified.");rb("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new SP;return pA(n,i,new wP(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){_A(e=$P(e,hA));const t=dA(e);if(t._uninitializedComponentsProvider)throw new cb(lb.FAILED_PRECONDITION,"SDK cache is already specified.");rb("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new SP;return pA(t,r,new bP(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new cb(lb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ub;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Hb.D())return Promise.resolve();const t=e+"main";await Hb.delete(t)}(rx(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class BR{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof ek||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||rb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eA(this._delegate,e,t,n)}enableNetwork(){return gA(this._delegate)}disableNetwork(){return yA(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,KP("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return mA(this._delegate)}onSnapshotsInSync(e){return xR(this._delegate,e)}get app(){if(!this._appCompat)throw new cb("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tD(this,iA(this._delegate,e))}catch(t){throw YR(t,"collection()","Firestore.collection()")}}doc(e){try{return new KR(this,sA(this._delegate,e))}catch(t){throw YR(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new XR(this,function(e,t){if(e=$P(e,ZP),HP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new cb(lb.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new tA(e,null,function(e){return new rE(Cb.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw YR(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=$P(e,hA);const r=Object.assign(Object.assign({},AR),n);return function(e){if(e.maxAttempts<1)throw new cb(lb.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new ub;return e.asyncQueue.enqueueAndForget((async()=>{const i=await UP(e);new CP(e.asyncQueue,i,n,t,r).run()})),r.promise}(dA(e),(n=>t(new OR(e,n))),r)}(this._delegate,(t=>e(new qR(this,t))))}batch(){return dA(this._delegate),new WR(new RR(this._delegate,(e=>NR(this._delegate,e))))}loadBundle(e){return function(e,t){const n=dA(e=$P(e,hA)),r=new uA;return zP(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return vA(this._delegate,e).then((e=>e?new XR(this,e):null))}}class zR extends fR{constructor(e){super(),this.firestore=e}convertBytes(e){return new UR(new wA(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return KR.forKey(t,this.firestore,null)}}class qR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zR(e)}get(e){const t=nD(e);return this._delegate.get(t).then((e=>new $R(this._firestore,new yR(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=nD(e);return n?(MR("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=nD(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=nD(e);return this._delegate.delete(t),this}}class WR{constructor(e){this._delegate=e}set(e,t,n){const r=nD(e);return n?(MR("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=nD(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=nD(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class HR{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new vR(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new JR(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=HR.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new HR(e,new zR(e),t),r.set(t,i)),i}}HR.INSTANCES=new WeakMap;class KR{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zR(e)}static forPath(e,t,n){if(e.length%2!==0)throw new cb("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new KR(t,new nA(t._delegate,n,new Pb(e)))}static forKey(e,t,n){return new KR(t,new nA(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new tD(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tD(this.firestore,iA(this._delegate,e))}catch(t){throw YR(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=jt(e))instanceof nA&&oA(this._delegate,e)}set(e,t){t=MR("DocumentReference.set",t);try{return t?IR(this._delegate,e,t):IR(this._delegate,e)}catch(n){throw YR(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?TR(this._delegate,e):TR(this._delegate,e,t,...r)}catch(s){throw YR(s,"updateDoc()","DocumentReference.update()")}}delete(){return NR($P((e=this._delegate).firestore,hA),[new uI(e._key,JE.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=GR(t),i=QR(t,(e=>new $R(this.firestore,new yR(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return CR(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?kR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$P(e,nA);const t=$P(e.firestore,hA);return VP(dA(t),e._key,{source:"server"}).then((n=>PR(t,e,n)))}(this._delegate):function(e){e=$P(e,nA);const t=$P(e.firestore,hA);return VP(dA(t),e._key).then((n=>PR(t,e,n)))}(this._delegate),t.then((e=>new $R(this.firestore,new yR(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new KR(this.firestore,e?this._delegate.withConverter(HR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function YR(e,t,n){return e.message=e.message.replace(t,n),e}function GR(e){for(const t of e)if("object"===typeof t&&!jR(t))return t;return{}}function QR(e,t){var n,r;let i;return i=jR(e[0])?e[0]:jR(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $R{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new KR(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bR(this._delegate,e._delegate)}}class JR extends $R{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||sb(),t}}class XR{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zR(e)}where(e,t,n){try{return new XR(this.firestore,nR(this._delegate,function(e,t,n){const r=t,i=XA("where",e);return rR._create(i,r,n)}(e,t,n)))}catch(r){throw YR(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new XR(this.firestore,nR(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=XA("orderBy",e);return sR._create(n,t)}(e,t)))}catch(n){throw YR(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new XR(this.firestore,nR(this._delegate,(JP("limit",t=e),oR._create("limit",t,"F"))))}catch(t){throw YR(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new XR(this.firestore,nR(this._delegate,(JP("limitToLast",t=e),oR._create("limitToLast",t,"L"))))}catch(t){throw YR(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new XR(this.firestore,nR(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return aR._create("startAt",t,!0)}(...arguments)))}catch(e){throw YR(e,"startAt()","Query.startAt()")}}startAfter(){try{return new XR(this.firestore,nR(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return aR._create("startAfter",t,!1)}(...arguments)))}catch(e){throw YR(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new XR(this.firestore,nR(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lR._create("endBefore",t,!1)}(...arguments)))}catch(e){throw YR(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new XR(this.firestore,nR(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lR._create("endAt",t,!0)}(...arguments)))}catch(e){throw YR(e,"endAt()","Query.endAt()")}}isEqual(e){return aA(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ER(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$P(e,tA);const t=$P(e.firestore,hA),n=dA(t),r=new SR(t);return BP(n,e._query,{source:"server"}).then((n=>new _R(t,r,e,n)))}(this._delegate):function(e){e=$P(e,tA);const t=$P(e.firestore,hA),n=dA(t),r=new SR(t);return ZA(e._query),BP(n,e._query).then((n=>new _R(t,r,e,n)))}(this._delegate),t.then((e=>new eD(this.firestore,new _R(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=GR(t),i=QR(t,(e=>new eD(this.firestore,new _R(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return CR(this._delegate,r,i)}withConverter(e){return new XR(this.firestore,e?this._delegate.withConverter(HR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class ZR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new JR(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new XR(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new JR(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new ZR(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new JR(this._firestore,n))}))}isEqual(e){return bR(this._delegate,e._delegate)}}class tD extends XR{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new KR(this.firestore,e):null}doc(e){try{return new KR(this.firestore,void 0===e?sA(this._delegate):sA(this._delegate,e))}catch(t){throw YR(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=$P(e.firestore,hA),r=sA(e),i=pR(e.converter,t);return NR(n,[AA(PA(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,JE.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new KR(this.firestore,e)))}isEqual(e){return oA(this._delegate,e._delegate)}withConverter(e){return new tD(this.firestore,e?this._delegate.withConverter(HR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nD(e){return $P(e,nA)}class rD{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new bA(...t)}static documentId(){return new rD(Nb.keyField().canonicalString())}isEqual(e){return(e=jt(e))instanceof bA&&this._delegate._internalPath.isEqual(e._internalPath)}}class iD{constructor(e){this._delegate=e}static serverTimestamp(){const e=new OA("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new iD(e)}static delete(){const e=new RA("deleteField");return e._methodName="FieldValue.delete",new iD(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new MA("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new iD(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LA("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new iD(e)}static increment(e){const t=new FA("increment",e);return t._methodName="FieldValue.increment",new iD(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sD={Firestore:BR,GeoPoint:kA,Timestamp:Eb,Blob:UR,Transaction:qR,WriteBatch:WR,DocumentReference:KR,DocumentSnapshot:$R,Query:XR,QueryDocumentSnapshot:JR,QuerySnapshot:eD,CollectionReference:tD,FieldPath:rD,FieldValue:iD,setLogLevel:function(e){var t;t=e,Zw.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Vt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},sD)))}(e,((e,t)=>new BR(e,t,new VR))),e.registerVersion("@firebase/firestore-compat","0.3.22")}(Gi);const oD={apiKey:"AIzaSyAX7mX8Frj3J9voKSe3MmJY5QWW6kpV02U",authDomain:"clone-4a5d2.firebaseapp.com",databaseURL:"https://clone-4a5d2-default-rtdb.firebaseio.com",projectId:"clone-4a5d2",storageBucket:"clone-4a5d2.appspot.com",messagingSenderId:"795719853291",appId:"1:795719853291:web:27e73dd60eaefa0c9a4aae",measurementId:"G-HTS3H8MRKV"},aD=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn();e=jt(e);const t=Tn(e,ai);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Tn(e,ai);if(n.isInitialized()){const e=n.getImmediate();if(wt(t,n.getOptions()))return e;throw pi.create("already-initialized")}const r=n.initialize({options:t})}(e)}(Rn(oD)),Gi.initializeApp(oD).firestore()),lD=Gi.auth();const cD=function(){const[{basket:e,user:t},n]=h();return(0,l.jsxs)("div",{className:"header",children:[(0,l.jsx)(Me,{to:"/",children:(0,l.jsx)("img",{className:"header__logo",src:"https://static.vecteezy.com/system/resources/previews/019/017/542/non_2x/amazon-logo-free-png.png"})}),(0,l.jsxs)("div",{className:"header__search",children:[(0,l.jsx)("input",{className:"header__searchInput",type:"text"}),(0,l.jsx)(Te.Z,{className:"header__searchIcon"})]}),(0,l.jsxs)("div",{className:"header__nav",children:[(0,l.jsx)(Me,{to:!t&&"/login",children:(0,l.jsxs)("div",{onClick:()=>{t&&lD.signOut()},className:"header__option",children:[(0,l.jsxs)("span",{className:"header__optionLineOne",children:["Hello ",t?t.email:"Guest"]}),(0,l.jsx)("span",{className:"header__optionLineTwo",children:t?"SignOut":"SignIn"})]})}),(0,l.jsx)(Me,{to:"/orders",children:(0,l.jsxs)("div",{className:"header__option",children:[(0,l.jsx)("span",{className:"header__optionLineOne",children:"Returns"}),(0,l.jsx)("span",{className:"header__optionLineTwo",children:"& Orders"})]})}),(0,l.jsxs)("div",{className:"header__option",children:[(0,l.jsx)("span",{className:"header__optionLineOne",children:"Your"}),(0,l.jsx)("span",{className:"header__optionLineTwo",children:"Prime"})]}),(0,l.jsx)(Me,{to:"/checkout",children:(0,l.jsxs)("div",{className:"header__optionBasket",children:[(0,l.jsx)(Ce.Z,{}),(0,l.jsx)("span",{className:"header__optionLineTwo header__basketCount",children:null===e||void 0===e?void 0:e.length})]})})]})]})};const uD=function(e){let{id:t,title:n,image:r,price:i,rating:s}=e;const[{basket:o},a]=h();return(0,l.jsxs)("div",{className:"product",children:[(0,l.jsxs)("div",{className:"product__info",children:[(0,l.jsx)("p",{children:n}),(0,l.jsxs)("p",{className:"product__price",children:[(0,l.jsx)("small",{children:"$"}),(0,l.jsx)("strong",{children:i})]}),(0,l.jsx)("div",{className:"product__rating",children:Array(s).fill().map(((e,t)=>(0,l.jsx)("p",{children:"\ud83c\udf1f"})))})]}),(0,l.jsx)("img",{src:r,alt:""}),(0,l.jsx)("button",{onClick:()=>{a({type:"ADD_TO_BASKET",item:{id:t,title:n,image:r,price:i,rating:s}})},children:"Add to Basket"})]})};const hD=function(){return(0,l.jsx)("div",{className:"home",children:(0,l.jsxs)("div",{className:"home__container",children:[(0,l.jsx)("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/31/12407722031/nss/thankyou/mob/new/stories/revised/PC/hero/2X_PC._CB574589084_.jpg",alt:""}),(0,l.jsxs)("div",{className:"home__row",children:[(0,l.jsx)(uD,{id:"123456",title:"Redmi 12C",price:9899,image:"https://m.media-amazon.com/images/I/41mOO9Ro-2L._AC_SY200_.jpg",rating:4}),(0,l.jsx)(uD,{id:"123466",title:"Pova 5 Pro",price:13499,image:"https://m.media-amazon.com/images/I/41gWa+F0PIL._AC_SY200_.jpg",rating:5}),(0,l.jsx)(uD,{id:"122456",title:"Nokia G42",price:11899,image:"https://m.media-amazon.com/images/I/41g6kR7fbaL._AC_SY200_.jpg",rating:3})]}),(0,l.jsxs)("div",{className:"home__row",children:[(0,l.jsx)(uD,{id:"123416",title:"Levi's Men's Mid Rise 512 Slim Fit Jeans",price:1450,image:"https://images-eu.ssl-images-amazon.com/images/I/81z63uQDawL._AC_UL160_SR160,160_.jpg",rating:4}),(0,l.jsx)(uD,{id:"123476",title:"Levi's Men's Slim Jeans",price:1535,image:"https://images-eu.ssl-images-amazon.com/images/I/71vqd7FP49L._AC_UL160_SR160,160_.jpg",rating:3})]}),(0,l.jsx)("div",{className:"home__row",children:(0,l.jsx)(uD,{id:"128456",title:"Samsung 138 cm (55 inches) 4K Ultra HD Smart NEO QLED TV QA55QN95BAKLXL (Bright Silver) | With 3 Years Warranty",price:154999,image:"https://m.media-amazon.com/images/I/81Ri+l0nQyL._AC_UY218_.jpg",rating:4})})]})})};const dD=function(){const e=oe(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)("");return(0,l.jsxs)("div",{className:"login",children:[(0,l.jsx)(Me,{to:"/",children:(0,l.jsx)("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1024px-Amazon_logo.svg.png",alt:""})}),(0,l.jsxs)("div",{className:"login__container",children:[(0,l.jsx)("h1",{children:"Sign in"}),(0,l.jsxs)("form",{children:[(0,l.jsx)("h5",{children:"E-mail"}),(0,l.jsx)("input",{type:"email",value:t,onChange:e=>n(e.target.value)}),(0,l.jsx)("h5",{children:"Password"}),(0,l.jsx)("input",{type:"password",value:i,onChange:e=>s(e.target.value)}),(0,l.jsx)("button",{className:"login__signInButton",onClick:n=>{n.preventDefault(),lD.createUserWithEmailAndPassword(t,i).then((t=>{e("/")})).catch((e=>alert(e.message)))},type:"submit",children:"Sign in"})]}),(0,l.jsxs)("p",{children:["By signing-in you agree to Amazon's clone Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest Based Ads"," "]}),(0,l.jsx)("button",{className:"login__registerButton",onClick:n=>{n.preventDefault(),lD.createUserWithEmailAndPassword(t,i).then((t=>{console.log(t),t&&e("/")})).catch((e=>alert(e.message)))},children:"Create your Amazon Account"})]})]})};var fD=n(764);function pD(e,t){return function(){return e.apply(t,arguments)}}const{toString:mD}=Object.prototype,{getPrototypeOf:gD}=Object,yD=(vD=Object.create(null),e=>{const t=mD.call(e);return vD[t]||(vD[t]=t.slice(8,-1).toLowerCase())});var vD;const _D=e=>(e=e.toLowerCase(),t=>yD(t)===e),wD=e=>t=>typeof t===e,{isArray:bD}=Array,SD=wD("undefined");const kD=_D("ArrayBuffer");const ED=wD("string"),ID=wD("function"),TD=wD("number"),CD=e=>null!==e&&"object"===typeof e,xD=e=>{if("object"!==yD(e))return!1;const t=gD(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ND=_D("Date"),PD=_D("File"),AD=_D("Blob"),RD=_D("FileList"),DD=_D("URLSearchParams");function OD(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),bD(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function MD(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const LD="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,FD=e=>!SD(e)&&e!==LD;const UD=(jD="undefined"!==typeof Uint8Array&&gD(Uint8Array),e=>jD&&e instanceof jD);var jD;const VD=_D("HTMLFormElement"),BD=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),zD=_D("RegExp"),qD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};OD(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},WD="abcdefghijklmnopqrstuvwxyz",HD="0123456789",KD={DIGIT:HD,ALPHA:WD,ALPHA_DIGIT:WD+WD.toUpperCase()+HD};const YD=_D("AsyncFunction"),GD={isArray:bD,isArrayBuffer:kD,isBuffer:function(e){return null!==e&&!SD(e)&&null!==e.constructor&&!SD(e.constructor)&&ID(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ID(e.append)&&("formdata"===(t=yD(e))||"object"===t&&ID(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&kD(e.buffer),t},isString:ED,isNumber:TD,isBoolean:e=>!0===e||!1===e,isObject:CD,isPlainObject:xD,isUndefined:SD,isDate:ND,isFile:PD,isBlob:AD,isRegExp:zD,isFunction:ID,isStream:e=>CD(e)&&ID(e.pipe),isURLSearchParams:DD,isTypedArray:UD,isFileList:RD,forEach:OD,merge:function e(){const{caseless:t}=FD(this)&&this||{},n={},r=(r,i)=>{const s=t&&MD(n,i)||i;xD(n[s])&&xD(r)?n[s]=e(n[s],r):xD(r)?n[s]=e({},r):bD(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&OD(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return OD(t,((t,r)=>{n&&ID(t)?e[r]=pD(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&gD(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:yD,kindOfTest:_D,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(bD(e))return e;let t=e.length;if(!TD(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:VD,hasOwnProperty:BD,hasOwnProp:BD,reduceDescriptors:qD,freezeMethods:e=>{qD(e,((t,n)=>{if(ID(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ID(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return bD(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:MD,global:LD,isContextDefined:FD,ALPHABET:KD,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KD.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&ID(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(CD(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=bD(e)?[]:{};return OD(e,((e,t)=>{const s=n(e,r+1);!SD(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:YD,isThenable:e=>e&&(CD(e)||ID(e))&&ID(e.then)&&ID(e.catch)};function QD(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}GD.inherits(QD,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:GD.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const $D=QD.prototype,JD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{JD[e]={value:e}})),Object.defineProperties(QD,JD),Object.defineProperty($D,"isAxiosError",{value:!0}),QD.from=(e,t,n,r,i,s)=>{const o=Object.create($D);return GD.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),QD.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const XD=QD;function ZD(e){return GD.isPlainObject(e)||GD.isArray(e)}function eO(e){return GD.endsWith(e,"[]")?e.slice(0,-2):e}function tO(e,t,n){return e?e.concat(t).map((function(e,t){return e=eO(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const nO=GD.toFlatObject(GD,{},null,(function(e){return/^is[A-Z]/.test(e)}));const rO=function(e,t,n){if(!GD.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=GD.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!GD.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&GD.isSpecCompliantForm(t);if(!GD.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(GD.isDate(e))return e.toISOString();if(!a&&GD.isBlob(e))throw new XD("Blob is not supported. Use a Buffer instead.");return GD.isArrayBuffer(e)||GD.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(GD.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(GD.isArray(e)&&function(e){return GD.isArray(e)&&!e.some(ZD)}(e)||(GD.isFileList(e)||GD.endsWith(n,"[]"))&&(a=GD.toArray(e)))return n=eO(n),a.forEach((function(e,r){!GD.isUndefined(e)&&null!==e&&t.append(!0===o?tO([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!ZD(e)||(t.append(tO(i,n,s),l(e)),!1)}const u=[],h=Object.assign(nO,{defaultVisitor:c,convertValue:l,isVisitable:ZD});if(!GD.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!GD.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),GD.forEach(n,(function(n,s){!0===(!(GD.isUndefined(n)||null===n)&&i.call(t,n,GD.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function iO(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function sO(e,t){this._pairs=[],e&&rO(e,this,t)}const oO=sO.prototype;oO.append=function(e,t){this._pairs.push([e,t])},oO.toString=function(e){const t=e?function(t){return e.call(this,t,iO)}:iO;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const aO=sO;function lO(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cO(e,t,n){if(!t)return e;const r=n&&n.encode||lO,i=n&&n.serialize;let s;if(s=i?i(t,n):GD.isURLSearchParams(t)?t.toString():new aO(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const uO=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){GD.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},hO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dO={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:aO,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},fO="undefined"!==typeof window&&"undefined"!==typeof document,pO=(mO="undefined"!==typeof navigator&&navigator.product,fO&&["ReactNative","NativeScript","NS"].indexOf(mO)<0);var mO;const gO="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,yO={...t,...dO};const vO=function(e){function t(e,n,r,i){let s=e[i++];const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&GD.isArray(r)?r.length:s,a)return GD.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&GD.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&GD.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(GD.isFormData(e)&&GD.isFunction(e.entries)){const n={};return GD.forEachEntry(e,((e,r)=>{t(function(e){return GD.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const _O={transitional:hO,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=GD.isObject(e);i&&GD.isHTMLForm(e)&&(e=new FormData(e));if(GD.isFormData(e))return r&&r?JSON.stringify(vO(e)):e;if(GD.isArrayBuffer(e)||GD.isBuffer(e)||GD.isStream(e)||GD.isFile(e)||GD.isBlob(e))return e;if(GD.isArrayBufferView(e))return e.buffer;if(GD.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return rO(e,new yO.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return yO.isNode&&GD.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=GD.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return rO(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(GD.isString(e))try{return(t||JSON.parse)(e),GD.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||_O.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&GD.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw XD.from(i,XD.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yO.classes.FormData,Blob:yO.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};GD.forEach(["delete","get","head","post","put","patch"],(e=>{_O.headers[e]={}}));const wO=_O,bO=GD.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SO=Symbol("internals");function kO(e){return e&&String(e).trim().toLowerCase()}function EO(e){return!1===e||null==e?e:GD.isArray(e)?e.map(EO):String(e)}function IO(e,t,n,r,i){return GD.isFunction(r)?r.call(this,t,n):(i&&(t=n),GD.isString(t)?GD.isString(r)?-1!==t.indexOf(r):GD.isRegExp(r)?r.test(t):void 0:void 0)}class TO{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=kO(t);if(!i)throw new Error("header name must be a non-empty string");const s=GD.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=EO(e))}const s=(e,t)=>GD.forEach(e,((e,n)=>i(e,n,t)));return GD.isPlainObject(e)||e instanceof this.constructor?s(e,t):GD.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&bO[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=kO(e)){const n=GD.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(GD.isFunction(t))return t.call(this,e,n);if(GD.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=kO(e)){const n=GD.findKey(this,e);return!(!n||void 0===this[n]||t&&!IO(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=kO(e)){const i=GD.findKey(n,e);!i||t&&!IO(0,n[i],i,t)||(delete n[i],r=!0)}}return GD.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!IO(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return GD.forEach(this,((r,i)=>{const s=GD.findKey(n,i);if(s)return t[s]=EO(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=EO(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return GD.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&GD.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[SO]=this[SO]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=kO(e);t[r]||(!function(e,t){const n=GD.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return GD.isArray(e)?e.forEach(r):r(e),this}}TO.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),GD.reduceDescriptors(TO.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),GD.freezeMethods(TO);const CO=TO;function xO(e,t){const n=this||wO,r=t||n,i=CO.from(r.headers);let s=r.data;return GD.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function NO(e){return!(!e||!e.__CANCEL__)}function PO(e,t,n){XD.call(this,null==e?"canceled":e,XD.ERR_CANCELED,t,n),this.name="CanceledError"}GD.inherits(PO,XD,{__CANCEL__:!0});const AO=PO;const RO=yO.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];GD.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),GD.isString(r)&&o.push("path="+r),GD.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function DO(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const OO=yO.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=GD.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const MO=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};function LO(e,t){let n=0;const r=MO(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a);n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const FO="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=CO.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(GD.isFormData(r))if(yO.hasStandardBrowserEnv||yO.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=DO(e.baseURL,e.url);function d(){if(!u)return;const r=CO.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new XD("Request failed with status code "+n.status,[XD.ERR_BAD_REQUEST,XD.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),cO(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new XD("Request aborted",XD.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new XD("Network Error",XD.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||hO;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new XD(t,r.clarifyTimeoutError?XD.ETIMEDOUT:XD.ECONNABORTED,e,u)),u=null},yO.hasStandardBrowserEnv&&(l&&GD.isFunction(l)&&(l=l(e)),l||!1!==l&&OO(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&RO.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&GD.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),GD.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",LO(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",LO(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(n(!t||t.type?new AO(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===yO.protocols.indexOf(f)?n(new XD("Unsupported protocol "+f+":",XD.ERR_BAD_REQUEST,e)):u.send(r||null)}))},UO={http:null,xhr:FO};GD.forEach(UO,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const jO=e=>"- ".concat(e),VO=e=>GD.isFunction(e)||null===e||!1===e,BO=e=>{e=GD.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!VO(n)&&(r=UO[(t=String(n)).toLowerCase()],void 0===r))throw new XD("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(jO).join("\n"):" "+jO(e[0]):"as no adapter specified";throw new XD("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function zO(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new AO(null,e)}function qO(e){zO(e),e.headers=CO.from(e.headers),e.data=xO.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return BO(e.adapter||wO.adapter)(e).then((function(t){return zO(e),t.data=xO.call(e,e.transformResponse,t),t.headers=CO.from(t.headers),t}),(function(t){return NO(t)||(zO(e),t&&t.response&&(t.response.data=xO.call(e,e.transformResponse,t.response),t.response.headers=CO.from(t.response.headers))),Promise.reject(t)}))}const WO=e=>e instanceof CO?e.toJSON():e;function HO(e,t){t=t||{};const n={};function r(e,t,n){return GD.isPlainObject(e)&&GD.isPlainObject(t)?GD.merge.call({caseless:n},e,t):GD.isPlainObject(t)?GD.merge({},t):GD.isArray(t)?t.slice():t}function i(e,t,n){return GD.isUndefined(t)?GD.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!GD.isUndefined(t))return r(void 0,t)}function o(e,t){return GD.isUndefined(t)?GD.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(WO(e),WO(t),!0)};return GD.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);GD.isUndefined(o)&&s!==a||(n[r]=o)})),n}const KO="1.6.2",YO={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{YO[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const GO={};YO.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new XD(r(i," has been removed"+(t?" in "+t:"")),XD.ERR_DEPRECATED);return t&&!GO[i]&&(GO[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const QO={assertOptions:function(e,t,n){if("object"!==typeof e)throw new XD("options must be an object",XD.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new XD("option "+s+" must be "+n,XD.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new XD("Unknown option "+s,XD.ERR_BAD_OPTION)}},validators:YO},$O=QO.validators;class JO{constructor(e){this.defaults=e,this.interceptors={request:new uO,response:new uO}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=HO(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&QO.assertOptions(n,{silentJSONParsing:$O.transitional($O.boolean),forcedJSONParsing:$O.transitional($O.boolean),clarifyTimeoutError:$O.transitional($O.boolean)},!1),null!=r&&(GD.isFunction(r)?t.paramsSerializer={serialize:r}:QO.assertOptions(r,{encode:$O.function,serialize:$O.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&GD.merge(i.common,i[t.method]);i&&GD.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=CO.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[qO.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(mu){t.call(this,mu);break}}try{c=qO.call(this,d)}catch(mu){return Promise.reject(mu)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return cO(DO((e=HO(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}GD.forEach(["delete","get","head","options"],(function(e){JO.prototype[e]=function(t,n){return this.request(HO(n||{},{method:e,url:t,data:(n||{}).data}))}})),GD.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(HO(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}JO.prototype[e]=t(),JO.prototype[e+"Form"]=t(!0)}));const XO=JO;class ZO{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new AO(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new ZO((function(t){e=t})),cancel:e}}}const eM=ZO;const tM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tM).forEach((e=>{let[t,n]=e;tM[n]=t}));const nM=tM;const rM=function e(t){const n=new XO(t),r=pD(XO.prototype.request,n);return GD.extend(r,XO.prototype,n,{allOwnKeys:!0}),GD.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(HO(t,n))},r}(wO);rM.Axios=XO,rM.CanceledError=AO,rM.CancelToken=eM,rM.isCancel=NO,rM.VERSION=KO,rM.toFormData=rO,rM.AxiosError=XD,rM.Cancel=rM.CanceledError,rM.all=function(e){return Promise.all(e)},rM.spread=function(e){return function(t){return e.apply(null,t)}},rM.isAxiosError=function(e){return GD.isObject(e)&&!0===e.isAxiosError},rM.mergeConfig=HO,rM.AxiosHeaders=CO,rM.formToJSON=e=>vO(GD.isHTMLForm(e)?new FormData(e):e),rM.getAdapter=BO,rM.HttpStatusCode=nM,rM.default=rM;const iM=rM.create({baseURL:"http://127.0.0.1:5001/clone-4a5d2/us-central1/api"});const sM=function(){const e=oe(),[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1),[u,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),g=(0,fD.useStripe)(),y=(0,fD.useElements)(),[{user:v,basket:_},w]=h();return(0,r.useEffect)((()=>{(async()=>{const e=await iM({method:"post",url:"/payments/create?total=".concat(d(_))});m(e.data.clientSecret)})()}),[_]),console.log("SECRET KEY >>> ",p),(0,l.jsx)("div",{className:"payment",children:(0,l.jsxs)("div",{className:"payment__container",children:[(0,l.jsxs)("h1",{children:["Checkout(",(0,l.jsxs)(Me,{to:"/checkout",children:[null===_||void 0===_?void 0:_.length," items"]}),")"]}),(0,l.jsxs)("div",{className:"payment__section",children:[(0,l.jsx)("div",{className:"payment__title",children:(0,l.jsx)("h3",{children:"Items will be delivered to this address"})}),(0,l.jsxs)("div",{className:"payment__address",children:[(0,l.jsx)("p",{children:null===v||void 0===v?void 0:v.email}),(0,l.jsx)("p",{children:"Flat No 571, Kamal Vihar Appartments"}),(0,l.jsx)("p",{children:"Sector- 7, Dwarka, New Delhi"}),(0,l.jsx)("p",{children:"110075, India"})]})]}),(0,l.jsxs)("div",{className:"payment__section",children:[(0,l.jsx)("div",{className:"payment__title",children:(0,l.jsx)("h3",{children:"Review items"})}),(0,l.jsx)("div",{className:"payment__items",children:_.map((e=>(0,l.jsx)(Ee,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})))})]}),(0,l.jsxs)("div",{className:"payment__section",children:[(0,l.jsx)("div",{className:"payment__title",children:(0,l.jsx)("h3",{children:"Payment Method"})}),(0,l.jsx)("div",{className:"payment__details",children:(0,l.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),f(!0);await g.confirmCardPayment(p,{payment_method:{card:y.getElement(fD.CardElement)}}).then((t=>{let{paymentIntent:r}=t;aD.collection("users").doc(null===v||void 0===v?void 0:v.id).collection("orders").doc(r.uid).set({basket:_,amount:r.amount,created:r.created}),c(!0),n(null),f(!1),e("/orders")}))},children:[(0,l.jsx)(fD.CardElement,{onChange:e=>{s(e.empty),n(e.error?e.error.message:"")}}),(0,l.jsxs)("div",{className:"payment__priceContainer",children:[(0,l.jsx)(a(),{renderText:e=>(0,l.jsxs)("h3",{children:["Order Total: ",e]}),decimalScale:2,value:d(_),displayType:"text",thousandSeparator:!0,prefix:"\u20b9"}),(0,l.jsx)("button",{disabled:u||i||o,children:(0,l.jsx)("span",{children:u?(0,l.jsx)("p",{children:"Processing..."}):"Buy Now"})})]}),t&&(0,l.jsx)("div",{children:t})]})})]})]})})};var oM="https://js.stripe.com/v3",aM=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,lM="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",cM=null,uM=function(e){return null!==cM||(cM=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(lM),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(oM,'"]')),t=0;t<e.length;t++){var n=e[t];if(aM.test(n.src))return n}return null}();r&&e?console.warn(lM):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(oM).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(mu){return void n(mu)}else t(null)}))),cM},hM=Promise.resolve().then((function(){return uM(null)})),dM=!1;hM.catch((function(e){dM||console.warn(e)}));var fM=n(426),pM=n.n(fM);const mM=function(e){var t;let{order:n}=e;return(0,l.jsxs)("div",{className:"order",children:[(0,l.jsx)("h2",{children:"Order"}),(0,l.jsx)("p",{children:pM().unix(n.data.created).format("MMMM Do YYYY, h:mma")}),(0,l.jsx)("p",{className:"order__id",children:(0,l.jsx)("small",{children:n.id})}),null===(t=n.data.basket)||void 0===t?void 0:t.map((e=>(0,l.jsx)(Ee,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating}))),(0,l.jsx)(a(),{renderText:e=>(0,l.jsxs)("h3",{className:"order__total",children:["Order Total: ",e]}),decimalScale:2,value:n.data.amount,displayType:"text",thousandSeparator:!0,prefix:"\u20b9"})]})};const gM=function(){const[{basket:e,user:t},n]=h(),[i,s]=(0,r.useState)([]);return(0,r.useEffect)((()=>{t?aD.collection("users").doc(null===t||void 0===t?void 0:t.uid).collection("orders").orderBy("created","desc").onSnapshot((e=>s(e.docs.map((e=>({id:e.id,data:e.data()})))))):s([])}),[t]),(0,l.jsxs)("div",{className:"orders",children:[(0,l.jsx)("h1",{children:"Your Orders"}),(0,l.jsx)("div",{className:"orders__order",children:null===i||void 0===i?void 0:i.map((e=>(0,l.jsx)(mM,{order:e})))})]})};const yM=function(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];dM=!0;var r=Date.now();return hM.then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.1.11",startTime:t})}(r,n),r}(e,t,r)}))}("pk_test_51OD8LbSADQeb1tS0Cod90dJ6XrHoRio7FSvz0oDu2Gq1SjpyKiQTq0hIAD0admeEK8TUNGk75hRWyQUI0ZRPgqrL00eB5lmpGl"),[{},t]=h();return(0,r.useEffect)((()=>{lD.onAuthStateChanged((e=>{console.log("The User is ",e),t(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),(0,l.jsx)(Re,{children:(0,l.jsx)("div",{className:"app",children:(0,l.jsxs)(be,{children:[(0,l.jsx)(_e,{exact:!0,path:"/",element:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(cD,{}),(0,l.jsx)(hD,{})]})}),(0,l.jsx)(_e,{exact:!0,path:"/orders",element:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(cD,{}),(0,l.jsx)(gM,{})]})}),(0,l.jsx)(_e,{exact:!0,path:"/checkout",element:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(cD,{}),(0,l.jsx)(Ie,{})]})}),(0,l.jsx)(_e,{exact:!0,path:"/login",element:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(dD,{})})}),(0,l.jsx)(_e,{exact:!0,path:"/payment",element:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(cD,{}),(0,l.jsx)(fD.Elements,{stripe:e,children:(0,l.jsx)(sM,{})})]})})]})})})},vM=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,l.jsx)(r.StrictMode,{children:(0,l.jsx)(u,{initialState:{basket:[],user:null},reducer:f,children:(0,l.jsx)(yM,{})})})),vM()})()})();
//# sourceMappingURL=main.32beca68.js.map